import{a as y}from"./resource-BOzK7tRI.js";import{P as z,b as U,o as q,R as F}from"./nodemodule-@ant-design_icons-vue@7.0.1_vue@3.4.21-CO80cFpd.js";import{r as V,M as D,t as E,B as G,a as K}from"./nodemodule-ant-design-vue@4.1.2_vue@3.4.21-D4V-KPiA.js";import{d as Q,Q as T,R as j,b as A,K as r,c as o,aI as x,M as g,G as H,h as w,F as J,O as W,L as m,ar as X,aq as Y}from"./nodemodule-@vue_runtime-core@3.4.21-Cnn673wu.js";import{r as c,u}from"./nodemodule-@vue_reactivity@3.4.21-DbkE7Gi6.js";import{n as Z}from"./nodemodule-@vue_shared@3.4.21-Ctf17_ps.js";/* empty css                                                                    */import{_ as ee}from"./main-Ch5DcOKu.js";import"./nodemodule-@ant-design_icons-svg@4.4.2-C9VH68wD.js";import"./nodemodule-@ant-design_colors@6.0.0-CBJ--Aym.js";import"./nodemodule-@ctrl_tinycolor@3.6.1-DOFZgDuz.js";import"./nodemodule-@babel_runtime@7.27.1-Bq4_u9L9.js";import"./nodemodule-@vue_runtime-dom@3.4.21-CDjXREoQ.js";import"./nodemodule-lodash-es@4.17.21-DcfALcKD.js";import"./nodemodule-resize-observer-polyfill@1.5.1-B1PUzC5B.js";import"./nodemodule-dayjs@1.11.13-B6I98uus.js";import"./nodemodule-classnames@2.5.1-BK5ccKcQ.js";import"./nodemodule-throttle-debounce@5.0.2-CUWDS_la.js";import"./nodemodule-async-validator@4.2.5-9PlIezaS.js";import"./nodemodule-scroll-into-view-if-needed@2.2.31-CLVC0ehY.js";import"./nodemodule-compute-scroll-into-view@1.0.20-1gs_hJI2.js";import"./nodemodule-vue-types@3.0.2_vue@3.4.21-CF28atMM.js";import"./nodemodule-dom-align@1.12.4-CRCehRfe.js";import"./nodemodule-@emotion_hash@0.9.2-WldOFDRm.js";import"./nodemodule-@emotion_unitless@0.8.1-sScrWPmR.js";import"./nodemodule-stylis@4.3.6-D5iaQeiq.js";import"./nodemodule-pinia@2.1.7_typescript@5.4.2_vue@3.4.21-DRg4DShQ.js";/* empty css                                       */import"./nodemodule-axios@1.6.8-BZ84_VUH.js";import"./nodemodule-js-cookie@3.0.5-Cz0CWeBA.js";import"./nodemodule-vue-router@4.3.0_vue@3.4.21-BC_007Jj.js";import"./nodemodule-@vueuse_core@10.9.0_vue@3.4.21-CS6n5tIH.js";import"./nodemodule-@vueuse_shared@10.9.0_vue@3.4.21-IMP1eStj.js";import"./nodemodule-gaius-utils@1.1.8_@types_node@20.11.28_typescript@5.4.2_vite@5.1.6-LqpbgJb2.js";import"./nodemodule-drag-grid-layout-v3@0.0.15_@types_node@20.11.28_typescript@5.4.2_vite@5.1.6-CKjsc2SR.js";import"./nodemodule-echarts@5.5.1-D0X1tymK.js";import"./nodemodule-tslib@2.3.0-BDyQ-Jie.js";import"./nodemodule-zrender@5.6.0-BXroVW6P.js";const te=l=>(X("data-v-678baa60"),l=l(),Y(),l),oe={class:"image-picker"},ae=te(()=>g("div",{class:"select-image-text"},"选择图片",-1)),se={key:1,class:"preview-image"},ie={class:"image-container"},ne={class:"image-list"},le=["src","onClick"],pe=Q({__name:"ImagePicker",props:{value:{type:String,required:!0},valueModifiers:{}},emits:T(["change"],["update:value"]),setup(l,{emit:N}){const v=j(l,"value"),_=c([]),s=c({pageSize:3,pageNumber:1,keyword:""}),C=c(0),M="/prod",d=c(""),L=e=>{d.value=e},O=()=>{s.value.pageNumber++,h()},h=()=>{y.getList(s.value).then(e=>{const{code:t,data:i,msg:n}=e;t==200&&(_.value=i.data,C.value=i.total)})},P=()=>{s.value.pageNumber--,h()},S=e=>{const t=new FormData;t.append("file",e.file,encodeURIComponent(e.file.name)),y.add(t).then(i=>{const{code:n,data:k,msg:b}=i;n==200&&(f(`${M}/${k.path}`),K.success(b),p.value=!1)})},p=c(!1),B=()=>{p.value=!0},R=N,f=e=>{v.value=e,R("change",e)},$=()=>{f(d.value),I()},I=()=>{d.value="",p.value=!1};return A(()=>{h()}),(e,t)=>{const i=V,n=G,k=E,b=D;return m(),r("div",oe,[v.value?(m(),r("div",se,[o(u(U),{onClick:t[0]||(t[0]=a=>f("")),style:{position:"absolute",top:"5px",right:"5px",color:"#999","z-index":"99"}}),o(i,{src:v.value,width:"100px",height:"100px"},null,8,["src"])])):(m(),r("div",{key:0,class:"select-image",onClick:B},[o(u(z)),ae])),o(b,{open:p.value,"onUpdate:open":t[1]||(t[1]=a=>p.value=a),title:"选择图片",onOk:$,onCancel:I},{default:x(()=>[o(k,{name:"file",accept:"image/*",customRequest:S,maxCount:"1",showUploadList:!1},{default:x(()=>[o(n,{type:"primary"},{default:x(()=>[H("自定义")]),_:1})]),_:1}),g("div",ie,[o(n,{type:"ghost",icon:w(u(q)),onClick:P,disabled:s.value.pageNumber==1},null,8,["icon","disabled"]),g("div",ne,[(m(!0),r(J,null,W(_.value,a=>(m(),r("div",{key:a.id,class:Z(["image-item",{selected:d.value==a.path}])},[g("img",{src:a.path,onClick:re=>L(a.path),height:"100px",width:"100px"},null,8,le)],2))),128))]),o(n,{type:"ghost",icon:w(u(F)),onClick:O,disabled:s.value.pageSize*(s.value.pageNumber-1)+_.value.length==C.value},null,8,["icon","disabled"])])]),_:1},8,["open"])])}}}),He=ee(pe,[["__scopeId","data-v-678baa60"]]);export{He as default};
