var S=Object.defineProperty;var B=(n,e,t)=>e in n?S(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var v=(n,e,t)=>(B(n,typeof e!="symbol"?e+"":e,t),t);import{_ as I}from"./CodeEditor.vue_vue_type_script_setup_true_name_EvCode_lang-CNYusMji.js";import{I as M,g as x,t as O,x as h,v as N,D as k,o as m,h as g,w as r,l,J as E,i as b,K as $,L as D,M as V,N as j,y as w,O as z,P as F,Q as T,r as y,F as U,R as q,B as C,T as A}from"./.pnpm-C57POoKK.js";import{_ as G}from"./_plugin-vue_export-helper-DlAUqK2U.js";class J{constructor(e,t){v(this,"state");v(this,"formData",{});this.state=e,t&&(this.formData=t)}getValue(e){const{staticValue:t,mode:o,dynExp:s}=e;return o=="static"?t:this.resolveDynamicValue(s)}resolveDynamicValue(e){try{return new Function("state",`return ${e}`)(this.state)}catch(t){return console.error("Error evaluating dynamic expression:",t),null}}isDynamicConfigData(e){return typeof e=="object"&&e!==null&&typeof e.staticValue=="string"&&["static","dynamic"].includes(e.mode)&&typeof e.dynExp=="string"}processObject(e){const t=M(e);if(Array.isArray(t))return t.map(o=>this.processObject(o));if(typeof t=="object"&&t!==null){const o={};for(const s in t){const a=t[s];this.isDynamicConfigData(a)?o[s]=this.getValue(a):typeof a=="object"&&a!==null?o[s]=this.processObject(a):o[s]=a}return o}else return t}}const P=$("div",{class:"iconfont icon-brackets-curly"},null,-1),R=x({__name:"ConfigInput",props:O({compact:{type:Boolean,default:!0},size:{default:"default"}},{data:{required:!0},dataModifiers:{}}),emits:["update:data"],setup(n){const e=h(n,"data"),t=n,{size:o,compact:s}=N(t),a=k(()=>e.value.mode==="dynamic"),d=()=>{e.value.mode=e.value.mode==="dynamic"?"static":"dynamic"},c=i=>{e.value.mode==="dynamic"?e.value.dynExp=i.target.value:e.value.staticValue=i.target.value};return(i,u)=>{const f=D,_=V,p=j;return m(),g(p,{size:b(o),compact:b(s)},{default:r(()=>[l(f,E({value:a.value?e.value.dynExp:e.value.staticValue,onChange:c,style:{width:"calc(100% - 35px)"},prefix:a.value?"{":"",suffix:a.value?"}":""},i.$attrs),null,16,["value","prefix","suffix"]),l(_,{title:a.value?`绑定中:${e.value.dynExp}`:"变量绑定",type:a.value?"primary":"",onClick:u[0]||(u[0]=X=>d())},{icon:r(()=>[P]),_:1},8,["title","type"])]),_:1},8,["size","compact"])}}}),H=n=>(F("data-v-307aa230"),n=n(),T(),n),K={class:"config-select"},L=H(()=>$("div",{class:"iconfont icon-brackets-curly"},null,-1)),Q=x({__name:"ConfigSelect",props:{data:{required:!0},dataModifiers:{}},emits:["update:data"],setup(n){const e=h(n,"data"),t=k(()=>e.value.mode==="dynamic"),o=()=>{e.value.mode=e.value.mode==="dynamic"?"static":"dynamic"};return(s,a)=>{const d=z,c=D,i=V;return m(),w("div",K,[t.value?(m(),g(c,{key:1,value:e.value.dynExp,"onUpdate:value":a[1]||(a[1]=u=>e.value.dynExp=u),style:{width:"calc(100% - 35px)"},prefix:"{",suffix:"}"},null,8,["value"])):(m(),g(d,E({key:0,style:{width:"calc(100% - 35px)"}},s.$attrs,{value:e.value.staticValue,"onUpdate:value":a[0]||(a[0]=u=>e.value.staticValue=u)}),null,16,["value"])),l(i,{title:t.value?`绑定中:${e.value.dynExp}`:"变量绑定",type:t.value?"primary":"",onClick:a[2]||(a[2]=u=>o())},{icon:r(()=>[L]),_:1},8,["title","type"])])}}}),W=G(Q,[["__scopeId","data-v-307aa230"]]),ae=x({__name:"HomeView",setup(n){const e=y({input:{staticValue:"",mode:"static",dynExp:""},select:{staticValue:"",mode:"static",dynExp:""},test:"123"}),t=y({string:"配置表单",arr:[1,2,3,4],number:125654}),o=y([{label:"1",value:"1"},{label:"2",value:"2"}]),s=()=>{e.value},a=()=>{new J(t.value).processObject(e.value)};return(d,c)=>{const i=I,u=A,f=q,_=V;return m(),w(U,null,[l(i,{value:JSON.stringify(t.value,null,4),disabled:""},null,8,["value"]),l(f,null,{default:r(()=>[l(u,{label:"输入框"},{default:r(()=>[l(R,{data:e.value.input,"onUpdate:data":c[0]||(c[0]=p=>e.value.input=p)},null,8,["data"])]),_:1}),l(u,{label:"选择框"},{default:r(()=>[l(W,{data:e.value.select,"onUpdate:data":c[1]||(c[1]=p=>e.value.select=p),options:o.value},null,8,["data","options"])]),_:1})]),_:1}),l(_,{onClick:s},{default:r(()=>[C("配置项")]),_:1}),l(_,{onClick:a},{default:r(()=>[C("数据")]),_:1})],64)}}});export{ae as default};
