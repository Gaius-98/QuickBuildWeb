import{c as C}from"./componentsSchema-gFhwa5FU.js";import{g as h,r as m,o as d,y as p,F as n,M as S,T as D,G as $,I,an as y,ao as w,x as k,h as M,l as r,w as i,v as q,R as x,L as g,E as B,O as T,b3 as E,a4 as N,b5 as O}from"./.pnpm-BfHkGPSW.js";import{_ as v}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{_ as P,D as L}from"./ConfigForm.vue_vue_type_script_setup_true_lang-CMQx4y5M.js";const R=a=>(y("data-v-ca4a27cc"),a=a(),w(),a),V={class:"material-area"},W={class:"material-layout-area"},j=R(()=>n("div",{class:"title"},"内置组件",-1)),A={class:"content"},F=["data-material"],z={class:"material-label"},G=h({__name:"MaterialArea",setup(a){const o=m({internalComp:C,customComp:[]}),e=c=>{var t;const l=c.target;(t=c.dataTransfer)==null||t.setData("material",l.dataset.material)};return(c,l)=>(d(),p("div",V,[n("div",W,[j,n("div",A,[(d(!0),p(S,null,D(o.value.internalComp,t=>(d(),p("div",{key:t.name,draggable:"true",onDragstart:e,"data-material":t.name,class:"material-item"},[n("span",{class:$(["iconfont material-icon",t.icon])},null,2),n("span",z,I(t.label),1)],40,F))),128))])])]))}}),J=v(G,[["__scopeId","data-v-ca4a27cc"]]),H={text:{type:"input",label:"文本内容"}},K={src:{type:"input",label:"图片地址"}},Q={src:{type:"input",label:"页面地址"}},U=a=>({dataset:{type:"select",label:"数据集",options:a},dimension:{type:"select",label:"维度",options:[],mode:"multiple"},target:{type:"select",label:"指标",options:[],mode:"multiple"}}),X={"qb-text":H,"qb-image":K,"qb-iframe":Q,"qb-chart":U},Y={class:"material-cfg"},Z={class:"material-cfg-btn"},aa=h({__name:"MaterialCfg",setup(a){const o=m({}),e=m({}),c=m({}),l=new L;window.addEventListener("message",s=>{s.data.type==="select"&&(e.value=s.data.data,c.value=X[s.data.data.name],o.value=s.data.data.props)});let t=null;const _=s=>{if(t)t.postMessage({type:"refresh",data:s});else throw new Error("contentWindow is null")},u=()=>{e.value.props=l.processObject(o.value),localStorage.setItem(`dg-raw-config-${e.value.id}`,JSON.stringify(o.value)),e.value.props=l.processObject(o.value),_(q(e.value))};return k(()=>{t=document.querySelector(".standalone-iframe").contentWindow}),(s,b)=>{const f=x;return d(),p("div",Y,[(d(),M(P,{class:"material-cfg-contain",key:e.value.id,data:o.value,schema:c.value},null,8,["data","schema"])),n("div",Z,[r(f,{onClick:u},{default:i(()=>[g("刷新")]),_:1})])])}}}),ta=v(aa,[["__scopeId","data-v-c7e238ec"]]),ea=a=>(y("data-v-73565db5"),a=a(),w(),a),sa={class:"dg-design"},oa={class:"dg-design-container"},na=ea(()=>n("div",{class:"middle-part"},[n("iframe",{width:"100%",height:"100%",src:"/standalone/standalone.html",style:{border:"0"},class:"standalone-iframe"})],-1)),ca=h({__name:"DashboardDesign",props:{id:{}},setup(a){window.name="dg-design";const o=a,{id:e}=B(o),c=T(()=>e.value),l=()=>{};return(t,_)=>{const u=N,s=x,b=O,f=E;return d(),p("div",sa,[r(f,{subTitle:c.value,ghost:!1,style:{border:"1px solid rgb(235, 237, 240)",padding:"10px 24px"}},{title:i(()=>[r(u,{bordered:!1,class:"form-name"})]),extra:i(()=>[r(b,null,{default:i(()=>[r(s,{class:"preview-btn"},{default:i(()=>[g(" 预览 ")]),_:1}),r(s,{onClick:_[0]||(_[0]=ra=>l()),type:"primary",class:"save-btn"},{default:i(()=>[g(" 保存 ")]),_:1})]),_:1})]),_:1},8,["subTitle"]),n("div",oa,[r(J,{class:"left-part"}),na,r(ta,{class:"right-part"})])])}}}),_a=v(ca,[["__scopeId","data-v-73565db5"]]);export{_a as default};
