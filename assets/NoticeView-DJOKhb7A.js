import{a as v}from"./notice-wAlKWs77.js";import{d as W,bf as X,r as s,p as B,c as Z,F as ee,q as M,f as o,w as a,$ as f,v as te,H as w,e as T,I as oe,J as ae,a as O,bj as ne,o as g}from"./iconfont-DlnTACa0.js";import{C as le}from"./index-DWh7MMD2.js";import{M as ie}from"./index-rRoPRs5X.js";import{F as se,_ as re}from"./index-3zxQoAaC.js";import{I as me,b as pe}from"./index-DstlK8U5.js";import{B as ue}from"./EyeOutlined-MSEk9XoR.js";import{R as ce}from"./dayjs-78fL9Suk.js";import{_ as de}from"./index-C5YNH3Jl.js";import{_ as _e}from"./index-b8kqwElj.js";import{_ as ve}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-DFAyz8EE.js";import"./useFlexGapSupport-CiVQ43IU.js";import"./_getPrototype-CreJcRG-.js";import"./initDefaultProps-CCuNUPvT.js";import"./CheckOutlined-DhghRCOv.js";import"./index-CkgH7Yyy.js";import"./shallowequal-CYaRVoeZ.js";import"./index-Cj_T3PZy.js";import"./PlusOutlined-boFLuxir.js";import"./index-Df99mV5f.js";import"./pickAttrs-C_Pg0-pd.js";import"./ActionButton-GOh5bmF9.js";import"./cloneDeep-eMWwQ7HD.js";import"./Col-7N7sU2gK.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./index-CcL4KyIF.js";import"./RadioButton-CjVxn_Oc.js";import"./index-C6qv0Jk3.js";import"./css-CjeDAR7Q.js";import"./index-DVHdQjvX.js";import"./LeftOutlined-DjA3wwZo.js";import"./RightOutlined-DiQ8sQL1.js";import"./useBreakpoint-BBubvWxm.js";import"./zh_CN-CAyhejr6.js";import"./index-BZJkr9T5.js";import"./dropdown-CS9IU7I3.js";import"./index-BJM6GpkM.js";const fe={class:"notice"},ge={class:"tools"},ye=W({__name:"NoticeView",setup(ke){const n=X({keyword:"",pageNumber:1,pageSize:10,startTime:"",endTime:""}),u=s(""),R=()=>{u.value?(n.startTime=u.value[0],n.endTime=u.value[1]):(n.startTime="",n.endTime="")},h=s([]),V=s([{title:"标题",key:"title",dataIndex:"title",width:"150px"},{title:"内容",key:"content",dataIndex:"content",width:"400px",ellipsis:!0},{title:"操作",key:"action",dataIndex:"action",width:"250px"}]),k=s(!1),x=s(),$=()=>{var t;(t=x.value)==null||t.resetFields(),n.startTime="",n.endTime="",u.value="",c()},F=s(0),U=()=>{n.pageNumber=1,n.pageSize=10,c()},Y=t=>{const{current:e,pageSize:l}=t;n.pageNumber=e,n.pageSize=l,c()},c=()=>{k.value=!0,v.getList(n).then(t=>{const{code:e,data:l}=t;e==200&&(h.value=l.data,F.value=l.total),k.value=!1})},N=s([]),j=s({});B(()=>{c(),Z.getDict(["configType"]).then(t=>{const{code:e,data:l,msg:r}=t;e==200&&(N.value=l.configType,j.value=N.value.reduce((y,p)=>(y[p.value]=p.label,y),{}))})});const d=s(!1),m=s({title:"",content:""}),_=s("add"),q=ee(()=>({add:"新增通知",edit:"编辑通知"})[_.value]),b=s(),H=()=>{_.value="add",d.value=!0,m.value={title:"",content:""}},L=async t=>{const{code:e,data:l}=await v.getDetail(t.id);e==200&&(m.value=l,_.value="edit",d.value=!0)},P=async t=>{const{code:e,msg:l,data:r}=await v.remove(t.id);e==200&&(O.success(r),c())},D=()=>{var t;(t=b.value)==null||t.resetFields()},E=()=>{var t;(t=b.value)==null||t.validate().then(()=>{let e;_.value=="add"?e=v.add:e=v.update,e(m.value).then(l=>{const{code:r}=l;r==200&&(O.success(_.value=="add"?"新增成功":"编辑成功"),c()),D(),d.value=!1})})};return B(()=>{}),(t,e)=>{const l=me,r=re,y=ce,p=ue,S=se,z=le,A=_e,J=de,G=pe,K=ie,C=ne("has-perm");return g(),M("div",fe,[o(z,{class:"search-area"},{default:a(()=>[o(S,{ref_key:"searchFormRef",ref:x,model:n,layout:"inline",onFinish:U},{default:a(()=>[o(r,{label:"关键字",prop:"keyword"},{default:a(()=>[o(l,{value:n.keyword,"onUpdate:value":e[0]||(e[0]=i=>n.keyword=i)},null,8,["value"])]),_:1}),o(r,{label:"日期范围"},{default:a(()=>[o(y,{value:u.value,"onUpdate:value":e[1]||(e[1]=i=>u.value=i),showTime:!0,valueFormat:"YYYY-MM-DD HH:mm:ss",onChange:e[2]||(e[2]=i=>R())},null,8,["value"])]),_:1}),o(r,null,{default:a(()=>[o(p,{type:"primary","html-type":"submit"},{default:a(()=>[f("搜索")]),_:1}),o(p,{style:{margin:"0 8px"},onClick:$},{default:a(()=>[f(" 重置 ")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),o(z,null,{default:a(()=>[te("div",ge,[w((g(),T(p,{type:"primary",onClick:H},{default:a(()=>[f("新增")]),_:1})),[[C,"system:notice:add"]])]),o(J,{loading:k.value,columns:V.value,"data-source":h.value,scroll:{y:560},onChange:Y,pagination:{current:n.pageNumber,total:F.value,showSizeChanger:!0,pageSize:n.pageSize}},{bodyCell:a(({column:i,record:I})=>[i.key=="action"?(g(),M(ae,{key:0},[w((g(),T(p,{type:"link",onClick:Q=>L(I)},{default:a(()=>[f("编辑")]),_:2},1032,["onClick"])),[[C,"system:notice:update"]]),o(A,{title:"确定要删除吗?","ok-text":"确定","cancel-text":"取消",onConfirm:Q=>P(I)},{default:a(()=>[w((g(),T(p,{type:"link",danger:""},{default:a(()=>[f("删除")]),_:1})),[[C,"system:notice:remove"]])]),_:2},1032,["onConfirm"])],64)):oe("",!0)]),_:1},8,["loading","columns","data-source","pagination"])]),_:1}),o(K,{open:d.value,"onUpdate:open":e[5]||(e[5]=i=>d.value=i),onOk:E,title:q.value,onCancel:D},{default:a(()=>[o(S,{model:m.value,"label-col":{span:8},ref_key:"modalFormRef",ref:b},{default:a(()=>[o(r,{label:"标题",required:"",prop:"title"},{default:a(()=>[o(l,{value:m.value.title,"onUpdate:value":e[3]||(e[3]=i=>m.value.title=i)},null,8,["value"])]),_:1}),o(r,{label:"内容",required:"",prop:"title"},{default:a(()=>[o(G,{value:m.value.content,"onUpdate:value":e[4]||(e[4]=i=>m.value.content=i),rows:5},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["open","title"])])}}}),nt=ve(ye,[["__scopeId","data-v-dd27a587"]]);export{nt as default};
