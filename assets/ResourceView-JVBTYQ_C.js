import{a as y}from"./resource-CKXyxiRk.js";import{g as O,a0 as T,r as c,x as j,a4 as b,o as d,y as z,l as a,w as o,a1 as A,a3 as N,N as u,B as G,h as S,a5 as h,K as H,i as J,as as Q,e as v,a6 as W,a7 as X,U as Y,a8 as Z,ao as ee,ai as ae,aa as te,ab as oe}from"./.pnpm-CNbA6tN1.js";import{_ as ne}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./main-DxNYfsaV.js";import"./iconfont-RswF9Ywb.js";const se={class:"resource"},ie={class:"tools"},le={key:1},ce=O({__name:"ResourceView",setup(re){const n=T({keyword:"",pageNumber:1,pageSize:10}),m=c(!1),k=c([]),I=c([{title:"文件名称",key:"originalname",dataIndex:"originalname",width:"300px"},{title:"缩略图",key:"img",dataIndex:"img",width:"300px"},{title:"文件大小",key:"size",dataIndex:"size",width:"120px"},{title:"地址",key:"path",dataIndex:"path"},{title:"操作",key:"action",dataIndex:"action",width:"250px"}]),f=c(!1),x=c(),F=()=>{var t;(t=x.value)==null||t.resetFields(),i()},w=c(0),B=()=>{n.pageNumber=1,n.pageSize=10,i()},D=t=>{const{current:e,pageSize:s}=t;n.pageNumber=e,n.pageSize=s,i()},R=t=>{m.value=!0;const e=new FormData;e.append("file",t.file,encodeURIComponent(t.file.name)),y.add(e).then(s=>{const{code:l,data:r,msg:g}=s;l==200&&v.success(g),m.value=!1,i()})},i=()=>{f.value=!0,y.getList(n).then(t=>{const{code:e,data:s}=t;e==200&&(k.value=s.data,w.value=s.total),f.value=!1})};j(()=>{i()});const V=async t=>{const{code:e,msg:s,data:l}=await y.remove(t.id);e==200&&(v.success(l),i())},U=()=>{v.success("复制成功")};return(t,e)=>{const s=W,l=X,r=Y,g=Z,C=A,L=ee,$=ae,P=te,q=oe,E=N("copy"),K=N("loading");return b((d(),z("div",se,[a(C,{class:"search-area"},{default:o(()=>[a(g,{ref_key:"searchFormRef",ref:x,layout:"inline",model:n,onFinish:B},{default:o(()=>[a(l,{label:"资源名称",prop:"keyword"},{default:o(()=>[a(s,{value:n.keyword,"onUpdate:value":e[0]||(e[0]=p=>n.keyword=p)},null,8,["value"])]),_:1}),a(l,null,{default:o(()=>[a(r,{type:"primary","html-type":"submit"},{default:o(()=>[u("搜索")]),_:1}),a(r,{style:{margin:"0 8px"},onClick:F},{default:o(()=>[u(" 重置 ")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),a(C,null,{default:o(()=>[G("div",ie,[a(L,{name:"file",accept:"image/*",customRequest:R,maxCount:"1",showUploadList:!1},{default:o(()=>[a(r,{type:"primary"},{default:o(()=>[u(" 上传")]),_:1})]),_:1})]),a(q,{loading:f.value,columns:I.value,"data-source":k.value,scroll:{y:560},onChange:D,pagination:{current:n.pageNumber,total:w.value,showSizeChanger:!0,pageSize:n.pageSize}},{bodyCell:o(({column:p,record:_})=>[p.key=="img"?(d(),S($,{key:0,src:_.path,height:"130px"},null,8,["src"])):h("",!0),p.key=="path"?b((d(),z("span",le,[u(H(_.path)+" ",1),a(J(Q),{style:{cursor:"pointer"},onClick:e[1]||(e[1]=M=>U())})])),[[E,_.path]]):h("",!0),p.key=="action"?(d(),S(P,{key:2,title:"确定要删除吗?","ok-text":"确定","cancel-text":"取消",onConfirm:M=>V(_)},{default:o(()=>[a(r,{type:"link",danger:""},{default:o(()=>[u("删除")]),_:1})]),_:2},1032,["onConfirm"])):h("",!0)]),_:1},8,["loading","columns","data-source","pagination"])]),_:1})])),[[K,m.value,void 0,{fullscreen:!0}]])}}}),fe=ne(ce,[["__scopeId","data-v-84d6fa49"]]);export{fe as default};
