import{B as J,w as ue,y as me,g as be,_ as fe,N as ve,O as ye,u as _e,K as ge,P as he,n as Pe,Q as we,k as Ce,e as De,I as Z,a as Se,h as xe,U as Ie,G as ke,V as $e,W as Me,F as Ve,M as ze,X as Te,Y as Fe}from"./nodemodule-ant-design-vue@4.1.2_vue@3.4.21-DQ6gDd-0.js";import{d as k,K as x,M as D,F as V,O as T,ar as Le,aq as Ae,L as c,a2 as h,aI as b,G as z,Q as qe,R as Q,q as ee,m as te,c as f,ak as F,au as j,y as Be,z as Ne,N as Ue}from"./nodemodule-@vue_runtime-core@3.4.21-Cnn673wu.js";import{r as g,x as A,u as a,i as oe}from"./nodemodule-@vue_reactivity@3.4.21-DbkE7Gi6.js";import{O as G,n as Ee}from"./nodemodule-@vue_shared@3.4.21-Ctf17_ps.js";import{_ as q}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{c as Re,w as K,u as Ke}from"./nodemodule-@vue_runtime-dom@3.4.21-CDjXREoQ.js";import{V as Ye}from"./nodemodule-vue-draggable-next@2.2.1_sortablejs@1.15.6_vue@3.4.21-C6j_8m-S.js";import{c as B}from"./nodemodule-lodash-es@4.17.21-DcfALcKD.js";import{v as le}from"./nodemodule-uuid@9.0.1-CtRu48qb.js";import{d as Ge,s as L}from"./nodemodule-pinia@2.1.7_typescript@5.4.2_vue@3.4.21-DRg4DShQ.js";import{a as O,_ as ae}from"./LowCodeForm.vue_vue_type_script_setup_true_lang-Drafqv_n.js";import{h as Oe}from"./nodemodule-html2canvas@1.4.1-Cc_bx5YD.js";import{u as Qe}from"./system-1F3Cztz8.js";import"./iconfont-BCn86eVw.js";import{a0 as We,a1 as Xe}from"./nodemodule-@ant-design_icons-vue@7.0.1_vue@3.4.21-CO80cFpd.js";import{S as H}from"./SchemaForm-CXG5_yWc.js";import{d as Y}from"./dict-DsarIbzY.js";import"./nodemodule-js-cookie@3.0.5-Cz0CWeBA.js";import{u as je}from"./useReminder-BW3mqQbW.js";import"./nodemodule-@babel_runtime@7.26.9-Bq4_u9L9.js";import"./nodemodule-resize-observer-polyfill@1.5.1-B1PUzC5B.js";import"./nodemodule-dayjs@1.11.13-B6I98uus.js";import"./nodemodule-classnames@2.5.1-BK5ccKcQ.js";import"./nodemodule-@ctrl_tinycolor@3.6.1-DOFZgDuz.js";import"./nodemodule-@ant-design_colors@6.0.0-CBJ--Aym.js";import"./nodemodule-throttle-debounce@5.0.2-CUWDS_la.js";import"./nodemodule-async-validator@4.2.5-9PlIezaS.js";import"./nodemodule-scroll-into-view-if-needed@2.2.31-CLVC0ehY.js";import"./nodemodule-compute-scroll-into-view@1.0.20-1gs_hJI2.js";import"./nodemodule-vue-types@3.0.2_vue@3.4.21-CF28atMM.js";import"./nodemodule-dom-align@1.12.4-CRCehRfe.js";import"./nodemodule-@emotion_hash@0.9.2-WldOFDRm.js";import"./nodemodule-@emotion_unitless@0.8.1-sScrWPmR.js";import"./nodemodule-stylis@4.3.6-D5iaQeiq.js";import"./tools-BCD5ohFr.js";import"./user-mylcbu45.js";import"./nodemodule-@vueuse_core@10.9.0_vue@3.4.21-CS6n5tIH.js";import"./nodemodule-@vueuse_shared@10.9.0_vue@3.4.21-IMP1eStj.js";import"./nodemodule-axios@1.6.8-BZ84_VUH.js";import"./nodemodule-vue-router@4.3.0_vue@3.4.21-BC_007Jj.js";import"./nodemodule-@ant-design_icons-svg@4.4.2-C9VH68wD.js";import"./nodemodule-gaius-utils@1.1.8_@types_node@20.11.28_typescript@5.4.2_vite@5.1.6-LqpbgJb2.js";/* empty css                   */const re=r=>(Le("data-v-537542b9"),r=r(),Ae(),r),He={class:"material-area"},Je={class:"material-layout-area"},Ze=re(()=>D("div",{class:"title"},"布局组件",-1)),et={class:"content"},tt={class:"material-data-area"},ot=re(()=>D("div",{class:"title"},"基础组件",-1)),lt={class:"content"},at=k({__name:"MaterialArea",setup(r){const i=g({layoutMaterials:[{label:"栅格",value:"grid"},{label:"卡片",value:"card"},{label:"分割线",value:"divider"},{label:"折叠框",value:"collapse"}],dataMaterials:[{label:"输入框",value:"input"},{label:"选择器",value:"select"},{label:"日期选择器",value:"date"},{label:"数字输入框",value:"number"},{label:"开关",value:"switch"},{label:"单选框",value:"radio"},{label:"多选框",value:"checkbox"},{label:"文本域",value:"textarea"}]}),n=e=>{var u;const l=e.target;(u=e.dataTransfer)==null||u.setData("material",l.dataset.material)};return(e,l)=>{const u=J;return c(),x("div",He,[D("div",Je,[Ze,D("div",et,[(c(!0),x(V,null,T(i.value.layoutMaterials,d=>(c(),h(u,{type:"dashed",key:d.value,draggable:"true",onDragstart:n,"data-material":d.value},{default:b(()=>[z(G(d.label),1)]),_:2},1032,["data-material"]))),128))])]),D("div",tt,[ot,D("div",lt,[(c(!0),x(V,null,T(i.value.dataMaterials,d=>(c(),h(u,{type:"dashed",key:d.value,draggable:"true",onDragstart:n,"data-material":d.value},{default:b(()=>[z(G(d.label),1)]),_:2},1032,["data-material"]))),128))])])])}}}),rt=q(at,[["__scopeId","data-v-537542b9"]]),$={formItemProp:{label:"",name:"",required:!1},show:void 0},nt={...$,controlProp:{allowClear:!0,bordered:!0,disabled:!1,maxlength:null,size:"middle"},type:"input",id:""},st={...$,controlProp:{allowClear:!0,autosize:!1,disabled:!1,maxlength:null,size:"middle"},type:"textarea",id:""},it={...$,controlProp:{allowClear:!0,bordered:!0,disabled:!1,mode:null,size:"middle",virtual:!0},type:"select",id:""},pt={...$,controlProp:{disabled:!1,size:"middle"},type:"switch",id:""},ct={...$,controlProp:{disabled:!1,size:"middle",buttonStyle:"solid",optionType:"button"},type:"radio",id:""},dt={...$,controlProp:{disabled:!1},type:"checkbox",id:""},ut={...$,controlProp:{allowClear:!1,bordered:!0,disabled:!1,format:"YYYY-MM-DD",mode:"",valueFormat:"YYYY-MM-DD",size:"middle",picker:""},type:"date",id:""},mt={...$,controlProp:{disabled:!1,size:"middle",bordered:!0,controls:!0,max:null,min:null,precision:null,step:1},type:"number",id:""},bt={type:"grid",controlProp:{gutter:0,colNumber:2,children:[]},id:"",show:void 0},ft={type:"card",controlProp:{title:"",bordered:!0,hoverable:!1,children:[]},id:"",show:void 0},vt={type:"divider",controlProp:{type:"horizontal",plain:!1,orientation:"left",dashed:!1,title:""},id:"",show:void 0},yt={type:"collapse",controlProp:{bordered:!0,ghost:!1,header:"折叠面板",showArrow:!0,defaultExpanded:!0,children:[]},id:"",show:void 0},_t=[nt,pt,it,ct,dt,bt,ft,ut,mt,vt,yt,st],gt=()=>"field"+new Date().getTime().toString().slice(-4),ht=(r,i)=>{const n=_t.find(e=>e.type===r);if(n){const e=B(n);if(e.formItemProp){const l=gt();e.formItemProp.label=l,e.formItemProp.name=l}return e.id=new Date().getTime().toString(),{...e,...i}}else throw new Error(`ControlDefault中${r}不存在,加载配置失败。`)},Pt=k({__name:"MaterialGrid",props:qe({gutter:{},colNumber:{}},{children:{required:!0},childrenModifiers:{}}),emits:["update:children"],setup(r){const i=r,{gutter:n,colNumber:e}=A(i),l=Q(r,"children"),u=ee(()=>24/e.value);return te(()=>e.value,()=>{l.value?l.value.length>e.value?l.value=l.value.slice(0,e.value):l.value=l.value.concat(Array.from({length:e.value-l.value.length}).map(()=>[])):l.value=Array.from({length:e.value}).map(()=>[])},{immediate:!0}),(d,_)=>{const p=ue,m=me;return c(),h(m,{gutter:a(n)},{default:b(()=>[(c(!0),x(V,null,T(l.value,(C,v)=>(c(),h(p,{class:"gutter-col",span:u.value,key:v},{default:b(()=>[(c(),h(N,{modelValue:l.value[v],"onUpdate:modelValue":y=>l.value[v]=y,key:v},null,8,["modelValue","onUpdate:modelValue"]))]),_:2},1032,["span"]))),128))]),_:1},8,["gutter"])}}}),wt=q(Pt,[["__scopeId","data-v-bd13b1ec"]]),Ct=k({__name:"MaterialCard",props:{children:{required:!0},childrenModifiers:{}},emits:["update:children"],setup(r){const i=Q(r,"children");return(n,e)=>{const l=be;return c(),h(l,F(n.$attrs,{bodyStyle:{padding:0,"min-height":"40px"}}),{default:b(()=>[f(N,{modelValue:i.value,"onUpdate:modelValue":e[0]||(e[0]=u=>i.value=u)},null,8,["modelValue"])]),_:1},16)}}}),Dt=k({__name:"MaterialDivider",props:{type:{},plain:{type:Boolean},orientation:{},dashed:{type:Boolean},title:{}},setup(r){const i=r,{title:n,dashed:e,orientation:l,plain:u,type:d}=A(i);return(_,p)=>{const m=fe;return c(),h(m,{dashed:a(e),orientation:a(l),plain:a(u),type:a(d)},{default:b(()=>[z(G(a(n)),1)]),_:1},8,["dashed","orientation","plain","type"])}}}),St=k({__name:"MaterialCollapse",props:{bordered:{type:Boolean},ghost:{type:Boolean},title:{},showArrow:{type:Boolean},defaultExpanded:{type:Boolean},children:{}},setup(r){const i=r,{title:n,showArrow:e,bordered:l,ghost:u,defaultExpanded:d,children:_}=A(i),p=g(""),m=g(le());return d.value&&(p.value=m.value),(C,v)=>{const y=ve,t=ye;return c(),h(t,{activeKey:p.value,"onUpdate:activeKey":v[1]||(v[1]=s=>p.value=s),bordered:a(l),ghost:a(u)},{default:b(()=>[(c(),h(y,{key:m.value,header:a(n),showArrow:a(e)},{default:b(()=>[f(N,{modelValue:a(_),"onUpdate:modelValue":v[0]||(v[0]=s=>oe(_)?_.value=s:null)},null,8,["modelValue"])]),_:1},8,["header","showArrow"]))]),_:1},8,["activeKey","bordered","ghost"])}}}),xt={input:Z,select:De,radio:Ce,switch:we,number:Pe,checkbox:he,grid:wt,card:Ct,date:ge,divider:Dt,collapse:St,textarea:_e},W=Ge("formDesign",()=>{const r=g([]),i=g({}),n=g({}),e=g(""),l=t=>{const{id:s,schema:o,name:P,description:I,status:M,belong:U}=t;e.value=s,d.value={name:P,description:I,status:M,belong:U},r.value=o.formCfgItemList,i.value=o.formConfig},u=(t,s)=>{const o=s.findIndex(P=>P.id===t);o!=-1&&(n.value=s[o])},d=g({name:"",description:"",status:1}),_=(t,s)=>{const o=s.findIndex(P=>P.id===t);o!=-1&&s.splice(o,1)},p=()=>{const t=B(n.value);m(t);const s=t;r.value.push(s)},m=t=>{t.id=le(),t.type=="grid"?t.controlProp.children.forEach(s=>{s.forEach(o=>{m(o)})}):t.type=="card"?t.controlProp.children.forEach(s=>{m(s)}):t.type=="collapse"&&t.controlProp.children.forEach(s=>{m(s)})},C=g(!1),v=()=>{const t=document.createElement("div");t.className="preview-form",t.style.width="720px",t.style.height="500px",t.style.overflowY="auto",t.style.padding="10px",Re(ae,{schema:{formCfgItemList:r.value,formConfig:i.value},formData:{}}).mount(t).$el,document.body.appendChild(t)};return{curControlCfg:n,formCfgItemList:r,onSelectControlItem:u,copyControlItem:p,removeControlItem:_,extraFormConfig:d,onSave:async()=>{C.value=!0;let t="";if(v(),document.querySelector(".preview-form")){const M=await Oe(document.querySelector(".preview-form"));M&&(t=M.toDataURL("image/png"),document.body.removeChild(document.querySelector(".preview-form")))}let s=O.add;const o={schema:{formCfgItemList:r.value,formConfig:i.value},...d.value,img:t};e.value&&(s=O.update,o.id=e.value);const{code:P,msg:I}=await s(o);P==200&&Se.success(I),C.value=!1},id:e,saveLoading:C,setFormDetail:l,formConfig:i}}),It=["onClick"],kt={class:"material-util"},$t=["onClick"],Mt=k({__name:"MaterialView",props:{modelValue:{required:!0},modelModifiers:{}},emits:["update:modelValue"],setup(r){Ke(y=>({"377eb23e":a(n).colorPrimary}));const i=Qe(),{themeCfg:n}=L(i),e=W(),{curControlCfg:l}=L(e),{onSelectControlItem:u,copyControlItem:d,removeControlItem:_}=e,p=Q(r,"modelValue"),m=y=>xt[y],C=(y,t)=>{const s=B(y);switch(t){case"radio":s.options=[{label:"1",value:"1"},{label:"2",value:"2"}];break;case"checkbox":s.options=[{label:"1",value:"1"},{label:"2",value:"2"}];break;case"select":s.options=[{label:"1",value:"1"},{label:"2",value:"2"}];break}return s},v=y=>{if(y.dataTransfer.getData("material")){const t=ht(y.dataTransfer.getData("material"));p.value.push(t)}};return(y,t)=>{const s=xe;return c(),h(a(Ye),{list:p.value,"onUpdate:list":t[1]||(t[1]=o=>p.value=o),class:"material-view",onDragover:t[2]||(t[2]=K(()=>{},["prevent","stop"])),onDrop:K(v,["stop"]),animation:"300",group:{name:"form",pull:!0,put:!0},"ghost-class":"ghost"},{default:b(()=>[(c(!0),x(V,null,T(p.value,o=>(c(),x("div",{key:o,onClick:K(P=>a(u)(o.id,p.value),["stop"]),class:Ee(["material-item",{active:o.id===a(l).id}])},[o.formItemProp?(c(),h(s,{key:0,label:o.formItemProp.label,name:o.formItemProp.name},{default:b(()=>[(c(),h(j(m(o.type)),F(C(o.controlProp,o.type),{key:o.id}),null,16))]),_:2},1032,["label","name"])):(c(),h(j(m(o.type)),F({key:1},C(o.controlProp,o.type),{children:o.controlProp.children,"onUpdate:children":P=>o.controlProp.children=P,key:o.id}),null,16,["children","onUpdate:children"])),D("div",kt,[D("div",{class:"icon-btn",onClick:t[0]||(t[0]=(...P)=>a(d)&&a(d)(...P)),title:"复制"},[f(a(We))]),D("div",{class:"icon-btn",onClick:P=>a(_)(o.id,p.value),title:"删除"},[f(a(Xe))],8,$t)])],10,It))),128))]),_:1},8,["list"])}}}),N=q(Mt,[["__scopeId","data-v-11ca5068"]]),Vt=[{type:"input",properties:{"formItemProp.label":{type:"string",label:"标签文本"},"formItemProp.name":{type:"string",label:"字段名"},"controlProp.allowClear":{type:"switch",label:"可清除"},"controlProp.bordered":{type:"switch",label:"边框"},"controlProp.disabled":{type:"switch",label:"禁用"},"controlProp.size":{type:"radio",label:"大小",component:{dataSource:[{label:"大",value:"large"},{label:"中",value:"middle"},{label:"小",value:"small"}]}},"controlProp.maxlength":{type:"number",label:"最大长度"}}},{type:"textarea",properties:{"formItemProp.label":{type:"string",label:"标签文本"},"formItemProp.name":{type:"string",label:"字段名"},"controlProp.allowClear":{type:"switch",label:"可清除"},"controlProp.autosize":{type:"switch",label:"自适应内容高度"},"controlProp.disabled":{type:"switch",label:"禁用"},"controlProp.size":{type:"radio",label:"大小",component:{dataSource:[{label:"大",value:"large"},{label:"中",value:"middle"},{label:"小",value:"small"}]}},"controlProp.maxlength":{type:"number",label:"最大长度"}}},{type:"select",properties:{"formItemProp.label":{type:"string",label:"标签文本"},"formItemProp.name":{type:"string",label:"字段名"},"controlProp.allowClear":{type:"switch",label:"可清除"},"controlProp.bordered":{type:"switch",label:"边框"},"controlProp.disabled":{type:"switch",label:"禁用"},"controlProp.size":{type:"radio",label:"大小",component:{dataSource:[{label:"大",value:"large"},{label:"中",value:"middle"},{label:"小",value:"small"}]}},"controlProp.virtual":{type:"switch",label:"虚拟滚动"},"controlProp.mode":{type:"select",label:"模式",component:{dataSource:[{label:"多选",value:"multiple"},{label:"标签",value:"tag"}],allowClear:!0}},"controlProp.dict":{type:"select",label:"字典",component:{asyncData:async()=>{const{code:r,data:i,msg:n}=await Y.getDictTypeList();return r==200?i.map(e=>({label:e.dictTypeDesc,value:e.dictType})):[]}}}}},{type:"switch",properties:{"formItemProp.label":{type:"string",label:"标签文本"},"formItemProp.name":{type:"string",label:"字段名"},"controlProp.disabled":{type:"switch",label:"禁用"},"controlProp.size":{type:"radio",label:"大小",component:{dataSource:[{label:"大",value:"large"},{label:"中",value:"middle"},{label:"小",value:"small"}]}}}},{type:"radio",properties:{"formItemProp.label":{type:"string",label:"标签文本"},"formItemProp.name":{type:"string",label:"字段名"},"controlProp.disabled":{type:"switch",label:"禁用"},"controlProp.size":{type:"radio",label:"大小",component:{dataSource:[{label:"大",value:"large"},{label:"中",value:"middle"},{label:"小",value:"small"}]}},"controlProp.buttonStyle":{type:"radio",label:"样式",component:{dataSource:[{label:"描边",value:"outline"},{label:"填色",value:"solid"}]}},"controlProp.optionType":{type:"radio",label:"类型",component:{dataSource:[{label:"默认",value:"default"},{label:"按钮",value:"button"}]}},"controlProp.dict":{type:"select",label:"字典",component:{asyncData:async()=>{const{code:r,data:i,msg:n}=await Y.getDictTypeList();return r==200?i.map(e=>({label:e.dictTypeDesc,value:e.dictType})):[]}}}}},{type:"checkbox",properties:{"formItemProp.label":{type:"string",label:"标签文本"},"formItemProp.name":{type:"string",label:"字段名"},"controlProp.disabled":{type:"switch",label:"禁用"},"controlProp.dict":{type:"select",label:"字典",component:{asyncData:async()=>{const{code:r,data:i,msg:n}=await Y.getDictTypeList();return r==200?i.map(e=>({label:e.dictTypeDesc,value:e.dictType})):[]}}}}},{type:"number",properties:{"formItemProp.label":{type:"string",label:"标签文本"},"formItemProp.name":{type:"string",label:"字段名"},"controlProp.bordered":{type:"switch",label:"边框"},"controlProp.disabled":{type:"switch",label:"禁用"},"controlProp.controls":{type:"switch",label:"控件"},"controlProp.size":{type:"radio",label:"大小",component:{dataSource:[{label:"大",value:"large"},{label:"中",value:"middle"},{label:"小",value:"small"}]}},"controlProp.max":{type:"number",label:"最大值"},"controlProp.min":{type:"number",label:"最小值"},"controlProp.precision":{type:"number",label:"精度"},"controlProp.step":{type:"number",label:"步长"}}},{type:"date",properties:{"formItemProp.label":{type:"string",label:"标签文本"},"formItemProp.name":{type:"string",label:"字段名"},"controlProp.bordered":{type:"switch",label:"边框"},"controlProp.disabled":{type:"switch",label:"禁用"},"controlProp.format":{type:"string",label:"显示格式化"},"controlProp.valueFormat":{type:"string",label:"值格式化"},"controlProp.size":{type:"radio",label:"大小",component:{dataSource:[{label:"大",value:"large"},{label:"中",value:"middle"},{label:"小",value:"small"}]}},"controlProp.mode":{type:"radio",label:"面板",component:{dataSource:[{label:"时间",value:"time"},{label:"日期",value:"date"},{label:"月",value:"month"},{label:"年",value:"year"}]}},"controlProp.picker":{type:"radio",label:"类型",component:{dataSource:[{label:"日期",value:"date"},{label:"周",value:"week"},{label:"月",value:"month"},{label:"年",value:"year"}]}}}},{type:"grid",properties:{"controlProp.gutter":{type:"number",label:"栅格间距"},"controlProp.colNumber":{type:"radio",label:"列配置",component:{dataSource:[{label:"一",value:1},{label:"二",value:2},{label:"三",value:3},{label:"四",value:4}]}}}},{type:"card",properties:{"controlProp.title":{type:"string",label:"标题"},"controlProp.bordered":{type:"switch",label:"边框"},"controlProp.hoverable":{type:"switch",label:"悬浮效果"}}},{type:"divider",properties:{"controlProp.title":{type:"string",label:"标题"},"controlProp.orientation":{type:"radio",label:"标题位置",component:{dataSource:[{label:"左",value:"left"},{label:"中",value:"center"},{label:"右",value:"right"}]}},"controlProp.dashed":{type:"switch",label:"虚线"},"controlProp.plain":{type:"switch",label:"普通正文"}}},{type:"collapse",properties:{"controlProp.title":{type:"string",label:"标题"},"controlProp.bordered":{type:"switch",label:"边框"},"controlProp.ghost":{type:"switch",label:"透明效果"},"controlProp.defaultExpanded":{type:"switch",label:"默认展开"},"controlProp.showArrow":{type:"switch",label:"显示箭头"}}}],zt={key:1},Tt=k({__name:"MaterialCfg",setup(r){const i=W(),{curControlCfg:n,formConfig:e}=L(i),l=g({layout:{layout:"horizontal",labelAlign:"right",labelCol:{span:8},wrapperCol:{span:16}},properties:{}}),u=g({layout:{layout:"horizontal",labelAlign:"right",labelCol:{span:8},wrapperCol:{span:16}},properties:{labelAlign:{label:"对齐方式",type:"radio",component:{dataSource:[{label:"左对齐",value:"left"},{label:"右对齐",value:"right"}]}},layout:{label:"布局方式",type:"radio",component:{dataSource:[{label:"响应式",value:"resLayout"},{label:"固定",value:"fixedLayout"}],onChange({field:_,formData:p,value:m}){m=="fixedLayout"?(Reflect.deleteProperty(p.labelCol,"span"),Reflect.deleteProperty(p.labelCol,"offset")):Reflect.deleteProperty(p.labelCol,"style")}}},"labelCol.span":{label:"标签宽度",type:"number",show:"'${formData.layout}' == 'resLayout'"},"labelCol.offset":{label:"偏移量",type:"number",show:"'${formData.layout}' == 'resLayout'"},"labelCol.style.width":{label:"宽度",type:"string",show:"'${formData.layout}' == 'fixedLayout'",tooltip:"单位为百分比或px,如: 100% 或 100px"}}}),d=g("item");return te(()=>n.value.type,()=>{if(n.value.type){let _=Vt.find(p=>p.type===n.value.type);_&&(l.value.properties=B(_.properties))}},{immediate:!0}),(_,p)=>{const m=ke,C=$e,v=Ie;return c(),h(v,{activeKey:d.value,"onUpdate:activeKey":p[0]||(p[0]=y=>d.value=y),size:"small"},{default:b(()=>[f(C,{key:"item",tab:"控件配置"},{default:b(()=>[a(n).id?(c(),h(a(H),{schema:l.value,formData:a(n),size:"small",key:a(n).id},null,8,["schema","formData"])):(c(),x("div",zt,[f(m)]))]),_:1}),f(C,{key:"form",tab:"表单配置"},{default:b(()=>[f(a(H),{schema:u.value,formData:a(e),size:"small"},null,8,["schema","formData"])]),_:1})]),_:1},8,["activeKey"])}}}),Ft={class:"form-design"},Lt={class:"form-design-container"},At={class:"middle-part"},qt=k({__name:"FormEditor",props:{id:{}},setup(r){window.name="form-design";const i=r,{id:n}=A(i),e=W(),{formCfgItemList:l,extraFormConfig:u,saveLoading:d,formConfig:_}=L(e),{onSave:p,setFormDetail:m}=e,C=g(!1),{shouldShowReminder:v}=je("low-code-form-design"),y=g(0),t=[{title:"物料区",description:"选择您需要的表单控件",target:()=>document.querySelector(".left-part"),placement:"right"},{title:"设计区",description:"将物料区的表单控件拖拽到此区域,可以按照你需要的方式进行布局。",target:()=>document.querySelector(".middle-part-content"),placement:"top"},{title:"配置区",description:"对设计区选中的控件进行配置",target:()=>document.querySelector(".right-part"),placement:"left"},{title:"查看实际效果",description:"对已经配置完成的表单进行预览",target:()=>document.querySelector(".preview-btn"),placement:"left"},{title:"最后",description:"保存您刚刚的配置",target:()=>document.querySelector(".save-btn"),placement:"left"}];n.value?O.getDetail(n.value).then(X=>{const{code:w,data:E,msg:R}=X;w==200&&m(E)}):(m({id:"",name:"未命名",description:"",schema:{formCfgItemList:[],formConfig:{labelCol:{span:void 0,offset:void 0},labelAlign:"left"}},img:"",status:1,belong:"private"}),C.value=!0);const s=ee(()=>n.value?u.value.description:""),o=()=>{window.open("/lowcode/form","quick-build")},P=()=>{p().then(()=>{o()})},I=g(!1),M=g({}),U=()=>{I.value=!0};return(X,w)=>{const E=Z,R=J,ne=Fe,se=Me,ie=Ve,pe=ze,ce=Te,de=Ne("loading");return c(),x(V,null,[D("div",Ft,[f(se,{subTitle:s.value,onBack:o,ghost:!1,style:{border:"1px solid rgb(235, 237, 240)",padding:"10px 24px"}},{title:b(()=>[f(E,{value:a(u).name,"onUpdate:value":w[0]||(w[0]=S=>a(u).name=S),bordered:!1,class:"form-name"},null,8,["value"])]),extra:b(()=>[f(ne,null,{default:b(()=>[f(R,{onClick:U,class:"preview-btn"},{default:b(()=>[z(" 预览 ")]),_:1}),f(R,{onClick:w[1]||(w[1]=S=>P()),type:"primary",class:"save-btn"},{default:b(()=>[z(" 保存 ")]),_:1})]),_:1})]),_:1},8,["subTitle"]),Be((c(),x("div",Lt,[f(rt,{class:"left-part"}),D("div",At,[f(ie,F(a(_),{class:"middle-part-content"}),{default:b(()=>[f(N,{modelValue:a(l),"onUpdate:modelValue":w[2]||(w[2]=S=>oe(l)?l.value=S:null)},null,8,["modelValue"])]),_:1},16)]),f(Tt,{class:"right-part"})])),[[de,a(d),void 0,{fullscreen:!0}]])]),f(pe,{open:I.value,"onUpdate:open":w[3]||(w[3]=S=>I.value=S),title:"预览",width:"1000px",height:"800px",footer:null},{default:b(()=>[I.value?(c(),h(ae,{key:0,formData:M.value,schema:{formCfgItemList:a(l),formConfig:a(_)}},null,8,["formData","schema"])):Ue("",!0)]),_:1},8,["open"]),f(ce,{current:y.value,"onUpdate:current":w[4]||(w[4]=S=>y.value=S),open:a(v),steps:t,onClose:w[5]||(w[5]=S=>v.value=!1)},null,8,["current","open"])],64)}}}),ko=q(qt,[["__scopeId","data-v-ed6bc6cb"]]);export{ko as default};
