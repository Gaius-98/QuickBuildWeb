import{c as S}from"./componentsSchema-gFhwa5FU.js";import{g as v,r as m,o as d,y as p,F as c,M as D,T as $,G as I,I as k,an as w,ao as x,x as M,h as q,l as r,w as i,v as B,R as C,L as h,E as T,O as E,b3 as N,a4 as O,b5 as P}from"./.pnpm-BfHkGPSW.js";import{_ as b}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{_ as L,D as R}from"./ConfigForm.vue_vue_type_script_setup_true_lang-CMQx4y5M.js";const V=a=>(w("data-v-ca4a27cc"),a=a(),x(),a),W={class:"material-area"},j={class:"material-layout-area"},A=V(()=>c("div",{class:"title"},"内置组件",-1)),F={class:"content"},z=["data-material"],G={class:"material-label"},J=v({__name:"MaterialArea",setup(a){const o=m({internalComp:S,customComp:[]}),s=n=>{var t;const l=n.target;(t=n.dataTransfer)==null||t.setData("material",l.dataset.material)};return(n,l)=>(d(),p("div",W,[c("div",j,[A,c("div",F,[(d(!0),p(D,null,$(o.value.internalComp,t=>(d(),p("div",{key:t.name,draggable:"true",onDragstart:s,"data-material":t.name,class:"material-item"},[c("span",{class:I(["iconfont material-icon",t.icon])},null,2),c("span",G,k(t.label),1)],40,z))),128))])])]))}}),H=b(J,[["__scopeId","data-v-ca4a27cc"]]),K={text:{type:"input",label:"文本内容"}},Q={src:{type:"input",label:"图片地址"}},U={src:{type:"input",label:"页面地址"}},X=a=>({dataset:{type:"select",label:"数据集",options:a},dimension:{type:"select",label:"维度",options:[],mode:"multiple"},target:{type:"select",label:"指标",options:[],mode:"multiple"}}),g={"qb-text":K,"qb-image":Q,"qb-iframe":U,"qb-chart":X},Y={class:"material-cfg"},Z={class:"material-cfg-btn"},aa=v({__name:"MaterialCfg",setup(a){const o=m({}),s=m({}),n=m({}),l=new R;window.addEventListener("message",e=>{e.data.type==="select"&&(s.value=e.data.data,typeof g[e.data.data.component]=="function"?n.value=g[e.data.data.component]([]):n.value=g[e.data.data.component],o.value=e.data.data.props)});let t=null;const _=e=>{if(t)t.postMessage({type:"refresh",data:e});else throw new Error("contentWindow is null")},u=()=>{s.value.props=l.processObject(o.value),localStorage.setItem(`dg-raw-config-${s.value.id}`,JSON.stringify(o.value)),s.value.props=l.processObject(o.value),_(B(s.value))};return M(()=>{t=document.querySelector(".standalone-iframe").contentWindow}),(e,y)=>{const f=C;return d(),p("div",Y,[(d(),q(L,{class:"material-cfg-contain",key:s.value.id,data:o.value,schema:n.value},null,8,["data","schema"])),c("div",Z,[r(f,{onClick:u},{default:i(()=>[h("刷新")]),_:1})])])}}}),ta=b(aa,[["__scopeId","data-v-9491c646"]]),ea=a=>(w("data-v-73565db5"),a=a(),x(),a),sa={class:"dg-design"},oa={class:"dg-design-container"},na=ea(()=>c("div",{class:"middle-part"},[c("iframe",{width:"100%",height:"100%",src:"/standalone/standalone.html",style:{border:"0"},class:"standalone-iframe"})],-1)),ca=v({__name:"DashboardDesign",props:{id:{}},setup(a){window.name="dg-design";const o=a,{id:s}=T(o),n=E(()=>s.value),l=()=>{};return(t,_)=>{const u=O,e=C,y=P,f=N;return d(),p("div",sa,[r(f,{subTitle:n.value,ghost:!1,style:{border:"1px solid rgb(235, 237, 240)",padding:"10px 24px"}},{title:i(()=>[r(u,{bordered:!1,class:"form-name"})]),extra:i(()=>[r(y,null,{default:i(()=>[r(e,{class:"preview-btn"},{default:i(()=>[h(" 预览 ")]),_:1}),r(e,{onClick:_[0]||(_[0]=ra=>l()),type:"primary",class:"save-btn"},{default:i(()=>[h(" 保存 ")]),_:1})]),_:1})]),_:1},8,["subTitle"]),c("div",oa,[r(H,{class:"left-part"}),na,r(ta,{class:"right-part"})])])}}}),_a=b(ca,[["__scopeId","data-v-73565db5"]]);export{_a as default};
