import{d as x,D as $,r as F,q as b,o as s,e as h,w as y,P as g,X as M,c as v,b2 as K,u as d,b1 as O,M as T,N as C,Q as E,a5 as w,A as S,U,v as I,bu as A,af as D,G as P,O as W,H as X,ab as G,ap as B,aq as V,W as H,aZ as L,aU as Q,aV as Z,aW as J,aX as Y,a3 as ee,a8 as q,a4 as ae,y as te}from"./.pnpm-CfU0UuIO.js";import{_ as j}from"./_plugin-vue_export-helper-DlAUqK2U.js";const ne={class:"config-array"},oe=x({__name:"ConfigArray",props:{title:{default:"标题"},closable:{type:Boolean,default:!0},schema:{default:()=>({})},data:{}},setup(n){const e=n,{title:_,closable:c,data:t}=$(e),a=F(0),f=()=>{a.value=t.value.length||0,t.value.push({})},o=l=>{let r=0;t.value.forEach((i,m)=>{i.key===l&&(r=m-1)}),t.value=t.value.filter(i=>i.key!==l),t.value.length&&a.value===l&&(r>=0?a.value=t.value[r].key:a.value=t.value[0].key)},u=(l,r)=>{r==="add"?f():o(l)};return(l,r)=>{const i=K,m=O;return s(),b("div",ne,[h(m,{activeKey:a.value,"onUpdate:activeKey":r[0]||(r[0]=p=>a.value=p),type:"editable-card",onEdit:u,class:"config-array-tab",size:"small"},{default:y(()=>[(s(!0),b(g,null,M(d(t),(p,k)=>(s(),v(i,{key:k+1,tab:`${d(_)}${k+1}`,closable:d(c)},{default:y(()=>[h(N,{schema:l.schema,data:d(t)[k],"onUpdate:data":R=>d(t)[k]=R},null,8,["schema","data","onUpdate:data"])]),_:2},1032,["tab","closable"]))),128))]),_:1},8,["activeKey"])])}}}),le=I("div",{class:"iconfont icon-brackets-curly"},null,-1),z=x({__name:"ConfigInput",props:T({compact:{type:Boolean,default:!0},size:{default:"default"}},{data:{required:!0,default:{_value:"",_mode:"static",_dynExp:""}},dataModifiers:{}}),emits:["update:data"],setup(n){const e=C(n,"data"),_=n,{size:c,compact:t}=$(_),a=E(()=>e.value._mode==="dynamic"),f=()=>{e.value._mode=e.value._mode==="dynamic"?"static":"dynamic"},o=u=>{e.value._mode==="dynamic"?e.value._dynExp=u.target.value:e.value._value=u.target.value};return(u,l)=>{const r=w,i=U,m=A;return s(),v(m,{size:d(c),compact:d(t)},{default:y(()=>[h(r,S({value:a.value?e.value._dynExp:e.value._value,onChange:o,style:{width:"calc(100% - 35px)"},prefix:a.value?"{":"",suffix:a.value?"}":""},u.$attrs),null,16,["value","prefix","suffix"]),h(i,{title:a.value?`绑定中:${e.value._dynExp}`:"变量绑定",type:a.value?"primary":"",onClick:l[0]||(l[0]=p=>f())},{icon:y(()=>[le]),_:1},8,["title","type"])]),_:1},8,["size","compact"])}}}),se=n=>(B("data-v-8fc419f7"),n=n(),V(),n),ue={class:"config-radio"},ce=se(()=>I("div",{class:"iconfont icon-brackets-curly"},null,-1)),de=x({__name:"ConfigRadio",props:T({options:{default:()=>[]},fields:{default:()=>({label:"label",value:"value",title:"title"})},icon:{type:Boolean,default:!1}},{data:{required:!0,default:{_value:"",_mode:"static",_dynExp:""}},dataModifiers:{}}),emits:["update:data"],setup(n){const e=C(n,"data"),_=n,{options:c,fields:t}=$(_),a=E(()=>e.value._mode==="dynamic"),f=()=>{e.value._mode=e.value._mode==="dynamic"?"static":"dynamic"};return(o,u)=>{const l=D,r=G,i=w,m=U;return s(),b("div",ue,[a.value?(s(),v(i,{key:1,value:e.value._dynExp,"onUpdate:value":u[1]||(u[1]=p=>e.value._dynExp=p),style:{width:"calc(100% - 35px)"},prefix:"{",suffix:"}"},null,8,["value"])):(s(),v(r,S({key:0},o.$attrs,{style:{width:"calc(100% - 35px)"},value:e.value._value,"onUpdate:value":u[0]||(u[0]=p=>e.value._value=p),"button-style":"solid"}),{default:y(()=>[(s(!0),b(g,null,M(d(c),p=>(s(),v(l,{key:p[d(t).value],title:p[d(t).title]||p[d(t).label],value:p[d(t).value]},{default:y(()=>[o.icon?(s(),b("div",{key:0,class:P(["iconfont",p.label])},null,2)):(s(),b(g,{key:1},[W(X(p[d(t).label]),1)],64))]),_:2},1032,["title","value"]))),128))]),_:1},16,["value"])),h(m,{title:a.value?`绑定中:${e.value._dynExp}`:"变量绑定",type:a.value?"primary":"",onClick:u[2]||(u[2]=p=>f())},{icon:y(()=>[ce]),_:1},8,["title","type"])])}}}),_e=j(de,[["__scopeId","data-v-8fc419f7"]]),ie=n=>(B("data-v-dcd1c0f1"),n=n(),V(),n),pe={class:"config-select"},re=ie(()=>I("div",{class:"iconfont icon-brackets-curly"},null,-1)),ve=x({__name:"ConfigSelect",props:{data:{required:!0,default:{_value:"",_mode:"static",_dynExp:""}},dataModifiers:{}},emits:["update:data"],setup(n){const e=C(n,"data"),_=E(()=>e.value._mode==="dynamic"),c=()=>{e.value._mode=e.value._mode==="dynamic"?"static":"dynamic"};return(t,a)=>{const f=H,o=w,u=U;return s(),b("div",pe,[_.value?(s(),v(o,{key:1,value:e.value._dynExp,"onUpdate:value":a[1]||(a[1]=l=>e.value._dynExp=l),style:{width:"calc(100% - 35px)"},prefix:"{",suffix:"}"},null,8,["value"])):(s(),v(f,S({key:0,style:{width:"calc(100% - 35px)"}},t.$attrs,{value:e.value._value,"onUpdate:value":a[0]||(a[0]=l=>e.value._value=l)}),null,16,["value"])),h(u,{title:_.value?`绑定中:${e.value._dynExp}`:"变量绑定",type:_.value?"primary":"",onClick:a[2]||(a[2]=l=>c())},{icon:y(()=>[re]),_:1},8,["title","type"])])}}}),me=j(ve,[["__scopeId","data-v-dcd1c0f1"]]),fe=n=>(B("data-v-4206e5c3"),n=n(),V(),n),ye={class:"config-switch"},be=fe(()=>I("div",{class:"iconfont icon-brackets-curly"},null,-1)),he=x({__name:"ConfigSwitch",props:{data:{required:!0,default:{__value:!1,_mode:"static",_dynExp:""}},dataModifiers:{}},emits:["update:data"],setup(n){const e=C(n,"data"),_=E(()=>e.value._mode==="dynamic"),c=()=>{e.value._mode=e.value._mode==="dynamic"?"static":"dynamic"};return(t,a)=>{const f=L,o=w,u=U;return s(),b("div",ye,[_.value?(s(),v(o,{key:1,value:e.value._dynExp,"onUpdate:value":a[1]||(a[1]=l=>e.value._dynExp=l),style:{width:"calc(100% - 35px)"},prefix:"{",suffix:"}"},null,8,["value"])):(s(),v(f,S({key:0},t.$attrs,{checked:e.value._value,"onUpdate:checked":a[0]||(a[0]=l=>e.value._value=l)}),null,16,["checked"])),h(u,{title:_.value?`绑定中:${e.value._dynExp}`:"变量绑定",type:_.value?"primary":"",onClick:a[2]||(a[2]=l=>c())},{icon:y(()=>[be]),_:1},8,["title","type"])])}}}),xe=j(he,[["__scopeId","data-v-4206e5c3"]]),ge={class:"config-array"},$e=x({__name:"ConfigObject",props:{title:{default:"标题"},field:{default:""},schema:{default:()=>({})},data:{}},setup(n){const e=n,{title:_,field:c,data:t}=$(e),a=Q()+c.value;return(f,o)=>{const u=Z,l=Y;return s(),b("div",ge,[h(l,null,{default:y(()=>[(s(),v(u,{key:a,header:d(_)},{default:y(()=>[h(N,{schema:f.schema,data:d(t),"onUpdate:data":o[0]||(o[0]=r=>J(t)?t.value=r:null)},null,8,["schema","data"])]),_:1},8,["header"]))]),_:1})])}}}),N=x({__name:"ConfigForm",props:{schema:{default:()=>({})},data:{default:()=>({})}},setup(n){const e=n,{schema:_,data:c}=$(e),t=()=>{Object.keys(_.value).forEach(o=>{c.value[o]?typeof c.value[o]!="object"&&(c.value[o]=a(_.value[o].type,c.value[o])):c.value[o]=a(_.value[o].type)})},a=(o,u)=>{switch(o){case"array":return[];case"object":return{};case"input":case"select":case"radio":return{_value:u||"",_mode:"static",_dynExp:""};case"switch":return{_value:typeof u=="boolean"?u:!1,_mode:"static",_dynExp:""};default:return{_value:u||"",_mode:"static",_dynExp:""}}};t();const f=o=>{switch(o){case"input":return z;case"radio":return _e;case"select":return me;case"switch":return xe;default:return z}};return(o,u)=>{const l=ae,r=ee;return s(),v(r,{model:d(c)},{default:y(()=>[(s(!0),b(g,null,M(d(_),(i,m)=>(s(),b(g,{key:m},[i.type!=="object"?(s(),v(l,{key:0,label:i.label,name:m},{default:y(()=>[i.type==="array"?(s(),v(oe,{key:0,schema:i.items,data:d(c)[m]},null,8,["schema","data"])):(s(),v(te(f(i.type)),{key:1,data:d(c)[m],"onUpdate:data":p=>d(c)[m]=p},null,40,["data","onUpdate:data"]))]),_:2},1032,["label","name"])):q("",!0),i.type==="object"?(s(),v($e,{key:1,schema:i.properties,data:d(c)[m],title:i.label},null,8,["schema","data","title"])):q("",!0)],64))),128))]),_:1},8,["model"])}}});export{N as _};
