import{g,I as $,r as R,o as s,y as b,l as h,w as y,O as x,W as M,h as v,i as d,b3 as F,b2 as O,L as q,M as E,Q as C,D as w,B as S,a6 as U,U as I,bu as D,J as L,N as W,K as Y,ac as A,ad as J,ap as B,aq as V,Y as P,aY as Q,aU as X,aV as G,aW as H,aX as Z,a8 as ee,E as ae,a5 as z,a7 as te}from"./.pnpm-CNbA6tN1.js";import{_ as j}from"./_plugin-vue_export-helper-DlAUqK2U.js";const ne={class:"config-array"},oe=g({__name:"ConfigArray",props:{title:{default:"标题"},closable:{type:Boolean,default:!0},schema:{default:()=>({})},data:{}},setup(n){const e=n,{title:_,closable:c,data:t}=$(e),a=R(0),f=()=>{a.value=t.value.length||0,t.value.push({})},o=l=>{let r=0;t.value.forEach((i,m)=>{i.key===l&&(r=m-1)}),t.value=t.value.filter(i=>i.key!==l),t.value.length&&a.value===l&&(r>=0?a.value=t.value[r].key:a.value=t.value[0].key)},u=(l,r)=>{r==="add"?f():o(l)};return(l,r)=>{const i=F,m=O;return s(),b("div",ne,[h(m,{activeKey:a.value,"onUpdate:activeKey":r[0]||(r[0]=p=>a.value=p),type:"editable-card",onEdit:u,class:"config-array-tab",size:"small"},{default:y(()=>[(s(!0),b(x,null,M(d(t),(p,k)=>(s(),v(i,{key:k+1,tab:`${d(_)}${k+1}`,closable:d(c)},{default:y(()=>[h(N,{schema:l.schema,data:d(t)[k],"onUpdate:data":K=>d(t)[k]=K},null,8,["schema","data","onUpdate:data"])]),_:2},1032,["tab","closable"]))),128))]),_:1},8,["activeKey"])])}}}),le=S("div",{class:"iconfont icon-brackets-curly"},null,-1),T=g({__name:"ConfigInput",props:q({compact:{type:Boolean,default:!0},size:{default:"default"}},{data:{required:!0,default:{_value:"",_mode:"static",_dynExp:""}},dataModifiers:{}}),emits:["update:data"],setup(n){const e=E(n,"data"),_=n,{size:c,compact:t}=$(_),a=C(()=>e.value._mode==="dynamic"),f=()=>{e.value._mode=e.value._mode==="dynamic"?"static":"dynamic"},o=u=>{e.value._mode==="dynamic"?e.value._dynExp=u.target.value:e.value._value=u.target.value};return(u,l)=>{const r=U,i=I,m=D;return s(),v(m,{size:d(c),compact:d(t)},{default:y(()=>[h(r,w({value:a.value?e.value._dynExp:e.value._value,onChange:o,style:{width:"calc(100% - 35px)"},prefix:a.value?"{":"",suffix:a.value?"}":""},u.$attrs),null,16,["value","prefix","suffix"]),h(i,{title:a.value?`绑定中:${e.value._dynExp}`:"变量绑定",type:a.value?"primary":"",onClick:l[0]||(l[0]=p=>f())},{icon:y(()=>[le]),_:1},8,["title","type"])]),_:1},8,["size","compact"])}}}),se=n=>(B("data-v-8fc419f7"),n=n(),V(),n),ue={class:"config-radio"},ce=se(()=>S("div",{class:"iconfont icon-brackets-curly"},null,-1)),de=g({__name:"ConfigRadio",props:q({options:{default:()=>[]},fields:{default:()=>({label:"label",value:"value",title:"title"})},icon:{type:Boolean,default:!1}},{data:{required:!0,default:{_value:"",_mode:"static",_dynExp:""}},dataModifiers:{}}),emits:["update:data"],setup(n){const e=E(n,"data"),_=n,{options:c,fields:t}=$(_),a=C(()=>e.value._mode==="dynamic"),f=()=>{e.value._mode=e.value._mode==="dynamic"?"static":"dynamic"};return(o,u)=>{const l=A,r=J,i=U,m=I;return s(),b("div",ue,[a.value?(s(),v(i,{key:1,value:e.value._dynExp,"onUpdate:value":u[1]||(u[1]=p=>e.value._dynExp=p),style:{width:"calc(100% - 35px)"},prefix:"{",suffix:"}"},null,8,["value"])):(s(),v(r,w({key:0},o.$attrs,{style:{width:"calc(100% - 35px)"},value:e.value._value,"onUpdate:value":u[0]||(u[0]=p=>e.value._value=p),"button-style":"solid"}),{default:y(()=>[(s(!0),b(x,null,M(d(c),p=>(s(),v(l,{key:p[d(t).value],title:p[d(t).title]||p[d(t).label],value:p[d(t).value]},{default:y(()=>[o.icon?(s(),b("div",{key:0,class:L(["iconfont",p.label])},null,2)):(s(),b(x,{key:1},[W(Y(p[d(t).label]),1)],64))]),_:2},1032,["title","value"]))),128))]),_:1},16,["value"])),h(m,{title:a.value?`绑定中:${e.value._dynExp}`:"变量绑定",type:a.value?"primary":"",onClick:u[2]||(u[2]=p=>f())},{icon:y(()=>[ce]),_:1},8,["title","type"])])}}}),_e=j(de,[["__scopeId","data-v-8fc419f7"]]),ie=n=>(B("data-v-dcd1c0f1"),n=n(),V(),n),pe={class:"config-select"},re=ie(()=>S("div",{class:"iconfont icon-brackets-curly"},null,-1)),ve=g({__name:"ConfigSelect",props:{data:{required:!0,default:{_value:"",_mode:"static",_dynExp:""}},dataModifiers:{}},emits:["update:data"],setup(n){const e=E(n,"data"),_=C(()=>e.value._mode==="dynamic"),c=()=>{e.value._mode=e.value._mode==="dynamic"?"static":"dynamic"};return(t,a)=>{const f=P,o=U,u=I;return s(),b("div",pe,[_.value?(s(),v(o,{key:1,value:e.value._dynExp,"onUpdate:value":a[1]||(a[1]=l=>e.value._dynExp=l),style:{width:"calc(100% - 35px)"},prefix:"{",suffix:"}"},null,8,["value"])):(s(),v(f,w({key:0,style:{width:"calc(100% - 35px)"}},t.$attrs,{value:e.value._value,"onUpdate:value":a[0]||(a[0]=l=>e.value._value=l)}),null,16,["value"])),h(u,{title:_.value?`绑定中:${e.value._dynExp}`:"变量绑定",type:_.value?"primary":"",onClick:a[2]||(a[2]=l=>c())},{icon:y(()=>[re]),_:1},8,["title","type"])])}}}),me=j(ve,[["__scopeId","data-v-dcd1c0f1"]]),fe=n=>(B("data-v-4206e5c3"),n=n(),V(),n),ye={class:"config-switch"},be=fe(()=>S("div",{class:"iconfont icon-brackets-curly"},null,-1)),he=g({__name:"ConfigSwitch",props:{data:{required:!0,default:{__value:!1,_mode:"static",_dynExp:""}},dataModifiers:{}},emits:["update:data"],setup(n){const e=E(n,"data"),_=C(()=>e.value._mode==="dynamic"),c=()=>{e.value._mode=e.value._mode==="dynamic"?"static":"dynamic"};return(t,a)=>{const f=Q,o=U,u=I;return s(),b("div",ye,[_.value?(s(),v(o,{key:1,value:e.value._dynExp,"onUpdate:value":a[1]||(a[1]=l=>e.value._dynExp=l),style:{width:"calc(100% - 35px)"},prefix:"{",suffix:"}"},null,8,["value"])):(s(),v(f,w({key:0},t.$attrs,{checked:e.value._value,"onUpdate:checked":a[0]||(a[0]=l=>e.value._value=l)}),null,16,["checked"])),h(u,{title:_.value?`绑定中:${e.value._dynExp}`:"变量绑定",type:_.value?"primary":"",onClick:a[2]||(a[2]=l=>c())},{icon:y(()=>[be]),_:1},8,["title","type"])])}}}),ge=j(he,[["__scopeId","data-v-4206e5c3"]]),xe={class:"config-array"},$e=g({__name:"ConfigObject",props:{title:{default:"标题"},field:{default:""},schema:{default:()=>({})},data:{}},setup(n){const e=n,{title:_,field:c,data:t}=$(e),a=X()+c.value;return(f,o)=>{const u=H,l=Z;return s(),b("div",xe,[h(l,null,{default:y(()=>[(s(),v(u,{key:a,header:d(_)},{default:y(()=>[h(N,{schema:f.schema,data:d(t),"onUpdate:data":o[0]||(o[0]=r=>G(t)?t.value=r:null)},null,8,["schema","data"])]),_:1},8,["header"]))]),_:1})])}}}),N=g({__name:"ConfigForm",props:{schema:{default:()=>({})},data:{default:()=>({})}},setup(n){const e=n,{schema:_,data:c}=$(e),t=()=>{Object.keys(_.value).forEach(o=>{c.value[o]?typeof c.value[o]!="object"&&(c.value[o]=a(_.value[o].type,c.value[o])):c.value[o]=a(_.value[o].type)})},a=(o,u)=>{switch(o){case"array":return[];case"object":return{};case"input":case"select":case"radio":return{_value:u||"",_mode:"static",_dynExp:""};case"switch":return{_value:typeof u=="boolean"?u:!1,_mode:"static",_dynExp:""};default:return{_value:u||"",_mode:"static",_dynExp:""}}};t();const f=o=>{switch(o){case"input":return T;case"radio":return _e;case"select":return me;case"switch":return ge;default:return T}};return(o,u)=>{const l=te,r=ee;return s(),v(r,{model:d(c)},{default:y(()=>[(s(!0),b(x,null,M(d(_),(i,m)=>(s(),b(x,{key:m},[i.type!=="object"?(s(),v(l,{key:0,label:i.label,name:m},{default:y(()=>[i.type==="array"?(s(),v(oe,{key:0,schema:i.items,data:d(c)[m]},null,8,["schema","data"])):(s(),v(ae(f(i.type)),{key:1,data:d(c)[m],"onUpdate:data":p=>d(c)[m]=p},null,40,["data","onUpdate:data"]))]),_:2},1032,["label","name"])):z("",!0),i.type==="object"?(s(),v($e,{key:1,schema:i.properties,data:d(c)[m],title:i.label},null,8,["schema","data","title"])):z("",!0)],64))),128))]),_:1},8,["model"])}}});export{N as _};
