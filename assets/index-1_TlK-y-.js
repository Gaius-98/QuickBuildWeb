import{a as S}from"./api-H_vVIBjD.js";import{d as O}from"./api-C2xWUKec.js";import{g as U,a0 as j,r as l,y as M,z as f,j as s,w as a,a1 as G,a3 as H,a4 as J,a5 as K,U as Q,O as c,A as W,a6 as k,i as p,a7 as X,a8 as v,L as Y,P as z,a9 as Z,aa as ee,e as te,aA as ae,ae as oe,o as d}from"./.pnpm-CkPzpllQ.js";import{_ as ne}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./main-CkqlHHOQ.js";import"./iconfont-RswF9Ywb.js";const se={class:"dataset"},de={class:"tools"},re={key:0},ce=U({__name:"index",setup(ie){const h=ae(),n=j({keyword:"",pageNumber:1,pageSize:20}),w=l([]),D=l([{title:"数据集名称",key:"datasetName",dataIndex:"datasetName"},{title:"关联数据源",key:"datasourceId",dataIndex:"datasourceId"},{title:"状态",key:"status",dataIndex:"status"},{title:"备注",key:"remark",dataIndex:"remark"},{title:"创建时间",key:"createTime",dataIndex:"createTime"},{title:"操作",key:"action",dataIndex:"action",width:"250px"}]),g=l(!1),x=l(),F=()=>{var e;(e=x.value)==null||e.resetFields(),u()},C=l(0),B=()=>{n.pageNumber=1,n.pageSize=20,u()},L=e=>{const{current:t,pageSize:o}=e;n.pageNumber=t,n.pageSize=o,u()},u=()=>{g.value=!0,S.getList(n).then(e=>{const{code:t,data:o}=e;t==200&&(w.value=o.data,C.value=o.total),g.value=!1})},b=l([]),A=e=>{var t;return(t=b.value.find(o=>o.id===e))==null?void 0:t.datasourceName},T=async e=>{const{code:t,msg:o,data:r}=await S.remove(e.id);t==200&&(te.success(r),u())},V=async e=>{const{id:t}=e,r=h.resolve({path:"/design/dataset",query:{type:"edit",id:t}});window.open(r.href,"_blank")};M(()=>{u(),O.getList("").then(e=>{const{code:t,data:o,msg:r}=e;t==200&&(b.value=o)})});const $=()=>{const e=h.resolve({path:"/design/dataset",query:{type:"add"}});window.open(e.href,"_blank")};return(e,t)=>{const o=K,r=J,_=Q,P=H,I=G,N=Z,R=ee,q=X,y=oe("has-perm");return d(),f("div",se,[s(I,{class:"search-area"},{default:a(()=>[s(P,{ref_key:"searchFormRef",ref:x,model:n,layout:"inline",onFinish:B},{default:a(()=>[s(r,{label:"数据集名称",name:"keyword"},{default:a(()=>[s(o,{value:n.keyword,"onUpdate:value":t[0]||(t[0]=i=>n.keyword=i)},null,8,["value"])]),_:1}),s(r,null,{default:a(()=>[s(_,{type:"primary","html-type":"submit"},{default:a(()=>[c("搜索")]),_:1}),s(_,{style:{margin:"0 8px"},onClick:F},{default:a(()=>[c(" 重置 ")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),s(I,null,{default:a(()=>[W("div",de,[k((d(),p(_,{type:"primary",onClick:t[1]||(t[1]=i=>$())},{default:a(()=>[c("新增")]),_:1})),[[y,"lowcode:dataset:add"]])]),s(q,{loading:g.value,columns:D.value,"data-source":w.value,scroll:{y:600},onChange:L,pagination:{current:n.pageNumber,total:C.value,showSizeChanger:!0,pageSize:n.pageSize}},{bodyCell:a(({column:i,record:m})=>[i.key=="datasourceId"?(d(),f("div",re,Y(A(m.datasourceId)),1)):v("",!0),i.key=="status"?(d(),f(z,{key:1},[m.status=="1"?(d(),p(N,{key:0,color:"#87d068"},{default:a(()=>[c("启用")]),_:1})):(d(),p(N,{key:1,color:"#f50"},{default:a(()=>[c("停用")]),_:1}))],64)):v("",!0),i.key=="action"?(d(),f(z,{key:2},[k((d(),p(_,{type:"link",onClick:E=>V(m)},{default:a(()=>[c("编辑")]),_:2},1032,["onClick"])),[[y,"lowcode:dataset:update"]]),s(R,{title:"确定要删除吗?","ok-text":"确定","cancel-text":"取消",onConfirm:E=>T(m)},{default:a(()=>[k((d(),p(_,{type:"link",danger:""},{default:a(()=>[c("删除")]),_:1})),[[y,"lowcode:dataset:remove"]])]),_:2},1032,["onConfirm"])],64)):v("",!0)]),_:1},8,["loading","columns","data-source","pagination"])]),_:1})])}}}),ge=ne(ce,[["__scopeId","data-v-ce51cd70"]]);export{ge as default};
