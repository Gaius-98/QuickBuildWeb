import{a as y}from"./resource-CIl0W5j5.js";import{P as z,b as U,o as q,R as F}from"./nodemodule-@ant-design_icons-vue@7.0.1_vue@3.4.21-CO80cFpd.js";import{r as V,M as D,t as E,B as G,a as K}from"./nodemodule-ant-design-vue@4.1.2_vue@3.4.21-D4V-KPiA.js";import{d as Q,Q as T,R as j,b as A,K as r,c as a,aI as x,M as g,G as H,h as w,F as J,O as W,L as c,ar as X,aq as Y}from"./nodemodule-@vue_runtime-core@3.4.21-Cnn673wu.js";import{r as m,u}from"./nodemodule-@vue_reactivity@3.4.21-DbkE7Gi6.js";import{n as Z}from"./nodemodule-@vue_shared@3.4.21-Ctf17_ps.js";/* empty css                                                                    */import{_ as ee}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./iconfont-D1HCqb49.js";import"./nodemodule-axios@1.6.8-BZ84_VUH.js";import"./nodemodule-js-cookie@3.0.5-Cz0CWeBA.js";import"./nodemodule-vue-router@4.3.0_vue@3.4.21-BC_007Jj.js";import"./nodemodule-@ant-design_icons-svg@4.4.2-C9VH68wD.js";import"./nodemodule-@ant-design_colors@6.0.0-CBJ--Aym.js";import"./nodemodule-@ctrl_tinycolor@3.6.1-DOFZgDuz.js";import"./nodemodule-@babel_runtime@7.27.1-Bq4_u9L9.js";import"./nodemodule-@vue_runtime-dom@3.4.21-CDjXREoQ.js";import"./nodemodule-lodash-es@4.17.21-DcfALcKD.js";import"./nodemodule-resize-observer-polyfill@1.5.1-B1PUzC5B.js";import"./nodemodule-dayjs@1.11.13-B6I98uus.js";import"./nodemodule-classnames@2.5.1-BK5ccKcQ.js";import"./nodemodule-throttle-debounce@5.0.2-CUWDS_la.js";import"./nodemodule-async-validator@4.2.5-9PlIezaS.js";import"./nodemodule-scroll-into-view-if-needed@2.2.31-CLVC0ehY.js";import"./nodemodule-compute-scroll-into-view@1.0.20-1gs_hJI2.js";import"./nodemodule-vue-types@3.0.2_vue@3.4.21-CF28atMM.js";import"./nodemodule-dom-align@1.12.4-CRCehRfe.js";import"./nodemodule-@emotion_hash@0.9.2-WldOFDRm.js";import"./nodemodule-@emotion_unitless@0.8.1-sScrWPmR.js";import"./nodemodule-stylis@4.3.6-D5iaQeiq.js";const te=l=>(X("data-v-678baa60"),l=l(),Y(),l),ae={class:"image-picker"},oe=te(()=>g("div",{class:"select-image-text"},"选择图片",-1)),se={key:1,class:"preview-image"},ne={class:"image-container"},ie={class:"image-list"},le=["src","onClick"],pe=Q({__name:"ImagePicker",props:{value:{type:String,required:!0},valueModifiers:{}},emits:T(["change"],["update:value"]),setup(l,{emit:N}){const v=j(l,"value"),_=m([]),s=m({pageSize:3,pageNumber:1,keyword:""}),C=m(0),M="/prod",d=m(""),L=e=>{d.value=e},O=()=>{s.value.pageNumber++,h()},h=()=>{y.getList(s.value).then(e=>{const{code:t,data:n,msg:i}=e;t==200&&(_.value=n.data,C.value=n.total)})},P=()=>{s.value.pageNumber--,h()},S=e=>{const t=new FormData;t.append("file",e.file,encodeURIComponent(e.file.name)),y.add(t).then(n=>{const{code:i,data:k,msg:b}=n;i==200&&(f(`${M}/${k.path}`),K.success(b),p.value=!1)})},p=m(!1),B=()=>{p.value=!0},R=N,f=e=>{v.value=e,R("change",e)},$=()=>{f(d.value),I()},I=()=>{d.value="",p.value=!1};return A(()=>{h()}),(e,t)=>{const n=V,i=G,k=E,b=D;return c(),r("div",ae,[v.value?(c(),r("div",se,[a(u(U),{onClick:t[0]||(t[0]=o=>f("")),style:{position:"absolute",top:"5px",right:"5px",color:"#999","z-index":"99"}}),a(n,{src:v.value,width:"100px",height:"100px"},null,8,["src"])])):(c(),r("div",{key:0,class:"select-image",onClick:B},[a(u(z)),oe])),a(b,{open:p.value,"onUpdate:open":t[1]||(t[1]=o=>p.value=o),title:"选择图片",onOk:$,onCancel:I},{default:x(()=>[a(k,{name:"file",accept:"image/*",customRequest:S,maxCount:"1",showUploadList:!1},{default:x(()=>[a(i,{type:"primary"},{default:x(()=>[H("自定义")]),_:1})]),_:1}),g("div",ne,[a(i,{type:"ghost",icon:w(u(q)),onClick:P,disabled:s.value.pageNumber==1},null,8,["icon","disabled"]),g("div",ie,[(c(!0),r(J,null,W(_.value,o=>(c(),r("div",{key:o.id,class:Z(["image-item",{selected:d.value==o.path}])},[g("img",{src:o.path,onClick:re=>L(o.path),height:"100px",width:"100px"},null,8,le)],2))),128))]),a(i,{type:"ghost",icon:w(u(F)),onClick:O,disabled:s.value.pageSize*(s.value.pageNumber-1)+_.value.length==C.value},null,8,["icon","disabled"])])]),_:1},8,["open"])])}}}),De=ee(pe,[["__scopeId","data-v-678baa60"]]);export{De as default};
