import{a as y,c as oe}from"./iconfont-BCn86eVw.js";/* empty css                                                                    */import{g as ne,M as le,F as se,h as ie,e as ue,I as re,B as pe,i as de,T as me,_ as _e,j as ce,u as ge,k as ve,o as ye,a as $}from"./nodemodule-ant-design-vue@4.1.2_vue@3.4.21-DQ6gDd-0.js";import{d as fe,b as R,q as ke,K as C,c as a,aI as t,G as p,M as be,y as I,a2 as c,N as f,F as z,z as Te,L as d}from"./nodemodule-@vue_runtime-core@3.4.21-Cnn673wu.js";import{a as he,r as m}from"./nodemodule-@vue_reactivity@3.4.21-DbkE7Gi6.js";import{O as xe}from"./nodemodule-@vue_shared@3.4.21-Ctf17_ps.js";import{_ as we}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./nodemodule-axios@1.6.8-BZ84_VUH.js";import"./nodemodule-js-cookie@3.0.5-Cz0CWeBA.js";import"./nodemodule-vue-router@4.3.0_vue@3.4.21-BC_007Jj.js";import"./nodemodule-@babel_runtime@7.26.9-Bq4_u9L9.js";import"./nodemodule-@vue_runtime-dom@3.4.21-CDjXREoQ.js";import"./nodemodule-@ant-design_icons-vue@7.0.1_vue@3.4.21-CO80cFpd.js";import"./nodemodule-@ant-design_icons-svg@4.4.2-C9VH68wD.js";import"./nodemodule-@ant-design_colors@6.0.0-CBJ--Aym.js";import"./nodemodule-@ctrl_tinycolor@3.6.1-DOFZgDuz.js";import"./nodemodule-lodash-es@4.17.21-DcfALcKD.js";import"./nodemodule-resize-observer-polyfill@1.5.1-B1PUzC5B.js";import"./nodemodule-dayjs@1.11.13-B6I98uus.js";import"./nodemodule-classnames@2.5.1-BK5ccKcQ.js";import"./nodemodule-throttle-debounce@5.0.2-CUWDS_la.js";import"./nodemodule-async-validator@4.2.5-9PlIezaS.js";import"./nodemodule-scroll-into-view-if-needed@2.2.31-CLVC0ehY.js";import"./nodemodule-compute-scroll-into-view@1.0.20-1gs_hJI2.js";import"./nodemodule-vue-types@3.0.2_vue@3.4.21-CF28atMM.js";import"./nodemodule-dom-align@1.12.4-CRCehRfe.js";import"./nodemodule-@emotion_hash@0.9.2-WldOFDRm.js";import"./nodemodule-@emotion_unitless@0.8.1-sScrWPmR.js";import"./nodemodule-stylis@4.3.6-D5iaQeiq.js";const x={getList:u=>y({method:"get",url:"setting/list",params:u}),getDetail:u=>y({method:"get",url:"setting/detail",params:{id:u}}),remove:u=>y({method:"get",url:"setting/remove",params:{id:u}}),add:u=>y({method:"post",url:"setting/add",data:u}),update:u=>y({method:"post",url:"setting/update",data:u}),getSettingByType:u=>y({method:"get",url:"setting/byType",params:{type:u}})},Ce={class:"setting"},Fe={class:"tools"},Se=fe({__name:"SettingView",setup(u){const r=he({keyword:"",pageNumber:1,pageSize:10,type:""}),D=m([]),j=m([{title:"配置键名",key:"settingKey",dataIndex:"settingKey",width:"150px"},{title:"配置值",key:"settingValue",dataIndex:"settingValue",width:"400px"},{title:"配置类型",key:"settingType",dataIndex:"settingType",width:"100px"},{title:"状态",key:"status",dataIndex:"status",width:"100px"},{title:"备注",key:"remark",dataIndex:"remark"},{title:"操作",key:"action",dataIndex:"action",width:"250px"}]),F=m(!1),N=m(),P=()=>{var o;(o=N.value)==null||o.resetFields(),g()},K=m(0),E=()=>{r.pageNumber=1,r.pageSize=10,g()},A=o=>{const{current:e,pageSize:s}=o;r.pageNumber=e,r.pageSize=s,g()},g=()=>{F.value=!0,x.getList(r).then(o=>{const{code:e,data:s}=o;e==200&&(D.value=s.data,K.value=s.total),F.value=!1})},w=m([]),U=m({});R(()=>{g(),oe.getDict(["configType"]).then(o=>{const{code:e,data:s,msg:i}=o;e==200&&(w.value=s.configType,U.value=w.value.reduce((T,_)=>(T[_.value]=_.label,T),{}))})});const k=m(!1),l=m({settingKey:"",settingValue:"",settingType:"",status:"1",remark:""}),b=m("add"),G=ke(()=>({add:"新增配置",edit:"编辑配置"})[b.value]),S=m(),H=()=>{b.value="add",k.value=!0,l.value={settingKey:"",settingValue:"",settingType:"",status:"1",remark:""}},J=async o=>{const{code:e,data:s}=await x.getDetail(o.id);e==200&&(l.value=s,b.value="edit",k.value=!0)},Q=async o=>{const{code:e,msg:s,data:i}=await x.remove(o.id);e==200&&($.success(i),g())},B=()=>{var o;(o=S.value)==null||o.resetFields()},W=()=>{var o;(o=S.value)==null||o.validate().then(()=>{let e;b.value=="add"?e=x.add:e=x.update,e(l.value).then(s=>{const{code:i}=s;i==200&&($.success(b.value=="add"?"新增成功":"编辑成功"),g()),B(),k.value=!1})})};return R(()=>{}),(o,e)=>{const s=ue,i=ie,T=re,_=pe,O=se,q=ne,h=me,X=_e,Y=ce,Z=de,L=ge,M=ye,ee=ve,te=le,V=Te("has-perm");return d(),C("div",Ce,[a(q,{class:"search-area"},{default:t(()=>[a(O,{ref_key:"searchFormRef",ref:N,model:r,layout:"inline",onFinish:E},{default:t(()=>[a(i,{label:"配置类型",prop:"type"},{default:t(()=>[a(s,{value:r.type,"onUpdate:value":e[0]||(e[0]=n=>r.type=n),options:w.value,"show-search":"",allowClear:"",optionFilterProp:"label",style:{width:"200px"}},null,8,["value","options"])]),_:1}),a(i,{label:"配置键名",prop:"keyword"},{default:t(()=>[a(T,{value:r.keyword,"onUpdate:value":e[1]||(e[1]=n=>r.keyword=n)},null,8,["value"])]),_:1}),a(i,null,{default:t(()=>[a(_,{type:"primary","html-type":"submit"},{default:t(()=>[p("搜索")]),_:1}),a(_,{style:{margin:"0 8px"},onClick:P},{default:t(()=>[p(" 重置 ")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),a(q,null,{default:t(()=>[be("div",Fe,[I((d(),c(_,{type:"primary",onClick:H},{default:t(()=>[p("新增")]),_:1})),[[V,"system:setting:add"]])]),a(Z,{loading:F.value,columns:j.value,"data-source":D.value,scroll:{y:560},onChange:A,pagination:{current:r.pageNumber,total:K.value,showSizeChanger:!0,pageSize:r.pageSize}},{bodyCell:t(({column:n,record:v})=>[n.key=="status"?(d(),C(z,{key:0},[v.status=="1"?(d(),c(h,{key:0,color:"#87d068"},{default:t(()=>[p("启用")]),_:1})):(d(),c(h,{key:1,color:"#f50"},{default:t(()=>[p("停用")]),_:1}))],64)):f("",!0),n.key=="settingType"?(d(),c(h,{key:1},{default:t(()=>[p(xe(U.value[v.settingType]||"未定义"),1)]),_:2},1024)):f("",!0),n.key=="action"?(d(),C(z,{key:2},[I((d(),c(_,{type:"link",onClick:ae=>J(v)},{default:t(()=>[p("编辑")]),_:2},1032,["onClick"])),[[V,"system:setting:update"]]),a(X,{type:"vertical"}),a(Y,{title:"确定要删除吗?","ok-text":"确定","cancel-text":"取消",onConfirm:ae=>Q(v)},{default:t(()=>[I((d(),c(_,{type:"link",danger:""},{default:t(()=>[p("删除")]),_:1})),[[V,"system:setting:remove"]])]),_:2},1032,["onConfirm"])],64)):f("",!0),n.key=="settingType"?(d(),C(z,{key:3},[v.settingType=="app"?(d(),c(h,{key:0,color:"#2db7f5"},{default:t(()=>[p("菜单")]),_:1})):f("",!0),v.settingType=="directory"?(d(),c(h,{key:1,color:"#87d068"},{default:t(()=>[p("目录")]),_:1})):f("",!0)],64)):f("",!0)]),_:1},8,["loading","columns","data-source","pagination"])]),_:1}),a(te,{open:k.value,"onUpdate:open":e[7]||(e[7]=n=>k.value=n),onOk:W,title:G.value,onCancel:B},{default:t(()=>[a(O,{model:l.value,"label-col":{span:8},ref_key:"modalFormRef",ref:S},{default:t(()=>[a(i,{label:"配置键名",required:"",prop:"settingKey"},{default:t(()=>[a(T,{value:l.value.settingKey,"onUpdate:value":e[2]||(e[2]=n=>l.value.settingKey=n)},null,8,["value"])]),_:1}),a(i,{label:"配置值",required:"",prop:"settingValue"},{default:t(()=>[a(L,{"auto-size":"",value:l.value.settingValue,"onUpdate:value":e[3]||(e[3]=n=>l.value.settingValue=n)},null,8,["value"])]),_:1}),a(i,{label:"配置类型",required:"",prop:"settingType"},{default:t(()=>[a(s,{value:l.value.settingType,"onUpdate:value":e[4]||(e[4]=n=>l.value.settingType=n),options:w.value},null,8,["value","options"])]),_:1}),a(i,{label:"状态",required:"",prop:"status"},{default:t(()=>[a(ee,{value:l.value.status,"onUpdate:value":e[5]||(e[5]=n=>l.value.status=n),"button-style":"solid"},{default:t(()=>[a(M,{value:"1"},{default:t(()=>[p("启用 ")]),_:1}),a(M,{value:"0"},{default:t(()=>[p("停用 ")]),_:1})]),_:1},8,["value"])]),_:1}),a(i,{label:"备注",prop:"remark"},{default:t(()=>[a(L,{value:l.value.remark,"onUpdate:value":e[6]||(e[6]=n=>l.value.remark=n),rows:5},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["open","title"])])}}}),ot=we(Se,[["__scopeId","data-v-466a4e09"]]);export{ot as default};
