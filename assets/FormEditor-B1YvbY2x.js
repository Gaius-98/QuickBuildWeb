import{B as oe}from"./EyeOutlined-MSEk9XoR.js";import{f,bW as le,d as k,r as g,q as x,v as D,J as z,K as F,bd as ye,ba as _e,o as p,e as h,w as b,$ as V,M as H,Q as ge,G as A,R as K,F as ae,P as re,u as s,A as T,aV as ne,n as he,a as Pe,g as we,s as L,D as R,E as Ce,B as De,y as X,ck as Se,H as xe,bj as Ie,I as ke}from"./iconfont-DlnTACa0.js";import{_ as O}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as $e,u as Me,_ as ze}from"./vue-draggable-next.esm-bundler-DIHpnJbp.js";import{c as B}from"./cloneDeep-eMWwQ7HD.js";import{_ as Ve,a as Fe}from"./index-BAbflK5K.js";import{C as Te}from"./index-DWh7MMD2.js";import{_ as Le}from"./index-5aalWurl.js";import{v as se}from"./v4-CtRu48qb.js";import{_ as Ae,C as Oe}from"./index-DB-FIVCb.js";import{D as Be}from"./dayjs-78fL9Suk.js";import{_ as Ee,S as qe}from"./RadioButton-CjVxn_Oc.js";import{b as Ne,I as ie}from"./index-DstlK8U5.js";import{C as Ue}from"./index-BZJkr9T5.js";import{I as Re}from"./index-8jXZgUEG.js";import{_ as je}from"./index-ib-wLQfr.js";import{a as Y,_ as ce}from"./LowCodeForm.vue_vue_type_script_setup_true_lang-CdmvSCu0.js";import{h as He}from"./html2canvas.esm-Cc_bx5YD.js";import{u as Ye}from"./system-DnqZ--Gp.js";import{_ as Ke,F as Ge}from"./index-3zxQoAaC.js";import{S as Z}from"./SchemaForm-D-gPt8Z_.js";import{d as j}from"./dict-DBesG_t6.js";import{T as Je,_ as Qe}from"./index-DFAyz8EE.js";import{_ as We,S as Xe}from"./index-BbmK55ey.js";import{M as Ze}from"./index-rRoPRs5X.js";import"./_getPrototype-CreJcRG-.js";import"./useFlexGapSupport-CiVQ43IU.js";import"./initDefaultProps-CCuNUPvT.js";import"./CheckOutlined-DhghRCOv.js";import"./index-BIgmw11B.js";import"./Col-7N7sU2gK.js";import"./RightOutlined-DiQ8sQL1.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./index-CcL4KyIF.js";import"./shallowequal-CYaRVoeZ.js";import"./index-Cj_T3PZy.js";import"./pickAttrs-C_Pg0-pd.js";import"./index-C6qv0Jk3.js";import"./tools-BCD5ohFr.js";import"./user-BAAPXhVS.js";import"./utils-B6a3RfBT.js";/* empty css                   */import"./index-DAYOQQPc.js";import"./index-CkgH7Yyy.js";import"./PlusOutlined-boFLuxir.js";import"./dropdown-CS9IU7I3.js";import"./index-BKuSEOK0.js";import"./useBreakpoint-BBubvWxm.js";import"./index-BJM6GpkM.js";import"./ActionButton-GOh5bmF9.js";import"./index-Df99mV5f.js";var et={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM382 896h-.2L232 746.2v-.2h150v150z"}}]},name:"copy",theme:"filled"};function ee(l){for(var o=1;o<arguments.length;o++){var t=arguments[o]!=null?Object(arguments[o]):{},e=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(e=e.concat(Object.getOwnPropertySymbols(t).filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable}))),e.forEach(function(a){tt(l,a,t[a])})}return l}function tt(l,o,t){return o in l?Object.defineProperty(l,o,{value:t,enumerable:!0,configurable:!0,writable:!0}):l[o]=t,l}var G=function(o,t){var e=ee({},o,t.attrs);return f(le,ee({},e,{icon:et}),null)};G.displayName="CopyFilled";G.inheritAttrs=!1;var ot={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 256H736v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zm-200 0H360v-72h304v72z"}}]},name:"delete",theme:"filled"};function te(l){for(var o=1;o<arguments.length;o++){var t=arguments[o]!=null?Object(arguments[o]):{},e=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(e=e.concat(Object.getOwnPropertySymbols(t).filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable}))),e.forEach(function(a){lt(l,a,t[a])})}return l}function lt(l,o,t){return o in l?Object.defineProperty(l,o,{value:t,enumerable:!0,configurable:!0,writable:!0}):l[o]=t,l}var J=function(o,t){var e=te({},o,t.attrs);return f(le,te({},e,{icon:ot}),null)};J.displayName="DeleteFilled";J.inheritAttrs=!1;const pe=l=>(ye("data-v-537542b9"),l=l(),_e(),l),at={class:"material-area"},rt={class:"material-layout-area"},nt=pe(()=>D("div",{class:"title"},"布局组件",-1)),st={class:"content"},it={class:"material-data-area"},ct=pe(()=>D("div",{class:"title"},"基础组件",-1)),pt={class:"content"},dt=k({__name:"MaterialArea",setup(l){const o=g({layoutMaterials:[{label:"栅格",value:"grid"},{label:"卡片",value:"card"},{label:"分割线",value:"divider"},{label:"折叠框",value:"collapse"}],dataMaterials:[{label:"输入框",value:"input"},{label:"选择器",value:"select"},{label:"日期选择器",value:"date"},{label:"数字输入框",value:"number"},{label:"开关",value:"switch"},{label:"单选框",value:"radio"},{label:"多选框",value:"checkbox"},{label:"文本域",value:"textarea"}]}),t=e=>{var u;const a=e.target;(u=e.dataTransfer)==null||u.setData("material",a.dataset.material)};return(e,a)=>{const u=oe;return p(),x("div",at,[D("div",rt,[nt,D("div",st,[(p(!0),x(z,null,F(o.value.layoutMaterials,d=>(p(),h(u,{type:"dashed",key:d.value,draggable:"true",onDragstart:t,"data-material":d.value},{default:b(()=>[V(H(d.label),1)]),_:2},1032,["data-material"]))),128))])]),D("div",it,[ct,D("div",pt,[(p(!0),x(z,null,F(o.value.dataMaterials,d=>(p(),h(u,{type:"dashed",key:d.value,draggable:"true",onDragstart:t,"data-material":d.value},{default:b(()=>[V(H(d.label),1)]),_:2},1032,["data-material"]))),128))])])])}}}),ut=O(dt,[["__scopeId","data-v-537542b9"]]),$={formItemProp:{label:"",name:"",required:!1},show:void 0},mt={...$,controlProp:{allowClear:!0,bordered:!0,disabled:!1,maxlength:null,size:"middle"},type:"input",id:""},ft={...$,controlProp:{allowClear:!0,autosize:!1,disabled:!1,maxlength:null,size:"middle"},type:"textarea",id:""},bt={...$,controlProp:{allowClear:!0,bordered:!0,disabled:!1,mode:null,size:"middle",virtual:!0},type:"select",id:""},vt={...$,controlProp:{disabled:!1,size:"middle"},type:"switch",id:""},yt={...$,controlProp:{disabled:!1,size:"middle",buttonStyle:"solid",optionType:"button"},type:"radio",id:""},_t={...$,controlProp:{disabled:!1},type:"checkbox",id:""},gt={...$,controlProp:{allowClear:!1,bordered:!0,disabled:!1,format:"YYYY-MM-DD",mode:"",valueFormat:"YYYY-MM-DD",size:"middle",picker:""},type:"date",id:""},ht={...$,controlProp:{disabled:!1,size:"middle",bordered:!0,controls:!0,max:null,min:null,precision:null,step:1},type:"number",id:""},Pt={type:"grid",controlProp:{gutter:0,colNumber:2,children:[]},id:"",show:void 0},wt={type:"card",controlProp:{title:"",bordered:!0,hoverable:!1,children:[]},id:"",show:void 0},Ct={type:"divider",controlProp:{type:"horizontal",plain:!1,orientation:"left",dashed:!1,title:""},id:"",show:void 0},Dt={type:"collapse",controlProp:{bordered:!0,ghost:!1,header:"折叠面板",showArrow:!0,defaultExpanded:!0,children:[]},id:"",show:void 0},St=[mt,vt,bt,yt,_t,Pt,wt,gt,ht,Ct,Dt,ft],xt=()=>"field"+new Date().getTime().toString().slice(-4),It=(l,o)=>{const t=St.find(e=>e.type===l);if(t){const e=B(t);if(e.formItemProp){const a=xt();e.formItemProp.label=a,e.formItemProp.name=a}return e.id=new Date().getTime().toString(),{...e,...o}}else throw new Error(`ControlDefault中${l}不存在,加载配置失败。`)},kt=k({__name:"MaterialGrid",props:ge({gutter:{},colNumber:{}},{children:{required:!0},childrenModifiers:{}}),emits:["update:children"],setup(l){const o=l,{gutter:t,colNumber:e}=A(o),a=K(l,"children"),u=ae(()=>24/e.value);return re(()=>e.value,()=>{a.value?a.value.length>e.value?a.value=a.value.slice(0,e.value):a.value=a.value.concat(Array.from({length:e.value-a.value.length}).map(()=>[])):a.value=Array.from({length:e.value}).map(()=>[])},{immediate:!0}),(d,_)=>{const c=Ve,m=Fe;return p(),h(m,{gutter:s(t)},{default:b(()=>[(p(!0),x(z,null,F(a.value,(C,v)=>(p(),h(c,{class:"gutter-col",span:u.value,key:v},{default:b(()=>[(p(),h(E,{modelValue:a.value[v],"onUpdate:modelValue":y=>a.value[v]=y,key:v},null,8,["modelValue","onUpdate:modelValue"]))]),_:2},1032,["span"]))),128))]),_:1},8,["gutter"])}}}),$t=O(kt,[["__scopeId","data-v-bd13b1ec"]]),Mt=k({__name:"MaterialCard",props:{children:{required:!0},childrenModifiers:{}},emits:["update:children"],setup(l){const o=K(l,"children");return(t,e)=>{const a=Te;return p(),h(a,T(t.$attrs,{bodyStyle:{padding:0,"min-height":"40px"}}),{default:b(()=>[f(E,{modelValue:o.value,"onUpdate:modelValue":e[0]||(e[0]=u=>o.value=u)},null,8,["modelValue"])]),_:1},16)}}}),zt=k({__name:"MaterialDivider",props:{type:{},plain:{type:Boolean},orientation:{},dashed:{type:Boolean},title:{}},setup(l){const o=l,{title:t,dashed:e,orientation:a,plain:u,type:d}=A(o);return(_,c)=>{const m=Le;return p(),h(m,{dashed:s(e),orientation:s(a),plain:s(u),type:s(d)},{default:b(()=>[V(H(s(t)),1)]),_:1},8,["dashed","orientation","plain","type"])}}}),Vt=k({__name:"MaterialCollapse",props:{bordered:{type:Boolean},ghost:{type:Boolean},title:{},showArrow:{type:Boolean},defaultExpanded:{type:Boolean},children:{}},setup(l){const o=l,{title:t,showArrow:e,bordered:a,ghost:u,defaultExpanded:d,children:_}=A(o),c=g(""),m=g(se());return d.value&&(c.value=m.value),(C,v)=>{const y=Ae,r=Oe;return p(),h(r,{activeKey:c.value,"onUpdate:activeKey":v[1]||(v[1]=i=>c.value=i),bordered:s(a),ghost:s(u)},{default:b(()=>[(p(),h(y,{key:m.value,header:s(t),showArrow:s(e)},{default:b(()=>[f(E,{modelValue:s(_),"onUpdate:modelValue":v[0]||(v[0]=i=>ne(_)?_.value=i:null)},null,8,["modelValue"])]),_:1},8,["header","showArrow"]))]),_:1},8,["activeKey","bordered","ghost"])}}}),Ft={input:ie,select:qe,radio:Ee,switch:je,number:Re,checkbox:Ue,grid:$t,card:Mt,date:Be,divider:zt,collapse:Vt,textarea:Ne},Q=he("formDesign",()=>{const l=g([]),o=g({}),t=g({}),e=g(""),a=r=>{const{id:i,schema:n,name:P,description:I,status:M,belong:q}=r;e.value=i,d.value={name:P,description:I,status:M,belong:q},l.value=n.formCfgItemList,o.value=n.formConfig},u=(r,i)=>{const n=i.findIndex(P=>P.id===r);n!=-1&&(t.value=i[n])},d=g({name:"",description:"",status:1}),_=(r,i)=>{const n=i.findIndex(P=>P.id===r);n!=-1&&i.splice(n,1)},c=()=>{const r=B(t.value);m(r);const i=r;l.value.push(i)},m=r=>{r.id=se(),r.type=="grid"?r.controlProp.children.forEach(i=>{i.forEach(n=>{m(n)})}):r.type=="card"?r.controlProp.children.forEach(i=>{m(i)}):r.type=="collapse"&&r.controlProp.children.forEach(i=>{m(i)})},C=g(!1),v=()=>{const r=document.createElement("div");r.className="preview-form",r.style.width="720px",r.style.height="500px",r.style.overflowY="auto",r.style.padding="10px",we(ce,{schema:{formCfgItemList:l.value,formConfig:o.value},formData:{}}).mount(r).$el,document.body.appendChild(r)};return{curControlCfg:t,formCfgItemList:l,onSelectControlItem:u,copyControlItem:c,removeControlItem:_,extraFormConfig:d,onSave:async()=>{C.value=!0;let r="";if(v(),document.querySelector(".preview-form")){const M=await He(document.querySelector(".preview-form"));M&&(r=M.toDataURL("image/png"),document.body.removeChild(document.querySelector(".preview-form")))}let i=Y.add;const n={schema:{formCfgItemList:l.value,formConfig:o.value},...d.value,img:r};e.value&&(i=Y.update,n.id=e.value);const{code:P,msg:I}=await i(n);P==200&&Pe.success(I),C.value=!1},id:e,saveLoading:C,setFormDetail:a,formConfig:o}}),Tt=["onClick"],Lt={class:"material-util"},At=["onClick"],Ot=k({__name:"MaterialView",props:{modelValue:{required:!0},modelModifiers:{}},emits:["update:modelValue"],setup(l){Ce(y=>({"377eb23e":s(t).colorPrimary}));const o=Ye(),{themeCfg:t}=L(o),e=Q(),{curControlCfg:a}=L(e),{onSelectControlItem:u,copyControlItem:d,removeControlItem:_}=e,c=K(l,"modelValue"),m=y=>Ft[y],C=(y,r)=>{const i=B(y);switch(r){case"radio":i.options=[{label:"1",value:"1"},{label:"2",value:"2"}];break;case"checkbox":i.options=[{label:"1",value:"1"},{label:"2",value:"2"}];break;case"select":i.options=[{label:"1",value:"1"},{label:"2",value:"2"}];break}return i},v=y=>{if(y.dataTransfer.getData("material")){const r=It(y.dataTransfer.getData("material"));c.value.push(r)}};return(y,r)=>{const i=Ke;return p(),h(s($e),{list:c.value,"onUpdate:list":r[1]||(r[1]=n=>c.value=n),class:"material-view",onDragover:r[2]||(r[2]=R(()=>{},["prevent","stop"])),onDrop:R(v,["stop"]),animation:"300",group:{name:"form",pull:!0,put:!0},"ghost-class":"ghost"},{default:b(()=>[(p(!0),x(z,null,F(c.value,n=>(p(),x("div",{key:n,onClick:R(P=>s(u)(n.id,c.value),["stop"]),class:De(["material-item",{active:n.id===s(a).id}])},[n.formItemProp?(p(),h(i,{key:0,label:n.formItemProp.label,name:n.formItemProp.name},{default:b(()=>[(p(),h(X(m(n.type)),T(C(n.controlProp,n.type),{key:n.id}),null,16))]),_:2},1032,["label","name"])):(p(),h(X(m(n.type)),T({key:1},C(n.controlProp,n.type),{children:n.controlProp.children,"onUpdate:children":P=>n.controlProp.children=P,key:n.id}),null,16,["children","onUpdate:children"])),D("div",Lt,[D("div",{class:"icon-btn",onClick:r[0]||(r[0]=(...P)=>s(d)&&s(d)(...P)),title:"复制"},[f(s(G))]),D("div",{class:"icon-btn",onClick:P=>s(_)(n.id,c.value),title:"删除"},[f(s(J))],8,At)])],10,Tt))),128))]),_:1},8,["list"])}}}),E=O(Ot,[["__scopeId","data-v-11ca5068"]]),Bt=[{type:"input",properties:{"formItemProp.label":{type:"string",label:"标签文本"},"formItemProp.name":{type:"string",label:"字段名"},"controlProp.allowClear":{type:"switch",label:"可清除"},"controlProp.bordered":{type:"switch",label:"边框"},"controlProp.disabled":{type:"switch",label:"禁用"},"controlProp.size":{type:"radio",label:"大小",component:{dataSource:[{label:"大",value:"large"},{label:"中",value:"middle"},{label:"小",value:"small"}]}},"controlProp.maxlength":{type:"number",label:"最大长度"}}},{type:"textarea",properties:{"formItemProp.label":{type:"string",label:"标签文本"},"formItemProp.name":{type:"string",label:"字段名"},"controlProp.allowClear":{type:"switch",label:"可清除"},"controlProp.autosize":{type:"switch",label:"自适应内容高度"},"controlProp.disabled":{type:"switch",label:"禁用"},"controlProp.size":{type:"radio",label:"大小",component:{dataSource:[{label:"大",value:"large"},{label:"中",value:"middle"},{label:"小",value:"small"}]}},"controlProp.maxlength":{type:"number",label:"最大长度"}}},{type:"select",properties:{"formItemProp.label":{type:"string",label:"标签文本"},"formItemProp.name":{type:"string",label:"字段名"},"controlProp.allowClear":{type:"switch",label:"可清除"},"controlProp.bordered":{type:"switch",label:"边框"},"controlProp.disabled":{type:"switch",label:"禁用"},"controlProp.size":{type:"radio",label:"大小",component:{dataSource:[{label:"大",value:"large"},{label:"中",value:"middle"},{label:"小",value:"small"}]}},"controlProp.virtual":{type:"switch",label:"虚拟滚动"},"controlProp.mode":{type:"select",label:"模式",component:{dataSource:[{label:"多选",value:"multiple"},{label:"标签",value:"tag"}],allowClear:!0}},"controlProp.dict":{type:"select",label:"字典",component:{asyncData:async()=>{const{code:l,data:o,msg:t}=await j.getDictTypeList();return l==200?o.map(e=>({label:e.dictTypeDesc,value:e.dictType})):[]}}}}},{type:"switch",properties:{"formItemProp.label":{type:"string",label:"标签文本"},"formItemProp.name":{type:"string",label:"字段名"},"controlProp.disabled":{type:"switch",label:"禁用"},"controlProp.size":{type:"radio",label:"大小",component:{dataSource:[{label:"大",value:"large"},{label:"中",value:"middle"},{label:"小",value:"small"}]}}}},{type:"radio",properties:{"formItemProp.label":{type:"string",label:"标签文本"},"formItemProp.name":{type:"string",label:"字段名"},"controlProp.disabled":{type:"switch",label:"禁用"},"controlProp.size":{type:"radio",label:"大小",component:{dataSource:[{label:"大",value:"large"},{label:"中",value:"middle"},{label:"小",value:"small"}]}},"controlProp.buttonStyle":{type:"radio",label:"样式",component:{dataSource:[{label:"描边",value:"outline"},{label:"填色",value:"solid"}]}},"controlProp.optionType":{type:"radio",label:"类型",component:{dataSource:[{label:"默认",value:"default"},{label:"按钮",value:"button"}]}},"controlProp.dict":{type:"select",label:"字典",component:{asyncData:async()=>{const{code:l,data:o,msg:t}=await j.getDictTypeList();return l==200?o.map(e=>({label:e.dictTypeDesc,value:e.dictType})):[]}}}}},{type:"checkbox",properties:{"formItemProp.label":{type:"string",label:"标签文本"},"formItemProp.name":{type:"string",label:"字段名"},"controlProp.disabled":{type:"switch",label:"禁用"},"controlProp.dict":{type:"select",label:"字典",component:{asyncData:async()=>{const{code:l,data:o,msg:t}=await j.getDictTypeList();return l==200?o.map(e=>({label:e.dictTypeDesc,value:e.dictType})):[]}}}}},{type:"number",properties:{"formItemProp.label":{type:"string",label:"标签文本"},"formItemProp.name":{type:"string",label:"字段名"},"controlProp.bordered":{type:"switch",label:"边框"},"controlProp.disabled":{type:"switch",label:"禁用"},"controlProp.controls":{type:"switch",label:"控件"},"controlProp.size":{type:"radio",label:"大小",component:{dataSource:[{label:"大",value:"large"},{label:"中",value:"middle"},{label:"小",value:"small"}]}},"controlProp.max":{type:"number",label:"最大值"},"controlProp.min":{type:"number",label:"最小值"},"controlProp.precision":{type:"number",label:"精度"},"controlProp.step":{type:"number",label:"步长"}}},{type:"date",properties:{"formItemProp.label":{type:"string",label:"标签文本"},"formItemProp.name":{type:"string",label:"字段名"},"controlProp.bordered":{type:"switch",label:"边框"},"controlProp.disabled":{type:"switch",label:"禁用"},"controlProp.format":{type:"string",label:"显示格式化"},"controlProp.valueFormat":{type:"string",label:"值格式化"},"controlProp.size":{type:"radio",label:"大小",component:{dataSource:[{label:"大",value:"large"},{label:"中",value:"middle"},{label:"小",value:"small"}]}},"controlProp.mode":{type:"radio",label:"面板",component:{dataSource:[{label:"时间",value:"time"},{label:"日期",value:"date"},{label:"月",value:"month"},{label:"年",value:"year"}]}},"controlProp.picker":{type:"radio",label:"类型",component:{dataSource:[{label:"日期",value:"date"},{label:"周",value:"week"},{label:"月",value:"month"},{label:"年",value:"year"}]}}}},{type:"grid",properties:{"controlProp.gutter":{type:"number",label:"栅格间距"},"controlProp.colNumber":{type:"radio",label:"列配置",component:{dataSource:[{label:"一",value:1},{label:"二",value:2},{label:"三",value:3},{label:"四",value:4}]}}}},{type:"card",properties:{"controlProp.title":{type:"string",label:"标题"},"controlProp.bordered":{type:"switch",label:"边框"},"controlProp.hoverable":{type:"switch",label:"悬浮效果"}}},{type:"divider",properties:{"controlProp.title":{type:"string",label:"标题"},"controlProp.orientation":{type:"radio",label:"标题位置",component:{dataSource:[{label:"左",value:"left"},{label:"中",value:"center"},{label:"右",value:"right"}]}},"controlProp.dashed":{type:"switch",label:"虚线"},"controlProp.plain":{type:"switch",label:"普通正文"}}},{type:"collapse",properties:{"controlProp.title":{type:"string",label:"标题"},"controlProp.bordered":{type:"switch",label:"边框"},"controlProp.ghost":{type:"switch",label:"透明效果"},"controlProp.defaultExpanded":{type:"switch",label:"默认展开"},"controlProp.showArrow":{type:"switch",label:"显示箭头"}}}],Et={key:1},qt=k({__name:"MaterialCfg",setup(l){const o=Q(),{curControlCfg:t,formConfig:e}=L(o),a=g({layout:{layout:"horizontal",labelAlign:"right",labelCol:{span:8},wrapperCol:{span:16}},properties:{}}),u=g({layout:{layout:"horizontal",labelAlign:"right",labelCol:{span:8},wrapperCol:{span:16}},properties:{labelAlign:{label:"对齐方式",type:"radio",component:{dataSource:[{label:"左对齐",value:"left"},{label:"右对齐",value:"right"}]}},layout:{label:"布局方式",type:"radio",component:{dataSource:[{label:"响应式",value:"resLayout"},{label:"固定",value:"fixedLayout"}],onChange({field:_,formData:c,value:m}){m=="fixedLayout"?(Reflect.deleteProperty(c.labelCol,"span"),Reflect.deleteProperty(c.labelCol,"offset")):Reflect.deleteProperty(c.labelCol,"style")}}},"labelCol.span":{label:"标签宽度",type:"number",show:"'${formData.layout}' == 'resLayout'"},"labelCol.offset":{label:"偏移量",type:"number",show:"'${formData.layout}' == 'resLayout'"},"labelCol.style.width":{label:"宽度",type:"string",show:"'${formData.layout}' == 'fixedLayout'",tooltip:"单位为百分比或px,如: 100% 或 100px"}}}),d=g("item");return re(()=>t.value.type,()=>{if(t.value.type){let _=Bt.find(c=>c.type===t.value.type);_&&(a.value.properties=B(_.properties))}},{immediate:!0}),(_,c)=>{const m=Se,C=Qe,v=Je;return p(),h(v,{activeKey:d.value,"onUpdate:activeKey":c[0]||(c[0]=y=>d.value=y),size:"small"},{default:b(()=>[f(C,{key:"item",tab:"控件配置"},{default:b(()=>[s(t).id?(p(),h(s(Z),{schema:a.value,formData:s(t),size:"small",key:s(t).id},null,8,["schema","formData"])):(p(),x("div",Et,[f(m)]))]),_:1}),f(C,{key:"form",tab:"表单配置"},{default:b(()=>[f(s(Z),{schema:u.value,formData:s(e),size:"small"},null,8,["schema","formData"])]),_:1})]),_:1},8,["activeKey"])}}}),Nt={class:"form-design"},Ut={class:"form-design-container"},Rt={class:"middle-part"},jt=k({__name:"FormEditor",props:{id:{}},setup(l){window.name="form-design";const o=l,{id:t}=A(o),e=Q(),{formCfgItemList:a,extraFormConfig:u,saveLoading:d,formConfig:_}=L(e),{onSave:c,setFormDetail:m}=e,C=g(!1),{shouldShowReminder:v}=Me("low-code-form-design"),y=g(0),r=[{title:"物料区",description:"选择您需要的表单控件",target:()=>document.querySelector(".left-part"),placement:"right"},{title:"设计区",description:"将物料区的表单控件拖拽到此区域,可以按照你需要的方式进行布局。",target:()=>document.querySelector(".middle-part-content"),placement:"top"},{title:"配置区",description:"对设计区选中的控件进行配置",target:()=>document.querySelector(".right-part"),placement:"left"},{title:"查看实际效果",description:"对已经配置完成的表单进行预览",target:()=>document.querySelector(".preview-btn"),placement:"left"},{title:"最后",description:"保存您刚刚的配置",target:()=>document.querySelector(".save-btn"),placement:"left"}];t.value?Y.getDetail(t.value).then(W=>{const{code:w,data:N,msg:U}=W;w==200&&m(N)}):(m({id:"",name:"未命名",description:"",schema:{formCfgItemList:[],formConfig:{labelCol:{span:void 0,offset:void 0},labelAlign:"left"}},img:"",status:1,belong:"private"}),C.value=!0);const i=ae(()=>t.value?u.value.description:""),n=()=>{window.open("/lowcode/form","quick-build")},P=()=>{c().then(()=>{n()})},I=g(!1),M=g({}),q=()=>{I.value=!0};return(W,w)=>{const N=ie,U=oe,de=Xe,ue=We,me=Ge,fe=Ze,be=ze,ve=Ie("loading");return p(),x(z,null,[D("div",Nt,[f(ue,{subTitle:i.value,onBack:n,ghost:!1,style:{border:"1px solid rgb(235, 237, 240)",padding:"10px 24px"}},{title:b(()=>[f(N,{value:s(u).name,"onUpdate:value":w[0]||(w[0]=S=>s(u).name=S),bordered:!1,class:"form-name"},null,8,["value"])]),extra:b(()=>[f(de,null,{default:b(()=>[f(U,{onClick:q,class:"preview-btn"},{default:b(()=>[V(" 预览 ")]),_:1}),f(U,{onClick:w[1]||(w[1]=S=>P()),type:"primary",class:"save-btn"},{default:b(()=>[V(" 保存 ")]),_:1})]),_:1})]),_:1},8,["subTitle"]),xe((p(),x("div",Ut,[f(ut,{class:"left-part"}),D("div",Rt,[f(me,T(s(_),{class:"middle-part-content"}),{default:b(()=>[f(E,{modelValue:s(a),"onUpdate:modelValue":w[2]||(w[2]=S=>ne(a)?a.value=S:null)},null,8,["modelValue"])]),_:1},16)]),f(qt,{class:"right-part"})])),[[ve,s(d),void 0,{fullscreen:!0}]])]),f(fe,{open:I.value,"onUpdate:open":w[3]||(w[3]=S=>I.value=S),title:"预览",width:"1000px",height:"800px",footer:null},{default:b(()=>[I.value?(p(),h(ce,{key:0,formData:M.value,schema:{formCfgItemList:s(a),formConfig:s(_)}},null,8,["formData","schema"])):ke("",!0)]),_:1},8,["open"]),f(be,{current:y.value,"onUpdate:current":w[4]||(w[4]=S=>y.value=S),open:s(v),steps:r,onClose:w[5]||(w[5]=S=>v.value=!1)},null,8,["current","open"])],64)}}}),Ro=O(jt,[["__scopeId","data-v-ed6bc6cb"]]);export{Ro as default};
