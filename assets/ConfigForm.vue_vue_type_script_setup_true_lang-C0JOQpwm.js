import{g,J as k,r as K,z as b,o as s,j as h,w as y,P as x,X as M,i as v,b3 as R,k as d,b2 as O,M as q,N as C,Q as E,a5 as w,F as S,U,A as I,bu as A,af as D,K as L,O as P,L as W,ab as X,ap as B,aq as j,W as J,aZ as Q,aU as Z,aV as G,aW as H,aX as Y,a3 as ee,a8 as V,a4 as ae,D as te}from"./.pnpm-C-9D1c9J.js";import{_ as z}from"./_plugin-vue_export-helper-DlAUqK2U.js";const ne={class:"config-array"},oe=g({__name:"ConfigArray",props:{title:{default:"标题"},closable:{type:Boolean,default:!0},schema:{default:()=>({})},data:{}},setup(n){const e=n,{title:i,closable:c,data:t}=k(e),a=K(0),f=()=>{a.value=t.value.length||0,t.value.push({})},o=l=>{let r=0;t.value.forEach((_,m)=>{_.key===l&&(r=m-1)}),t.value=t.value.filter(_=>_.key!==l),t.value.length&&a.value===l&&(r>=0?a.value=t.value[r].key:a.value=t.value[0].key)},u=(l,r)=>{r==="add"?f():o(l)};return(l,r)=>{const _=R,m=O;return s(),b("div",ne,[h(m,{activeKey:a.value,"onUpdate:activeKey":r[0]||(r[0]=p=>a.value=p),type:"editable-card",onEdit:u,class:"config-array-tab",size:"small"},{default:y(()=>[(s(!0),b(x,null,M(d(t),(p,$)=>(s(),v(_,{key:$+1,tab:`${d(i)}${$+1}`,closable:d(c)},{default:y(()=>[h(N,{schema:l.schema,data:d(t)[$],"onUpdate:data":F=>d(t)[$]=F},null,8,["schema","data","onUpdate:data"])]),_:2},1032,["tab","closable"]))),128))]),_:1},8,["activeKey"])])}}}),le=I("div",{class:"iconfont icon-brackets-curly"},null,-1),T=g({__name:"ConfigInput",props:q({compact:{type:Boolean,default:!0},size:{default:"default"}},{data:{required:!0,default:{_value:"",_mode:"static",_dynExp:""}},dataModifiers:{}}),emits:["update:data"],setup(n){const e=C(n,"data"),i=n,{size:c,compact:t}=k(i),a=E(()=>e.value._mode==="dynamic"),f=()=>{e.value._mode=e.value._mode==="dynamic"?"static":"dynamic"},o=u=>{e.value._mode==="dynamic"?e.value._dynExp=u.target.value:e.value._value=u.target.value};return(u,l)=>{const r=w,_=U,m=A;return s(),v(m,{size:d(c),compact:d(t)},{default:y(()=>[h(r,S({value:a.value?e.value._dynExp:e.value._value,onChange:o,style:{width:"calc(100% - 35px)"},prefix:a.value?"{":"",suffix:a.value?"}":""},u.$attrs),null,16,["value","prefix","suffix"]),h(_,{title:a.value?`绑定中:${e.value._dynExp}`:"变量绑定",type:a.value?"primary":"",onClick:l[0]||(l[0]=p=>f())},{icon:y(()=>[le]),_:1},8,["title","type"])]),_:1},8,["size","compact"])}}}),se=n=>(B("data-v-8fc419f7"),n=n(),j(),n),ue={class:"config-radio"},ce=se(()=>I("div",{class:"iconfont icon-brackets-curly"},null,-1)),de=g({__name:"ConfigRadio",props:q({options:{default:()=>[]},fields:{default:()=>({label:"label",value:"value",title:"title"})},icon:{type:Boolean,default:!1}},{data:{required:!0,default:{_value:"",_mode:"static",_dynExp:""}},dataModifiers:{}}),emits:["update:data"],setup(n){const e=C(n,"data"),i=n,{options:c,fields:t}=k(i),a=E(()=>e.value._mode==="dynamic"),f=()=>{e.value._mode=e.value._mode==="dynamic"?"static":"dynamic"};return(o,u)=>{const l=D,r=X,_=w,m=U;return s(),b("div",ue,[a.value?(s(),v(_,{key:1,value:e.value._dynExp,"onUpdate:value":u[1]||(u[1]=p=>e.value._dynExp=p),style:{width:"calc(100% - 35px)"},prefix:"{",suffix:"}"},null,8,["value"])):(s(),v(r,S({key:0},o.$attrs,{style:{width:"calc(100% - 35px)"},value:e.value._value,"onUpdate:value":u[0]||(u[0]=p=>e.value._value=p),"button-style":"solid"}),{default:y(()=>[(s(!0),b(x,null,M(d(c),p=>(s(),v(l,{key:p[d(t).value],title:p[d(t).title]||p[d(t).label],value:p[d(t).value]},{default:y(()=>[o.icon?(s(),b("div",{key:0,class:L(["iconfont",p.label])},null,2)):(s(),b(x,{key:1},[P(W(p[d(t).label]),1)],64))]),_:2},1032,["title","value"]))),128))]),_:1},16,["value"])),h(m,{title:a.value?`绑定中:${e.value._dynExp}`:"变量绑定",type:a.value?"primary":"",onClick:u[2]||(u[2]=p=>f())},{icon:y(()=>[ce]),_:1},8,["title","type"])])}}}),ie=z(de,[["__scopeId","data-v-8fc419f7"]]),_e=n=>(B("data-v-dcd1c0f1"),n=n(),j(),n),pe={class:"config-select"},re=_e(()=>I("div",{class:"iconfont icon-brackets-curly"},null,-1)),ve=g({__name:"ConfigSelect",props:{data:{required:!0,default:{_value:"",_mode:"static",_dynExp:""}},dataModifiers:{}},emits:["update:data"],setup(n){const e=C(n,"data"),i=E(()=>e.value._mode==="dynamic"),c=()=>{e.value._mode=e.value._mode==="dynamic"?"static":"dynamic"};return(t,a)=>{const f=J,o=w,u=U;return s(),b("div",pe,[i.value?(s(),v(o,{key:1,value:e.value._dynExp,"onUpdate:value":a[1]||(a[1]=l=>e.value._dynExp=l),style:{width:"calc(100% - 35px)"},prefix:"{",suffix:"}"},null,8,["value"])):(s(),v(f,S({key:0,style:{width:"calc(100% - 35px)"}},t.$attrs,{value:e.value._value,"onUpdate:value":a[0]||(a[0]=l=>e.value._value=l)}),null,16,["value"])),h(u,{title:i.value?`绑定中:${e.value._dynExp}`:"变量绑定",type:i.value?"primary":"",onClick:a[2]||(a[2]=l=>c())},{icon:y(()=>[re]),_:1},8,["title","type"])])}}}),me=z(ve,[["__scopeId","data-v-dcd1c0f1"]]),fe=n=>(B("data-v-4206e5c3"),n=n(),j(),n),ye={class:"config-switch"},be=fe(()=>I("div",{class:"iconfont icon-brackets-curly"},null,-1)),he=g({__name:"ConfigSwitch",props:{data:{required:!0,default:{__value:!1,_mode:"static",_dynExp:""}},dataModifiers:{}},emits:["update:data"],setup(n){const e=C(n,"data"),i=E(()=>e.value._mode==="dynamic"),c=()=>{e.value._mode=e.value._mode==="dynamic"?"static":"dynamic"};return(t,a)=>{const f=Q,o=w,u=U;return s(),b("div",ye,[i.value?(s(),v(o,{key:1,value:e.value._dynExp,"onUpdate:value":a[1]||(a[1]=l=>e.value._dynExp=l),style:{width:"calc(100% - 35px)"},prefix:"{",suffix:"}"},null,8,["value"])):(s(),v(f,S({key:0},t.$attrs,{checked:e.value._value,"onUpdate:checked":a[0]||(a[0]=l=>e.value._value=l)}),null,16,["checked"])),h(u,{title:i.value?`绑定中:${e.value._dynExp}`:"变量绑定",type:i.value?"primary":"",onClick:a[2]||(a[2]=l=>c())},{icon:y(()=>[be]),_:1},8,["title","type"])])}}}),ge=z(he,[["__scopeId","data-v-4206e5c3"]]),xe={class:"config-array"},ke=g({__name:"ConfigObject",props:{title:{default:"标题"},field:{default:""},schema:{default:()=>({})},data:{}},setup(n){const e=n,{title:i,field:c,data:t}=k(e),a=Z()+c.value;return(f,o)=>{const u=G,l=Y;return s(),b("div",xe,[h(l,null,{default:y(()=>[(s(),v(u,{key:a,header:d(i)},{default:y(()=>[h(N,{schema:f.schema,data:d(t),"onUpdate:data":o[0]||(o[0]=r=>H(t)?t.value=r:null)},null,8,["schema","data"])]),_:1},8,["header"]))]),_:1})])}}}),N=g({__name:"ConfigForm",props:{schema:{default:()=>({})},data:{default:()=>({})}},setup(n){const e=n,{schema:i,data:c}=k(e),t=()=>{Object.keys(i.value).forEach(o=>{c.value[o]?typeof c.value[o]!="object"&&(c.value[o]=a(i.value[o].type,c.value[o])):c.value[o]=a(i.value[o].type)})},a=(o,u)=>{switch(o){case"array":return[];case"object":return{};case"input":case"select":case"radio":return{_value:u||"",_mode:"static",_dynExp:""};case"switch":return{_value:typeof u=="boolean"?u:!1,_mode:"static",_dynExp:""};default:return{_value:u||"",_mode:"static",_dynExp:""}}};t();const f=o=>{switch(o){case"input":return T;case"radio":return ie;case"select":return me;case"switch":return ge;default:return T}};return(o,u)=>{const l=ae,r=ee;return s(),v(r,{model:d(c)},{default:y(()=>[(s(!0),b(x,null,M(d(i),(_,m)=>(s(),b(x,{key:m},[_.type!=="object"?(s(),v(l,{key:0,label:_.label,name:m},{default:y(()=>[_.type==="array"?(s(),v(oe,{key:0,schema:_.items,data:d(c)[m]},null,8,["schema","data"])):(s(),v(te(f(_.type)),{key:1,data:d(c)[m],"onUpdate:data":p=>d(c)[m]=p},null,40,["data","onUpdate:data"]))]),_:2},1032,["label","name"])):V("",!0),_.type==="object"?(s(),v(ke,{key:1,schema:_.properties,data:d(c)[m],title:_.label},null,8,["schema","data","title"])):V("",!0)],64))),128))]),_:1},8,["model"])}}});export{N as _};
