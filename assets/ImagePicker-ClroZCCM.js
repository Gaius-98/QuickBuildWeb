import{_ as U,a as w}from"./resource-B1v-jguF.js";import{P as z}from"./PlusOutlined-boFLuxir.js";import{d as q,Q as V,R as F,r as p,p as D,q as r,f as a,u,bU as E,w as x,v as g,$ as J,h as y,J as K,K as Q,a as T,o as m,B as j,bd as A,ba as G}from"./iconfont-DlnTACa0.js";import{I as H}from"./DeleteOutlined-WDiOh2q4.js";import{M as W}from"./index-rRoPRs5X.js";import{B as X}from"./EyeOutlined-MSEk9XoR.js";import{L as Y}from"./LeftOutlined-DjA3wwZo.js";import{R as Z}from"./RightOutlined-DiQ8sQL1.js";/* empty css                                                                    */import{_ as ee}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./initDefaultProps-CCuNUPvT.js";import"./pickAttrs-C_Pg0-pd.js";import"./partition-DwP1LF9t.js";import"./_getPrototype-CreJcRG-.js";import"./index-3zxQoAaC.js";import"./cloneDeep-eMWwQ7HD.js";import"./Col-7N7sU2gK.js";import"./useFlexGapSupport-CiVQ43IU.js";import"./index-HwKt48ol.js";import"./CheckOutlined-DhghRCOv.js";import"./css-CjeDAR7Q.js";import"./index-Df99mV5f.js";import"./ActionButton-GOh5bmF9.js";const te=l=>(A("data-v-678baa60"),l=l(),G(),l),ae={class:"image-picker"},oe=te(()=>g("div",{class:"select-image-text"},"选择图片",-1)),se={key:1,class:"preview-image"},ne={class:"image-container"},ie={class:"image-list"},le=["src","onClick"],ce=q({__name:"ImagePicker",props:{value:{type:String,required:!0},valueModifiers:{}},emits:V(["change"],["update:value"]),setup(l,{emit:N}){const v=F(l,"value"),_=p([]),s=p({pageSize:3,pageNumber:1,keyword:""}),C=p(0),L="/prod",d=p(""),M=e=>{d.value=e},P=()=>{s.value.pageNumber++,f()},f=()=>{w.getList(s.value).then(e=>{const{code:t,data:n,msg:i}=e;t==200&&(_.value=n.data,C.value=n.total)})},B=()=>{s.value.pageNumber--,f()},O=e=>{const t=new FormData;t.append("file",e.file,encodeURIComponent(e.file.name)),w.add(t).then(n=>{const{code:i,data:k,msg:b}=n;i==200&&(h(`${L}/${k.path}`),T.success(b),c.value=!1)})},c=p(!1),S=()=>{c.value=!0},$=N,h=e=>{v.value=e,$("change",e)},R=()=>{h(d.value),I()},I=()=>{d.value="",c.value=!1};return D(()=>{f()}),(e,t)=>{const n=H,i=X,k=U,b=W;return m(),r("div",ae,[v.value?(m(),r("div",se,[a(u(E),{onClick:t[0]||(t[0]=o=>h("")),style:{position:"absolute",top:"5px",right:"5px",color:"#999","z-index":"99"}}),a(n,{src:v.value,width:"100px",height:"100px"},null,8,["src"])])):(m(),r("div",{key:0,class:"select-image",onClick:S},[a(u(z)),oe])),a(b,{open:c.value,"onUpdate:open":t[1]||(t[1]=o=>c.value=o),title:"选择图片",onOk:R,onCancel:I},{default:x(()=>[a(k,{name:"file",accept:"image/*",customRequest:O,maxCount:"1",showUploadList:!1},{default:x(()=>[a(i,{type:"primary"},{default:x(()=>[J("自定义")]),_:1})]),_:1}),g("div",ne,[a(i,{type:"ghost",icon:y(u(Y)),onClick:B,disabled:s.value.pageNumber==1},null,8,["icon","disabled"]),g("div",ie,[(m(!0),r(K,null,Q(_.value,o=>(m(),r("div",{key:o.id,class:j(["image-item",{selected:d.value==o.path}])},[g("img",{src:o.path,onClick:pe=>M(o.path),height:"100px",width:"100px"},null,8,le)],2))),128))]),a(i,{type:"ghost",icon:y(u(Z)),onClick:P,disabled:s.value.pageSize*(s.value.pageNumber-1)+_.value.length==C.value},null,8,["icon","disabled"])])]),_:1},8,["open"])])}}}),$e=ee(ce,[["__scopeId","data-v-678baa60"]]);export{$e as default};
