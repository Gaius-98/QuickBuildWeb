import{g as Dt}from"./nodemodule-classnames@2.5.1-BK5ccKcQ.js";var yt={exports:{}},wt;function At(){return wt||(wt=1,function(Rt,Ot){(function(Se,he){Rt.exports=Se()})(function(){var Se="object",he="function",Oe="undefined",K=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],ft=["setStart","setStartBefore","setStartAfter","setEnd","setEndBefore","setEndAfter","collapse","selectNode","selectNodeContents","compareBoundaryPoints","deleteContents","extractContents","cloneContents","insertNode","surroundContents","cloneRange","toString","detach"],Xe=["boundingHeight","boundingLeft","boundingTop","boundingWidth","htmlText","text"],Ze=["collapse","compareEndPoints","duplicate","moveToElementText","parentElement","select","setEndPoint","getBoundingClientRect"];function re(c,m){var p=typeof c[m];return p==he||!!(p==Se&&c[m])||p=="unknown"}function Je(c,m){return!!(typeof c[m]==Se&&c[m])}function lt(c,m){return typeof c[m]!=Oe}function Pe(c){return function(m,p){for(var y=p.length;y--;)if(!c(m,p[y]))return!1;return!0}}var ze=Pe(re),ut=Pe(Je),Ie=Pe(lt);function Te(c){return c&&ze(c,Ze)&&Ie(c,Xe)}function He(c){return Je(c,"body")?c.body:c.getElementsByTagName("body")[0]}var dt=[].forEach?function(c,m){c.forEach(m)}:function(c,m){for(var p=0,y=c.length;p<y;++p)m(c[p],p)},we={},Re=typeof window!=Oe&&typeof document!=Oe,Ne={isHostMethod:re,isHostObject:Je,isHostProperty:lt,areHostMethods:ze,areHostObjects:ut,areHostProperties:Ie,isTextRange:Te,getBody:He,forEach:dt},L={version:"1.3.2",initialized:!1,isBrowser:Re,supported:!0,util:Ne,features:{},modules:we,config:{alertOnFail:!1,alertOnWarn:!1,preferTextRange:!1,autoInitialize:typeof rangyAutoInitialize==Oe?!0:rangyAutoInitialize}};function Ve(c){typeof console!=Oe&&re(console,"log")}function ht(c,m){Re&&m?alert(c):Ve(c)}function xe(c){L.initialized=!0,L.supported=!1,ht("Rangy is not supported in this environment. Reason: "+c,L.config.alertOnFail)}L.fail=xe;function Ke(c){ht("Rangy warning: "+c,L.config.alertOnWarn)}L.warn=Ke;var Me;({}).hasOwnProperty?(Ne.extend=Me=function(c,m,p){var y,A;for(var I in m)I==="__proto__"||I==="constructor"||I==="prototype"||m.hasOwnProperty(I)&&(y=c[I],A=m[I],p&&y!==null&&typeof y=="object"&&A!==null&&typeof A=="object"&&Me(y,A,!0),c[I]=A);return m.hasOwnProperty("toString")&&(c.toString=m.toString),c},Ne.createOptions=function(c,m){var p={};return Me(p,m),c&&Me(p,c),p}):xe("hasOwnProperty not supported"),Re||xe("Rangy can only run in a browser"),function(){var c;if(Re){var m=document.createElement("div");m.appendChild(document.createElement("span"));var p=[].slice;try{p.call(m.childNodes,0)[0].nodeType==1&&(c=function(y){return p.call(y,0)})}catch{}}c||(c=function(y){for(var A=[],I=0,H=y.length;I<H;++I)A[I]=y[I];return A}),Ne.toArray=c}();var Ue;Re&&(re(document,"addEventListener")?Ue=function(c,m,p){c.addEventListener(m,p,!1)}:re(document,"attachEvent")?Ue=function(c,m,p){c.attachEvent("on"+m,p)}:xe("Document does not have required addEventListener or attachEvent method"),Ne.addListener=Ue);var Be=[];function qe(c){return c.message||c.description||String(c)}function je(){if(!(!Re||L.initialized)){var c,m=!1,p=!1;re(document,"createRange")&&(c=document.createRange(),ze(c,ft)&&Ie(c,K)&&(m=!0));var y=He(document);if(!y||y.nodeName.toLowerCase()!="body"){xe("No body element found");return}if(y&&re(y,"createTextRange")&&(c=y.createTextRange(),Te(c)&&(p=!0)),!m&&!p){xe("Neither Range nor TextRange are available");return}L.initialized=!0,L.features={implementsDomRange:m,implementsTextRange:p};var A,I;for(var H in we)(A=we[H])instanceof We&&A.init(A,L);for(var X=0,J=Be.length;X<J;++X)try{Be[X](L)}catch(ee){I="Rangy init listener threw an exception. Continuing. Detail: "+qe(ee),Ve(I)}}}function et(c,m,p){p&&(c+=" in module "+p.name),L.warn("DEPRECATED: "+c+" is deprecated. Please use "+m+" instead.")}function tt(c,m,p,y){c[m]=function(){return et(m,p,y),c[p].apply(c,Ne.toArray(arguments))}}Ne.deprecationNotice=et,Ne.createAliasForDeprecatedMethod=tt,L.init=je,L.addInitListener=function(c){L.initialized?c(L):Be.push(c)};var De=[];L.addShimListener=function(c){De.push(c)};function _e(c){c=c||window,je();for(var m=0,p=De.length;m<p;++m)De[m](c)}Re&&(L.shim=L.createMissingNativeApi=_e,tt(L,"createMissingNativeApi","shim"));function We(c,m,p){this.name=c,this.dependencies=m,this.initialized=!1,this.supported=!1,this.initializer=p}We.prototype={init:function(){for(var c=this.dependencies||[],m=0,p=c.length,y,A;m<p;++m){if(A=c[m],y=we[A],!y||!(y instanceof We))throw new Error("required module '"+A+"' not found");if(y.init(),!y.supported)throw new Error("required module '"+A+"' not supported")}this.initializer(this)},fail:function(c){throw this.initialized=!0,this.supported=!1,new Error(c)},warn:function(c){L.warn("Module "+this.name+": "+c)},deprecationNotice:function(c,m){L.warn("DEPRECATED: "+c+" in module "+this.name+" is deprecated. Please use "+m+" instead")},createError:function(c){return new Error("Error in Rangy "+this.name+" module: "+c)}};function nt(c,m,p){var y=new We(c,m,function(A){if(!A.initialized){A.initialized=!0;try{p(L,A),A.supported=!0}catch(H){var I="Module '"+c+"' failed to load: "+qe(H);Ve(I),H.stack&&Ve(H.stack)}}});return we[c]=y,y}L.createModule=function(c){var m,p;arguments.length==2?(m=arguments[1],p=[]):(m=arguments[2],p=arguments[1]);var y=nt(c,p,m);L.initialized&&L.supported&&y.init()},L.createCoreModule=function(c,m,p){nt(c,m,p)};function gt(){}L.RangePrototype=gt,L.rangePrototype=new gt;function pt(){}L.selectionPrototype=new pt,L.createCoreModule("DomUtil",[],function(c,m){var p="undefined",y=c.util,A=y.getBody;y.areHostMethods(document,["createDocumentFragment","createElement","createTextNode"])||m.fail("document missing a Node creation method"),y.isHostMethod(document,"getElementsByTagName")||m.fail("document missing getElementsByTagName method");var I=document.createElement("div");y.areHostMethods(I,["insertBefore","appendChild","cloneNode"])||m.fail("Incomplete Element implementation"),y.isHostProperty(I,"innerHTML")||m.fail("Element is missing innerHTML property");var H=document.createTextNode("test");y.areHostMethods(H,["splitText","deleteData","insertData","appendData","cloneNode"])||m.fail("Incomplete Text Node implementation");var X=function(f,N){for(var B=f.length;B--;)if(f[B]===N)return!0;return!1};function J(f){var N;return typeof f.namespaceURI==p||(N=f.namespaceURI)===null||N=="http://www.w3.org/1999/xhtml"}function ee(f){var N=f.parentNode;return N.nodeType==1?N:null}function Y(f){for(var N=0;f=f.previousSibling;)++N;return N}function ie(f){switch(f.nodeType){case 7:case 10:return 0;case 3:case 8:return f.length;default:return f.childNodes.length}}function ae(f,N){var B=[],_;for(_=f;_;_=_.parentNode)B.push(_);for(_=N;_;_=_.parentNode)if(X(B,_))return _;return null}function n(f,N,B){for(var _=B?N:N.parentNode;_;){if(_===f)return!0;_=_.parentNode}return!1}function r(f,N){return n(f,N,!0)}function i(f,N,B){for(var _,Z=B?f:f.parentNode;Z;){if(_=Z.parentNode,_===N)return Z;Z=_}return null}function l(f){var N=f.nodeType;return N==3||N==4||N==8}function a(f){if(!f)return!1;var N=f.nodeType;return N==3||N==8}function g(f,N){var B=N.nextSibling,_=N.parentNode;return B?_.insertBefore(f,B):_.appendChild(f),f}function d(f,N,B){var _=f.cloneNode(!1);if(_.deleteData(0,N),f.deleteData(N,f.length-N),g(_,f),B)for(var Z=0,$;$=B[Z++];)$.node==f&&$.offset>N?($.node=_,$.offset-=N):$.node==f.parentNode&&$.offset>Y(f)&&++$.offset;return _}function v(f){if(f.nodeType==9)return f;if(typeof f.ownerDocument!=p)return f.ownerDocument;if(typeof f.document!=p)return f.document;if(f.parentNode)return v(f.parentNode);throw m.createError("getDocument: no document found for node")}function b(f){var N=v(f);if(typeof N.defaultView!=p)return N.defaultView;if(typeof N.parentWindow!=p)return N.parentWindow;throw m.createError("Cannot get a window object for node")}function O(f){if(typeof f.contentDocument!=p)return f.contentDocument;if(typeof f.contentWindow!=p)return f.contentWindow.document;throw m.createError("getIframeDocument: No Document object found for iframe element")}function E(f){if(typeof f.contentWindow!=p)return f.contentWindow;if(typeof f.contentDocument!=p)return f.contentDocument.defaultView;throw m.createError("getIframeWindow: No Window object found for iframe element")}function U(f){return f&&y.isHostMethod(f,"setTimeout")&&y.isHostObject(f,"document")}function F(f,N,B){var _;if(f?y.isHostProperty(f,"nodeType")?_=f.nodeType==1&&f.tagName.toLowerCase()=="iframe"?O(f):v(f):U(f)&&(_=f.document):_=document,!_)throw N.createError(B+"(): Parameter must be a Window object or DOM node");return _}function z(f){for(var N;N=f.parentNode;)f=N;return f}function oe(f,N,B,_){var Z,$,Ee,me,ue;if(f==B)return N===_?0:N<_?-1:1;if(Z=i(B,f,!0))return N<=Y(Z)?-1:1;if(Z=i(f,B,!0))return Y(Z)<_?-1:1;if($=ae(f,B),!$)throw new Error("comparePoints error: nodes have no common ancestor");if(Ee=f===$?$:i(f,$,!0),me=B===$?$:i(B,$,!0),Ee===me)throw m.createError("comparePoints got to case 4 and childA and childB are the same!");for(ue=$.firstChild;ue;){if(ue===Ee)return-1;if(ue===me)return 1;ue=ue.nextSibling}}var S=!1;function x(f){var N;try{return N=f.parentNode,!1}catch{return!0}}(function(){var f=document.createElement("b");f.innerHTML="1";var N=f.firstChild;f.innerHTML="<br />",S=x(N),c.features.crashyTextNodes=S})();function q(f){if(!f)return"[No node]";if(S&&x(f))return"[Broken node]";if(l(f))return'"'+f.data+'"';if(f.nodeType==1){var N=f.id?' id="'+f.id+'"':"";return"<"+f.nodeName+N+">[index:"+Y(f)+",length:"+f.childNodes.length+"]["+(f.innerHTML||"[innerHTML not supported]").slice(0,25)+"]"}return f.nodeName}function Q(f){for(var N=v(f).createDocumentFragment(),B;B=f.firstChild;)N.appendChild(B);return N}var te;typeof window.getComputedStyle!=p?te=function(f,N){return b(f).getComputedStyle(f,null)[N]}:typeof document.documentElement.currentStyle!=p?te=function(f,N){return f.currentStyle?f.currentStyle[N]:""}:m.fail("No means of obtaining computed style properties found");function ve(f,N,B){var _=A(f),Z=f.createElement("div");Z.contentEditable=""+!!B,N&&(Z.innerHTML=N);var $=_.firstChild;return $?_.insertBefore(Z,$):_.appendChild(Z),Z}function le(f){return f.parentNode.removeChild(f)}function se(f){this.root=f,this._next=f}se.prototype={_current:null,hasNext:function(){return!!this._next},next:function(){var f=this._current=this._next,N,B;if(this._current)if(N=f.firstChild,N)this._next=N;else{for(B=null;f!==this.root&&!(B=f.nextSibling);)f=f.parentNode;this._next=B}return this._current},detach:function(){this._current=this._next=this.root=null}};function ce(f){return new se(f)}function fe(f,N){this.node=f,this.offset=N}fe.prototype={equals:function(f){return!!f&&this.node===f.node&&this.offset==f.offset},inspect:function(){return"[DomPosition("+q(this.node)+":"+this.offset+")]"},toString:function(){return this.inspect()}};function ge(f){this.code=this[f],this.codeName=f,this.message="DOMException: "+this.codeName}ge.prototype={INDEX_SIZE_ERR:1,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INVALID_STATE_ERR:11,INVALID_NODE_TYPE_ERR:24},ge.prototype.toString=function(){return this.message},c.dom={arrayContains:X,isHtmlNamespace:J,parentElement:ee,getNodeIndex:Y,getNodeLength:ie,getCommonAncestor:ae,isAncestorOf:n,isOrIsAncestorOf:r,getClosestAncestorIn:i,isCharacterDataNode:l,isTextOrCommentNode:a,insertAfter:g,splitDataNode:d,getDocument:v,getWindow:b,getIframeWindow:E,getIframeDocument:O,getBody:A,isWindow:U,getContentDocument:F,getRootContainer:z,comparePoints:oe,isBrokenNode:x,inspectNode:q,getComputedStyleProperty:te,createTestElement:ve,removeNode:le,fragmentFromNodeChildren:Q,createIterator:ce,DomPosition:fe},c.DOMException=ge}),L.createCoreModule("DomRange",["DomUtil"],function(c,m){var p=c.dom,y=c.util,A=p.DomPosition,I=c.DOMException,H=p.isCharacterDataNode,X=p.getNodeIndex,J=p.isOrIsAncestorOf,ee=p.getDocument,Y=p.comparePoints,ie=p.splitDataNode,ae=p.getClosestAncestorIn,n=p.getNodeLength,r=p.arrayContains,i=p.getRootContainer,l=c.features.crashyTextNodes,a=p.removeNode;function g(t,o){return t.nodeType!=3&&(J(t,o.startContainer)||J(t,o.endContainer))}function d(t){return t.document||ee(t.startContainer)}function v(t){return i(t.startContainer)}function b(t){return new A(t.parentNode,X(t))}function O(t){return new A(t.parentNode,X(t)+1)}function E(t,o,u){var C=t.nodeType==11?t.firstChild:t;return H(o)?u==o.length?p.insertAfter(t,o):o.parentNode.insertBefore(t,u==0?o:ie(o,u)):u>=o.childNodes.length?o.appendChild(t):o.insertBefore(t,o.childNodes[u]),C}function U(t,o,u){if(G(t),G(o),d(o)!=d(t))throw new I("WRONG_DOCUMENT_ERR");var C=Y(t.startContainer,t.startOffset,o.endContainer,o.endOffset),D=Y(t.endContainer,t.endOffset,o.startContainer,o.startOffset);return u?C<=0&&D>=0:C<0&&D>0}function F(t){for(var o,u,C=d(t.range).createDocumentFragment(),D;u=t.next();){if(o=t.isPartiallySelectedSubtree(),u=u.cloneNode(!o),o&&(D=t.getSubtreeIterator(),u.appendChild(F(D)),D.detach()),u.nodeType==10)throw new I("HIERARCHY_REQUEST_ERR");C.appendChild(u)}return C}function z(t,o,u){var C,D;u=u||{stop:!1};for(var V,R;V=t.next();)if(t.isPartiallySelectedSubtree()){if(o(V)===!1){u.stop=!0;return}else if(R=t.getSubtreeIterator(),z(R,o,u),R.detach(),u.stop)return}else for(C=p.createIterator(V);D=C.next();)if(o(D)===!1){u.stop=!0;return}}function oe(t){for(var o;t.next();)t.isPartiallySelectedSubtree()?(o=t.getSubtreeIterator(),oe(o),o.detach()):t.remove()}function S(t){for(var o,u=d(t.range).createDocumentFragment(),C;o=t.next();){if(t.isPartiallySelectedSubtree()?(o=o.cloneNode(!1),C=t.getSubtreeIterator(),o.appendChild(S(C)),C.detach()):t.remove(),o.nodeType==10)throw new I("HIERARCHY_REQUEST_ERR");u.appendChild(o)}return u}function x(t,o,u){var C=!!(o&&o.length),D,V=!!u;C&&(D=new RegExp("^("+o.join("|")+")$"));var R=[];return z(new Q(t,!1),function(w){if(!(C&&!D.test(w.nodeType))&&!(V&&!u(w))){var P=t.startContainer;if(!(w==P&&H(P)&&t.startOffset==P.length)){var k=t.endContainer;w==k&&H(k)&&t.endOffset==0||R.push(w)}}}),R}function q(t){var o=typeof t.getName>"u"?"Range":t.getName();return"["+o+"("+p.inspectNode(t.startContainer)+":"+t.startOffset+", "+p.inspectNode(t.endContainer)+":"+t.endOffset+")]"}function Q(t,o){if(this.range=t,this.clonePartiallySelectedTextNodes=o,!t.collapsed){this.sc=t.startContainer,this.so=t.startOffset,this.ec=t.endContainer,this.eo=t.endOffset;var u=t.commonAncestorContainer;this.sc===this.ec&&H(this.sc)?(this.isSingleCharacterDataNode=!0,this._first=this._last=this._next=this.sc):(this._first=this._next=this.sc===u&&!H(this.sc)?this.sc.childNodes[this.so]:ae(this.sc,u,!0),this._last=this.ec===u&&!H(this.ec)?this.ec.childNodes[this.eo-1]:ae(this.ec,u,!0))}}Q.prototype={_current:null,_next:null,_first:null,_last:null,isSingleCharacterDataNode:!1,reset:function(){this._current=null,this._next=this._first},hasNext:function(){return!!this._next},next:function(){var t=this._current=this._next;return t&&(this._next=t!==this._last?t.nextSibling:null,H(t)&&this.clonePartiallySelectedTextNodes&&(t===this.ec&&(t=t.cloneNode(!0)).deleteData(this.eo,t.length-this.eo),this._current===this.sc&&(t=t.cloneNode(!0)).deleteData(0,this.so))),t},remove:function(){var t=this._current,o,u;H(t)&&(t===this.sc||t===this.ec)?(o=t===this.sc?this.so:0,u=t===this.ec?this.eo:t.length,o!=u&&t.deleteData(o,u-o)):t.parentNode&&a(t)},isPartiallySelectedSubtree:function(){var t=this._current;return g(t,this.range)},getSubtreeIterator:function(){var t;if(this.isSingleCharacterDataNode)t=this.range.cloneRange(),t.collapse(!1);else{t=new ne(d(this.range));var o=this._current,u=o,C=0,D=o,V=n(o);J(o,this.sc)&&(u=this.sc,C=this.so),J(o,this.ec)&&(D=this.ec,V=this.eo),j(t,u,C,D,V)}return new Q(t,this.clonePartiallySelectedTextNodes)},detach:function(){this.range=this._current=this._next=this._first=this._last=this.sc=this.so=this.ec=this.eo=null}};var te=[1,3,4,5,7,8,10],ve=[2,9,11],le=[5,6,10,12],se=[1,3,4,5,7,8,10,11],ce=[1,3,4,5,7,8];function fe(t){return function(o,u){for(var C,D=u?o:o.parentNode;D;){if(C=D.nodeType,r(t,C))return D;D=D.parentNode}return null}}var ge=fe([9,11]),f=fe(le),N=fe([6,10,12]),B=fe([1]);function _(t,o){if(N(t,o))throw new I("INVALID_NODE_TYPE_ERR")}function Z(t,o){if(!r(o,t.nodeType))throw new I("INVALID_NODE_TYPE_ERR")}function $(t,o){if(o<0||o>(H(t)?t.length:t.childNodes.length))throw new I("INDEX_SIZE_ERR")}function Ee(t,o){if(ge(t,!0)!==ge(o,!0))throw new I("WRONG_DOCUMENT_ERR")}function me(t){if(f(t,!0))throw new I("NO_MODIFICATION_ALLOWED_ERR")}function ue(t,o){if(!t)throw new I(o)}function it(t,o){return o<=(H(t)?t.length:t.childNodes.length)}function Le(t){return!!t.startContainer&&!!t.endContainer&&!(l&&(p.isBrokenNode(t.startContainer)||p.isBrokenNode(t.endContainer)))&&i(t.startContainer)==i(t.endContainer)&&it(t.startContainer,t.startOffset)&&it(t.endContainer,t.endOffset)}function G(t){if(!Le(t))throw new Error("Range error: Range is not valid. This usually happens after DOM mutation. Range: ("+t.inspect()+")")}var at=document.createElement("style"),Ae=!1;try{at.innerHTML="<b>x</b>",Ae=at.firstChild.nodeType==3}catch{}c.features.htmlParsingConforms=Ae;var ot=Ae?function(t){var o=this.startContainer,u=ee(o);if(!o)throw new I("INVALID_STATE_ERR");var C=null;return o.nodeType==1?C=o:H(o)&&(C=p.parentElement(o)),C===null||C.nodeName=="HTML"&&p.isHtmlNamespace(ee(C).documentElement)&&p.isHtmlNamespace(C)?C=u.createElement("body"):C=C.cloneNode(!1),C.innerHTML=t,p.fragmentFromNodeChildren(C)}:function(t){var o=d(this),u=o.createElement("body");return u.innerHTML=t,p.fragmentFromNodeChildren(u)};function Ye(t,o){G(t);var u=t.startContainer,C=t.startOffset,D=t.endContainer,V=t.endOffset,R=u===D;H(D)&&V>0&&V<D.length&&ie(D,V,o),H(u)&&C>0&&C<u.length&&(u=ie(u,C,o),R?(V-=C,D=u):D==u.parentNode&&V>=X(u)&&V++,C=0),t.setStartAndEnd(u,C,D,V)}function W(t){G(t);var o=t.commonAncestorContainer.parentNode.cloneNode(!1);return o.appendChild(t.cloneContents()),o.innerHTML}var $e=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],Ge=0,Fe=1,mt=2,be=3,ke=0,st=1,ct=2,Qe=3;y.extend(c.rangePrototype,{compareBoundaryPoints:function(t,o){G(this),Ee(this.startContainer,o.startContainer);var u,C,D,V,R=t==be||t==Ge?"start":"end",w=t==Fe||t==Ge?"start":"end";return u=this[R+"Container"],C=this[R+"Offset"],D=o[w+"Container"],V=o[w+"Offset"],Y(u,C,D,V)},insertNode:function(t){if(G(this),Z(t,se),me(this.startContainer),J(t,this.startContainer))throw new I("HIERARCHY_REQUEST_ERR");var o=E(t,this.startContainer,this.startOffset);this.setStartBefore(o)},cloneContents:function(){G(this);var t,o;if(this.collapsed)return d(this).createDocumentFragment();if(this.startContainer===this.endContainer&&H(this.startContainer))return t=this.startContainer.cloneNode(!0),t.data=t.data.slice(this.startOffset,this.endOffset),o=d(this).createDocumentFragment(),o.appendChild(t),o;var u=new Q(this,!0);return t=F(u),u.detach(),t},canSurroundContents:function(){G(this),me(this.startContainer),me(this.endContainer);var t=new Q(this,!0),o=t._first&&g(t._first,this)||t._last&&g(t._last,this);return t.detach(),!o},surroundContents:function(t){if(Z(t,ce),!this.canSurroundContents())throw new I("INVALID_STATE_ERR");var o=this.extractContents();if(t.hasChildNodes())for(;t.lastChild;)t.removeChild(t.lastChild);E(t,this.startContainer,this.startOffset),t.appendChild(o),this.selectNode(t)},cloneRange:function(){G(this);for(var t=new ne(d(this)),o=$e.length,u;o--;)u=$e[o],t[u]=this[u];return t},toString:function(){G(this);var t=this.startContainer;if(t===this.endContainer&&H(t))return t.nodeType==3||t.nodeType==4?t.data.slice(this.startOffset,this.endOffset):"";var o=[],u=new Q(this,!0);return z(u,function(C){(C.nodeType==3||C.nodeType==4)&&o.push(C.data)}),u.detach(),o.join("")},compareNode:function(t){G(this);var o=t.parentNode,u=X(t);if(!o)throw new I("NOT_FOUND_ERR");var C=this.comparePoint(o,u),D=this.comparePoint(o,u+1);return C<0?D>0?ct:ke:D>0?st:Qe},comparePoint:function(t,o){return G(this),ue(t,"HIERARCHY_REQUEST_ERR"),Ee(t,this.startContainer),Y(t,o,this.startContainer,this.startOffset)<0?-1:Y(t,o,this.endContainer,this.endOffset)>0?1:0},createContextualFragment:ot,toHtml:function(){return W(this)},intersectsNode:function(t,o){if(G(this),i(t)!=v(this))return!1;var u=t.parentNode,C=X(t);if(!u)return!0;var D=Y(u,C,this.endContainer,this.endOffset),V=Y(u,C+1,this.startContainer,this.startOffset);return o?D<=0&&V>=0:D<0&&V>0},isPointInRange:function(t,o){return G(this),ue(t,"HIERARCHY_REQUEST_ERR"),Ee(t,this.startContainer),Y(t,o,this.startContainer,this.startOffset)>=0&&Y(t,o,this.endContainer,this.endOffset)<=0},intersectsRange:function(t){return U(this,t,!1)},intersectsOrTouchesRange:function(t){return U(this,t,!0)},intersection:function(t){if(this.intersectsRange(t)){var o=Y(this.startContainer,this.startOffset,t.startContainer,t.startOffset),u=Y(this.endContainer,this.endOffset,t.endContainer,t.endOffset),C=this.cloneRange();return o==-1&&C.setStart(t.startContainer,t.startOffset),u==1&&C.setEnd(t.endContainer,t.endOffset),C}return null},union:function(t){if(this.intersectsOrTouchesRange(t)){var o=this.cloneRange();return Y(t.startContainer,t.startOffset,this.startContainer,this.startOffset)==-1&&o.setStart(t.startContainer,t.startOffset),Y(t.endContainer,t.endOffset,this.endContainer,this.endOffset)==1&&o.setEnd(t.endContainer,t.endOffset),o}else throw new I("Ranges do not intersect")},containsNode:function(t,o){return o?this.intersectsNode(t,!1):this.compareNode(t)==Qe},containsNodeContents:function(t){return this.comparePoint(t,0)>=0&&this.comparePoint(t,n(t))<=0},containsRange:function(t){var o=this.intersection(t);return o!==null&&t.equals(o)},containsNodeText:function(t){var o=this.cloneRange();o.selectNode(t);var u=o.getNodes([3]);if(u.length>0){o.setStart(u[0],0);var C=u.pop();return o.setEnd(C,C.length),this.containsRange(o)}else return this.containsNodeContents(t)},getNodes:function(t,o){return G(this),x(this,t,o)},getDocument:function(){return d(this)},collapseBefore:function(t){this.setEndBefore(t),this.collapse(!1)},collapseAfter:function(t){this.setStartAfter(t),this.collapse(!0)},getBookmark:function(t){var o=d(this),u=c.createRange(o);t=t||p.getBody(o),u.selectNodeContents(t);var C=this.intersection(u),D=0,V=0;return C&&(u.setEnd(C.startContainer,C.startOffset),D=u.toString().length,V=D+C.toString().length),{start:D,end:V,containerNode:t}},moveToBookmark:function(t){var o=t.containerNode,u=0;this.setStart(o,0),this.collapse(!0);for(var C=[o],D,V=!1,R=!1,w,P,k;!R&&(D=C.pop());)if(D.nodeType==3)w=u+D.length,!V&&t.start>=u&&t.start<=w&&(this.setStart(D,t.start-u),V=!0),V&&t.end>=u&&t.end<=w&&(this.setEnd(D,t.end-u),R=!0),u=w;else for(k=D.childNodes,P=k.length;P--;)C.push(k[P])},getName:function(){return"DomRange"},equals:function(t){return ne.rangesEqual(this,t)},isValid:function(){return Le(this)},inspect:function(){return q(this)},detach:function(){}});function e(t){t.START_TO_START=Ge,t.START_TO_END=Fe,t.END_TO_END=mt,t.END_TO_START=be,t.NODE_BEFORE=ke,t.NODE_AFTER=st,t.NODE_BEFORE_AND_AFTER=ct,t.NODE_INSIDE=Qe}function s(t){e(t),e(t.prototype)}function h(t,o){return function(){G(this);var u=this.startContainer,C=this.startOffset,D=this.commonAncestorContainer,V=new Q(this,!0),R,w;u!==D&&(R=ae(u,D,!0),w=O(R),u=w.node,C=w.offset),z(V,me),V.reset();var P=t(V);return V.detach(),o(this,u,C,u,C),P}}function T(t,o){function u(R,w){return function(P){Z(P,te),Z(i(P),ve);var k=(R?b:O)(P);(w?C:D)(this,k.node,k.offset)}}function C(R,w,P){var k=R.endContainer,de=R.endOffset;(w!==R.startContainer||P!==R.startOffset)&&((i(w)!=i(k)||Y(w,P,k,de)==1)&&(k=w,de=P),o(R,w,P,k,de))}function D(R,w,P){var k=R.startContainer,de=R.startOffset;(w!==R.endContainer||P!==R.endOffset)&&((i(w)!=i(k)||Y(w,P,k,de)==-1)&&(k=w,de=P),o(R,k,de,w,P))}var V=function(){};V.prototype=c.rangePrototype,t.prototype=new V,y.extend(t.prototype,{setStart:function(R,w){_(R,!0),$(R,w),C(this,R,w)},setEnd:function(R,w){_(R,!0),$(R,w),D(this,R,w)},setStartAndEnd:function(){var R=arguments,w=R[0],P=R[1],k=w,de=P;switch(R.length){case 3:de=R[2];break;case 4:k=R[2],de=R[3];break}_(w,!0),$(w,P),_(k,!0),$(k,de),o(this,w,P,k,de)},setBoundary:function(R,w,P){this["set"+(P?"Start":"End")](R,w)},setStartBefore:u(!0,!0),setStartAfter:u(!1,!0),setEndBefore:u(!0,!1),setEndAfter:u(!1,!1),collapse:function(R){G(this),R?o(this,this.startContainer,this.startOffset,this.startContainer,this.startOffset):o(this,this.endContainer,this.endOffset,this.endContainer,this.endOffset)},selectNodeContents:function(R){_(R,!0),o(this,R,0,R,n(R))},selectNode:function(R){_(R,!1),Z(R,te);var w=b(R),P=O(R);o(this,w.node,w.offset,P.node,P.offset)},extractContents:h(S,o),deleteContents:h(oe,o),canSurroundContents:function(){G(this),me(this.startContainer),me(this.endContainer);var R=new Q(this,!0),w=R._first&&g(R._first,this)||R._last&&g(R._last,this);return R.detach(),!w},splitBoundaries:function(){Ye(this)},splitBoundariesPreservingPositions:function(R){Ye(this,R)},normalizeBoundaries:function(){G(this);var R=this.startContainer,w=this.startOffset,P=this.endContainer,k=this.endOffset,de=function(pe){var ye=pe.nextSibling;ye&&ye.nodeType==pe.nodeType&&(P=pe,k=pe.length,pe.appendData(ye.data),a(ye))},St=function(pe){var ye=pe.previousSibling;if(ye&&ye.nodeType==pe.nodeType){R=pe;var xt=pe.length;if(w=ye.length,pe.insertData(0,ye.data),a(ye),R==P)k+=w,P=R;else if(P==pe.parentNode){var Tt=X(pe);k==Tt?(P=pe,k=xt):k>Tt&&k--}}},Ct=!0,Ce;if(H(P))k==P.length?de(P):k==0&&(Ce=P.previousSibling,Ce&&Ce.nodeType==P.nodeType&&(k=Ce.length,R==P&&(Ct=!1),Ce.appendData(P.data),a(P),P=Ce));else{if(k>0){var Nt=P.childNodes[k-1];Nt&&H(Nt)&&de(Nt)}Ct=!this.collapsed}if(Ct){if(H(R))w==0?St(R):w==R.length&&(Ce=R.nextSibling,Ce&&Ce.nodeType==R.nodeType&&(P==Ce&&(P=R,k+=R.length),R.appendData(Ce.data),a(Ce)));else if(w<R.childNodes.length){var Et=R.childNodes[w];Et&&H(Et)&&St(Et)}}else R=P,w=k;o(this,R,w,P,k)},collapseToPoint:function(R,w){_(R,!0),$(R,w),this.setStartAndEnd(R,w)},parentElement:function(){G(this);var R=this.commonAncestorContainer;return R?B(this.commonAncestorContainer,!0):null}}),s(t)}function M(t){t.collapsed=t.startContainer===t.endContainer&&t.startOffset===t.endOffset,t.commonAncestorContainer=t.collapsed?t.startContainer:p.getCommonAncestor(t.startContainer,t.endContainer)}function j(t,o,u,C,D){t.startContainer=o,t.startOffset=u,t.endContainer=C,t.endOffset=D,t.document=p.getDocument(o),M(t)}function ne(t){j(this,t,0,t,0)}T(ne,j),y.extend(ne,{rangeProperties:$e,RangeIterator:Q,copyComparisonConstants:s,createPrototypeRange:T,inspect:q,toHtml:W,getRangeDocument:d,rangesEqual:function(t,o){return t.startContainer===o.startContainer&&t.startOffset===o.startOffset&&t.endContainer===o.endContainer&&t.endOffset===o.endOffset}}),c.DomRange=ne}),L.createCoreModule("WrappedRange",["DomRange"],function(c,m){var p,y,A=c.dom,I=c.util,H=A.DomPosition,X=c.DomRange,J=A.getBody,ee=A.getContentDocument,Y=A.isCharacterDataNode;if(c.features.implementsDomRange&&function(){var a,g=X.rangeProperties;function d(S){for(var x=g.length,q;x--;)q=g[x],S[q]=S.nativeRange[q];S.collapsed=S.startContainer===S.endContainer&&S.startOffset===S.endOffset}function v(S,x,q,Q,te){var ve=S.startContainer!==x||S.startOffset!=q,le=S.endContainer!==Q||S.endOffset!=te,se=!S.equals(S.nativeRange);(ve||le||se)&&(S.setEnd(Q,te),S.setStart(x,q))}var b;p=function(S){if(!S)throw m.createError("WrappedRange: Range must be specified");this.nativeRange=S,d(this)},X.createPrototypeRange(p,v),a=p.prototype,a.selectNode=function(S){this.nativeRange.selectNode(S),d(this)},a.cloneContents=function(){return this.nativeRange.cloneContents()},a.surroundContents=function(S){this.nativeRange.surroundContents(S),d(this)},a.collapse=function(S){this.nativeRange.collapse(S),d(this)},a.cloneRange=function(){return new p(this.nativeRange.cloneRange())},a.refresh=function(){d(this)},a.toString=function(){return this.nativeRange.toString()};var O=document.createTextNode("test");J(document).appendChild(O);var E=document.createRange();E.setStart(O,0),E.setEnd(O,0);try{E.setStart(O,1),a.setStart=function(S,x){this.nativeRange.setStart(S,x),d(this)},a.setEnd=function(S,x){this.nativeRange.setEnd(S,x),d(this)},b=function(S){return function(x){this.nativeRange[S](x),d(this)}}}catch{a.setStart=function(x,q){try{this.nativeRange.setStart(x,q)}catch{this.nativeRange.setEnd(x,q),this.nativeRange.setStart(x,q)}d(this)},a.setEnd=function(x,q){try{this.nativeRange.setEnd(x,q)}catch{this.nativeRange.setStart(x,q),this.nativeRange.setEnd(x,q)}d(this)},b=function(x,q){return function(Q){try{this.nativeRange[x](Q)}catch{this.nativeRange[q](Q),this.nativeRange[x](Q)}d(this)}}}a.setStartBefore=b("setStartBefore","setEndBefore"),a.setStartAfter=b("setStartAfter","setEndAfter"),a.setEndBefore=b("setEndBefore","setStartBefore"),a.setEndAfter=b("setEndAfter","setStartAfter"),a.selectNodeContents=function(S){this.setStartAndEnd(S,0,A.getNodeLength(S))},E.selectNodeContents(O),E.setEnd(O,3);var U=document.createRange();U.selectNodeContents(O),U.setEnd(O,4),U.setStart(O,2),E.compareBoundaryPoints(E.START_TO_END,U)==-1&&E.compareBoundaryPoints(E.END_TO_START,U)==1?a.compareBoundaryPoints=function(S,x){return x=x.nativeRange||x,S==x.START_TO_END?S=x.END_TO_START:S==x.END_TO_START&&(S=x.START_TO_END),this.nativeRange.compareBoundaryPoints(S,x)}:a.compareBoundaryPoints=function(S,x){return this.nativeRange.compareBoundaryPoints(S,x.nativeRange||x)};var F=document.createElement("div");F.innerHTML="123";var z=F.firstChild,oe=J(document);oe.appendChild(F),E.setStart(z,1),E.setEnd(z,2),E.deleteContents(),z.data=="13"&&(a.deleteContents=function(){this.nativeRange.deleteContents(),d(this)},a.extractContents=function(){var S=this.nativeRange.extractContents();return d(this),S}),oe.removeChild(F),oe=null,I.isHostMethod(E,"createContextualFragment")&&(a.createContextualFragment=function(S){return this.nativeRange.createContextualFragment(S)}),J(document).removeChild(O),a.getName=function(){return"WrappedRange"},c.WrappedRange=p,c.createNativeRange=function(S){return S=ee(S,m,"createNativeRange"),S.createRange()}}(),c.features.implementsTextRange){var ie=function(a){var g=a.parentElement(),d=a.duplicate();d.collapse(!0);var v=d.parentElement();d=a.duplicate(),d.collapse(!1);var b=d.parentElement(),O=v==b?v:A.getCommonAncestor(v,b);return O==g?O:A.getCommonAncestor(g,O)},ae=function(a){return a.compareEndPoints("StartToEnd",a)==0},n=function(a,g,d,v,b){var O=a.duplicate();O.collapse(d);var E=O.parentElement();if(A.isOrIsAncestorOf(g,E)||(E=g),!E.canHaveHTML){var U=new H(E.parentNode,A.getNodeIndex(E));return{boundaryPosition:U,nodeInfo:{nodeIndex:U.offset,containerElement:U.node}}}var F=A.getDocument(E).createElement("span");F.parentNode&&A.removeNode(F);for(var z,oe=d?"StartToStart":"StartToEnd",S,x,q,Q,te=b&&b.containerElement==E?b.nodeIndex:0,ve=E.childNodes.length,le=ve,se=le;se==ve?E.appendChild(F):E.insertBefore(F,E.childNodes[se]),O.moveToElementText(F),z=O.compareEndPoints(oe,a),!(z==0||te==le);){if(z==-1){if(le==te+1)break;te=se}else le=le==te+1?te:se;se=Math.floor((te+le)/2),E.removeChild(F)}if(Q=F.nextSibling,z==-1&&Q&&Y(Q)){O.setEndPoint(d?"EndToStart":"EndToEnd",a);var ce;if(/[\r\n]/.test(Q.data)){var fe=O.duplicate(),ge=fe.text.replace(/\r\n/g,"\r").length;for(ce=fe.moveStart("character",ge);(z=fe.compareEndPoints("StartToEnd",fe))==-1;)ce++,fe.moveStart("character",1)}else ce=O.text.length;q=new H(Q,ce)}else S=(v||!d)&&F.previousSibling,x=(v||d)&&F.nextSibling,x&&Y(x)?q=new H(x,0):S&&Y(S)?q=new H(S,S.data.length):q=new H(E,A.getNodeIndex(F));return A.removeNode(F),{boundaryPosition:q,nodeInfo:{nodeIndex:se,containerElement:E}}},r=function(a,g){var d,v,b=a.offset,O=A.getDocument(a.node),E,U,F=J(O).createTextRange(),z=Y(a.node);return z?(d=a.node,v=d.parentNode):(U=a.node.childNodes,d=b<U.length?U[b]:null,v=a.node),E=O.createElement("span"),E.innerHTML="&#feff;",d?v.insertBefore(E,d):v.appendChild(E),F.moveToElementText(E),F.collapse(!g),v.removeChild(E),z&&F[g?"moveStart":"moveEnd"]("character",b),F};y=function(a){this.textRange=a,this.refresh()},y.prototype=new X(document),y.prototype.refresh=function(){var a,g,d,v=ie(this.textRange);ae(this.textRange)?g=a=n(this.textRange,v,!0,!0).boundaryPosition:(d=n(this.textRange,v,!0,!1),a=d.boundaryPosition,g=n(this.textRange,v,!1,!1,d.nodeInfo).boundaryPosition),this.setStart(a.node,a.offset),this.setEnd(g.node,g.offset)},y.prototype.getName=function(){return"WrappedTextRange"},X.copyComparisonConstants(y);var i=function(a){if(a.collapsed)return r(new H(a.startContainer,a.startOffset),!0);var g=r(new H(a.startContainer,a.startOffset),!0),d=r(new H(a.endContainer,a.endOffset),!1),v=J(X.getRangeDocument(a)).createTextRange();return v.setEndPoint("StartToStart",g),v.setEndPoint("EndToEnd",d),v};if(y.rangeToTextRange=i,y.prototype.toTextRange=function(){return i(this)},c.WrappedTextRange=y,!c.features.implementsDomRange||c.config.preferTextRange){var l=function(a){return a("return this;")()}(Function);typeof l.Range>"u"&&(l.Range=y),c.createNativeRange=function(a){return a=ee(a,m,"createNativeRange"),J(a).createTextRange()},c.WrappedRange=y}}c.createRange=function(a){return a=ee(a,m,"createRange"),new c.WrappedRange(c.createNativeRange(a))},c.createRangyRange=function(a){return a=ee(a,m,"createRangyRange"),new X(a)},I.createAliasForDeprecatedMethod(c,"createIframeRange","createRange"),I.createAliasForDeprecatedMethod(c,"createIframeRangyRange","createRangyRange"),c.addShimListener(function(a){var g=a.document;typeof g.createRange>"u"&&(g.createRange=function(){return c.createRange(g)}),g=a=null})}),L.createCoreModule("WrappedSelection",["DomRange","WrappedRange"],function(c,m){c.config.checkSelectionRanges=!0;var p="boolean",y="number",A=c.dom,I=c.util,H=I.isHostMethod,X=c.DomRange,J=c.WrappedRange,ee=c.DOMException,Y=A.DomPosition,ie,ae,n=c.features,r="Control",i=A.getDocument,l=A.getBody,a=X.rangesEqual;function g(e){return typeof e=="string"?/^backward(s)?$/i.test(e):!!e}function d(e,s){if(e){if(A.isWindow(e))return e;if(e instanceof G)return e.win;var h=A.getContentDocument(e,m,s);return A.getWindow(h)}else return window}function v(e){return d(e,"getWinSelection").getSelection()}function b(e){return d(e,"getDocSelection").document.selection}function O(e){var s=!1;return e.anchorNode&&(s=A.comparePoints(e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset)==1),s}var E=H(window,"getSelection"),U=I.isHostObject(document,"selection");n.implementsWinGetSelection=E,n.implementsDocSelection=U;var F=U&&(!E||c.config.preferTextRange);if(F)ie=b,c.isSelectionValid=function(e){var s=d(e,"isSelectionValid").document,h=s.selection;return h.type!="None"||i(h.createRange().parentElement())==s};else if(E)ie=v,c.isSelectionValid=function(){return!0};else return m.fail("Neither document.selection or window.getSelection() detected."),!1;c.getNativeSelection=ie;var z=ie();if(!z)return m.fail("Native selection was null (possibly issue 138?)"),!1;var oe=c.createNativeRange(document),S=l(document),x=I.areHostProperties(z,["anchorNode","focusNode","anchorOffset","focusOffset"]);n.selectionHasAnchorAndFocus=x;var q=H(z,"extend");n.selectionHasExtend=q;var Q=H(z,"setBaseAndExtent");n.selectionHasSetBaseAndExtent=Q;var te=typeof z.rangeCount==y;n.selectionHasRangeCount=te;var ve=!1,le=!0,se=q?function(e,s){var h=X.getRangeDocument(s),T=c.createRange(h);T.collapseToPoint(s.endContainer,s.endOffset),e.addRange(_(T)),e.extend(s.startContainer,s.startOffset)}:null;I.areHostMethods(z,["addRange","getRangeAt","removeAllRanges"])&&typeof z.rangeCount==y&&n.implementsDomRange&&function(){var e=window.getSelection();if(e){for(var s=e.rangeCount,h=s>1,T=[],M=O(e),j=0;j<s;++j)T[j]=e.getRangeAt(j);var ne=A.createTestElement(document,"",!1),t=ne.appendChild(document.createTextNode("   ")),o=document.createRange();if(o.setStart(t,1),o.collapse(!0),e.removeAllRanges(),e.addRange(o),le=e.rangeCount==1,e.removeAllRanges(),!h){var u=window.navigator.appVersion.match(/Chrome\/(.*?) /);if(u&&parseInt(u[1])>=36)ve=!1;else{var C=o.cloneRange();o.setStart(t,0),C.setEnd(t,3),C.setStart(t,2),e.addRange(o),e.addRange(C),ve=e.rangeCount==2}}for(A.removeNode(ne),e.removeAllRanges(),j=0;j<s;++j)j==0&&M?se?se(e,T[j]):(c.warn("Rangy initialization: original selection was backwards but selection has been restored forwards because the browser does not support Selection.extend"),e.addRange(T[j])):e.addRange(T[j])}}(),n.selectionSupportsMultipleRanges=ve,n.collapsedNonEditableSelectionsSupported=le;var ce=!1,fe;S&&H(S,"createControlRange")&&(fe=S.createControlRange(),I.areHostProperties(fe,["item","add"])&&(ce=!0)),n.implementsControlRange=ce,x?ae=function(e){return e.anchorNode===e.focusNode&&e.anchorOffset===e.focusOffset}:ae=function(e){return e.rangeCount?e.getRangeAt(e.rangeCount-1).collapsed:!1};function ge(e,s,h){var T=h?"end":"start",M=h?"start":"end";e.anchorNode=s[T+"Container"],e.anchorOffset=s[T+"Offset"],e.focusNode=s[M+"Container"],e.focusOffset=s[M+"Offset"]}function f(e){var s=e.nativeSelection;e.anchorNode=s.anchorNode,e.anchorOffset=s.anchorOffset,e.focusNode=s.focusNode,e.focusOffset=s.focusOffset}function N(e){e.anchorNode=e.focusNode=null,e.anchorOffset=e.focusOffset=0,e.rangeCount=0,e.isCollapsed=!0,e._ranges.length=0,B(e)}function B(e){e.type=e.rangeCount==0?"None":ae(e)?"Caret":"Range"}function _(e){var s;return e instanceof X?(s=c.createNativeRange(e.getDocument()),s.setEnd(e.endContainer,e.endOffset),s.setStart(e.startContainer,e.startOffset)):e instanceof J?s=e.nativeRange:n.implementsDomRange&&e instanceof A.getWindow(e.startContainer).Range&&(s=e),s}function Z(e){if(!e.length||e[0].nodeType!=1)return!1;for(var s=1,h=e.length;s<h;++s)if(!A.isAncestorOf(e[0],e[s]))return!1;return!0}function $(e){var s=e.getNodes();if(!Z(s))throw m.createError("getSingleElementFromRange: range "+e.inspect()+" did not consist of a single element");return s[0]}function Ee(e){return!!e&&typeof e.text<"u"}function me(e,s){var h=new J(s);e._ranges=[h],ge(e,h,!1),e.rangeCount=1,e.isCollapsed=h.collapsed,B(e)}function ue(e){if(e._ranges.length=0,e.docSelection.type=="None")N(e);else{var s=e.docSelection.createRange();if(Ee(s))me(e,s);else{e.rangeCount=s.length;for(var h,T=i(s.item(0)),M=0;M<e.rangeCount;++M)h=c.createRange(T),h.selectNode(s.item(M)),e._ranges.push(h);e.isCollapsed=e.rangeCount==1&&e._ranges[0].collapsed,ge(e,e._ranges[e.rangeCount-1],!1),B(e)}}}function it(e,s){for(var h=e.docSelection.createRange(),T=$(s),M=i(h.item(0)),j=l(M).createControlRange(),ne=0,t=h.length;ne<t;++ne)j.add(h.item(ne));try{j.add(T)}catch{throw m.createError("addRange(): Element within the specified Range could not be added to control selection (does it have layout?)")}j.select(),ue(e)}var Le;H(z,"getRangeAt")?Le=function(e,s){try{return e.getRangeAt(s)}catch{return null}}:x&&(Le=function(e){var s=i(e.anchorNode),h=c.createRange(s);return h.setStartAndEnd(e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset),h.collapsed!==this.isCollapsed&&h.setStartAndEnd(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset),h});function G(e,s,h){this.nativeSelection=e,this.docSelection=s,this._ranges=[],this.win=h,this.refresh()}G.prototype=c.selectionPrototype;function at(e){e.win=e.anchorNode=e.focusNode=e._ranges=null,e.rangeCount=e.anchorOffset=e.focusOffset=0,e.detached=!0,B(e)}var Ae=[];function ot(e,s){for(var h=Ae.length,T,M;h--;)if(T=Ae[h],M=T.selection,s=="deleteAll")at(M);else if(T.win==e)return s=="delete"?(Ae.splice(h,1),!0):M;return s=="deleteAll"&&(Ae.length=0),null}var Ye=function(e){if(e&&e instanceof G)return e.refresh(),e;e=d(e,"getNativeSelection");var s=ot(e),h=ie(e),T=U?b(e):null;return s?(s.nativeSelection=h,s.docSelection=T,s.refresh()):(s=new G(h,T,e),Ae.push({win:e,selection:s})),s};c.getSelection=Ye,I.createAliasForDeprecatedMethod(c,"getIframeSelection","getSelection");var W=G.prototype;function $e(e,s){for(var h=i(s[0].startContainer),T=l(h).createControlRange(),M=0,j,ne=s.length;M<ne;++M){j=$(s[M]);try{T.add(j)}catch{throw m.createError("setRanges(): Element within one of the specified Ranges could not be added to control selection (does it have layout?)")}}T.select(),ue(e)}if(!F&&x&&I.areHostMethods(z,["removeAllRanges","addRange"])){W.removeAllRanges=function(){this.nativeSelection.removeAllRanges(),N(this)};var Ge=function(e,s){se(e.nativeSelection,s),e.refresh()};te?W.addRange=function(e,s){if(ce&&U&&this.docSelection.type==r)it(this,e);else if(g(s)&&q)Ge(this,e);else{var h;ve?h=this.rangeCount:(this.removeAllRanges(),h=0);var T=_(e).cloneRange();try{this.nativeSelection.addRange(T)}catch{}if(this.rangeCount=this.nativeSelection.rangeCount,this.rangeCount==h+1){if(c.config.checkSelectionRanges){var M=Le(this.nativeSelection,this.rangeCount-1);M&&!a(M,e)&&(e=new J(M))}this._ranges[this.rangeCount-1]=e,ge(this,e,be(this.nativeSelection)),this.isCollapsed=ae(this),B(this)}else this.refresh()}}:W.addRange=function(e,s){g(s)&&q?Ge(this,e):(this.nativeSelection.addRange(_(e)),this.refresh())},W.setRanges=function(e){if(ce&&U&&e.length>1)$e(this,e);else{this.removeAllRanges();for(var s=0,h=e.length;s<h;++s)this.addRange(e[s])}}}else if(H(z,"empty")&&H(oe,"select")&&ce&&F)W.removeAllRanges=function(){try{if(this.docSelection.empty(),this.docSelection.type!="None"){var e;if(this.anchorNode)e=i(this.anchorNode);else if(this.docSelection.type==r){var s=this.docSelection.createRange();s.length&&(e=i(s.item(0)))}if(e){var h=l(e).createTextRange();h.select(),this.docSelection.empty()}}}catch{}N(this)},W.addRange=function(e){this.docSelection.type==r?it(this,e):(c.WrappedTextRange.rangeToTextRange(e).select(),this._ranges[0]=e,this.rangeCount=1,this.isCollapsed=this._ranges[0].collapsed,ge(this,e,!1),B(this))},W.setRanges=function(e){this.removeAllRanges();var s=e.length;s>1?$e(this,e):s&&this.addRange(e[0])};else return m.fail("No means of selecting a Range or TextRange was found"),!1;W.getRangeAt=function(e){if(e<0||e>=this.rangeCount)throw new ee("INDEX_SIZE_ERR");return this._ranges[e].cloneRange()};var Fe;if(F)Fe=function(e){var s;c.isSelectionValid(e.win)?s=e.docSelection.createRange():(s=l(e.win.document).createTextRange(),s.collapse(!0)),e.docSelection.type==r?ue(e):Ee(s)?me(e,s):N(e)};else if(H(z,"getRangeAt")&&typeof z.rangeCount==y)Fe=function(e){if(ce&&U&&e.docSelection.type==r)ue(e);else if(e._ranges.length=e.rangeCount=e.nativeSelection.rangeCount,e.rangeCount){for(var s=0,h=e.rangeCount;s<h;++s)e._ranges[s]=new c.WrappedRange(e.nativeSelection.getRangeAt(s));ge(e,e._ranges[e.rangeCount-1],be(e.nativeSelection)),e.isCollapsed=ae(e),B(e)}else N(e)};else if(x&&typeof z.isCollapsed==p&&typeof oe.collapsed==p&&n.implementsDomRange)Fe=function(e){var s,h=e.nativeSelection;h.anchorNode?(s=Le(h,0),e._ranges=[s],e.rangeCount=1,f(e),e.isCollapsed=ae(e),B(e)):N(e)};else return m.fail("No means of obtaining a Range or TextRange from the user's selection was found"),!1;W.refresh=function(e){var s=e?this._ranges.slice(0):null,h=this.anchorNode,T=this.anchorOffset;if(Fe(this),e){var M=s.length;if(M!=this._ranges.length||this.anchorNode!=h||this.anchorOffset!=T)return!0;for(;M--;)if(!a(s[M],this._ranges[M]))return!0;return!1}};var mt=function(e,s){var h=e.getAllRanges();e.removeAllRanges();for(var T=0,M=h.length;T<M;++T)a(s,h[T])||e.addRange(h[T]);e.rangeCount||N(e)};ce&&U?W.removeRange=function(e){if(this.docSelection.type==r){for(var s=this.docSelection.createRange(),h=$(e),T=i(s.item(0)),M=l(T).createControlRange(),j,ne=!1,t=0,o=s.length;t<o;++t)j=s.item(t),j!==h||ne?M.add(s.item(t)):ne=!0;M.select(),ue(this)}else mt(this,e)}:W.removeRange=function(e){mt(this,e)};var be;!F&&x&&n.implementsDomRange?(be=O,W.isBackward=function(){return be(this)}):be=W.isBackward=function(){return!1},W.isBackwards=W.isBackward,W.toString=function(){for(var e=[],s=0,h=this.rangeCount;s<h;++s)e[s]=""+this._ranges[s];return e.join("")};function ke(e,s){if(e.win.document!=i(s))throw new ee("WRONG_DOCUMENT_ERR")}function st(e,s){if(s<0||s>(A.isCharacterDataNode(e)?e.length:e.childNodes.length))throw new ee("INDEX_SIZE_ERR")}W.collapse=function(e,s){ke(this,e);var h=c.createRange(e);h.collapseToPoint(e,s),this.setSingleRange(h),this.isCollapsed=!0},W.collapseToStart=function(){if(this.rangeCount){var e=this._ranges[0];this.collapse(e.startContainer,e.startOffset)}else throw new ee("INVALID_STATE_ERR")},W.collapseToEnd=function(){if(this.rangeCount){var e=this._ranges[this.rangeCount-1];this.collapse(e.endContainer,e.endOffset)}else throw new ee("INVALID_STATE_ERR")},W.selectAllChildren=function(e){ke(this,e);var s=c.createRange(e);s.selectNodeContents(e),this.setSingleRange(s)},Q?W.setBaseAndExtent=function(e,s,h,T){this.nativeSelection.setBaseAndExtent(e,s,h,T),this.refresh()}:q&&(W.setBaseAndExtent=function(e,s,h,T){st(e,s),st(h,T),ke(this,e),ke(this,h);var M=c.createRange(node),j=A.comparePoints(e,s,h,T)==-1;j?M.setStartAndEnd(h,T,e,s):M.setStartAndEnd(e,s,h,T),this.setSingleRange(M,j)}),W.deleteFromDocument=function(){if(ce&&U&&this.docSelection.type==r){for(var e=this.docSelection.createRange(),s;e.length;)s=e.item(0),e.remove(s),A.removeNode(s);this.refresh()}else if(this.rangeCount){var h=this.getAllRanges();if(h.length){this.removeAllRanges();for(var T=0,M=h.length;T<M;++T)h[T].deleteContents();this.addRange(h[M-1])}}},W.eachRange=function(e,s){for(var h=0,T=this._ranges.length;h<T;++h)if(e(this.getRangeAt(h)))return s},W.getAllRanges=function(){var e=[];return this.eachRange(function(s){e.push(s)}),e},W.setSingleRange=function(e,s){this.removeAllRanges(),this.addRange(e,s)},W.callMethodOnEachRange=function(e,s){var h=[];return this.eachRange(function(T){h.push(T[e].apply(T,s||[]))}),h};function ct(e){return function(s,h){var T;this.rangeCount?(T=this.getRangeAt(0),T["set"+(e?"Start":"End")](s,h)):(T=c.createRange(this.win.document),T.setStartAndEnd(s,h)),this.setSingleRange(T,this.isBackward())}}W.setStart=ct(!0),W.setEnd=ct(!1),c.rangePrototype.select=function(e){Ye(this.getDocument()).setSingleRange(this,e)},W.changeEachRange=function(e){var s=[],h=this.isBackward();this.eachRange(function(T){e(T),s.push(T)}),this.removeAllRanges(),h&&s.length==1?this.addRange(s[0],"backward"):this.setRanges(s)},W.containsNode=function(e,s){return this.eachRange(function(h){return h.containsNode(e,s)},!0)||!1},W.getBookmark=function(e){return{backward:this.isBackward(),rangeBookmarks:this.callMethodOnEachRange("getBookmark",[e])}},W.moveToBookmark=function(e){for(var s=[],h=0,T,M;T=e.rangeBookmarks[h++];)M=c.createRange(this.win),M.moveToBookmark(T),s.push(M);e.backward?this.setSingleRange(s[0],"backward"):this.setRanges(s)},W.saveRanges=function(){return{backward:this.isBackward(),ranges:this.callMethodOnEachRange("cloneRange")}},W.restoreRanges=function(e){this.removeAllRanges();for(var s=0,h;h=e.ranges[s];++s)this.addRange(h,e.backward&&s==0)},W.toHtml=function(){var e=[];return this.eachRange(function(s){e.push(X.toHtml(s))}),e.join("")},n.implementsTextRange&&(W.getNativeTextRange=function(){var e;if(e=this.docSelection){var s=e.createRange();if(Ee(s))return s;throw m.createError("getNativeTextRange: selection is a control selection")}else{if(this.rangeCount>0)return c.WrappedTextRange.rangeToTextRange(this.getRangeAt(0));throw m.createError("getNativeTextRange: selection contains no range")}});function Qe(e){var s=[],h=new Y(e.anchorNode,e.anchorOffset),T=new Y(e.focusNode,e.focusOffset),M=typeof e.getName=="function"?e.getName():"Selection";if(typeof e.rangeCount<"u")for(var j=0,ne=e.rangeCount;j<ne;++j)s[j]=X.inspect(e.getRangeAt(j));return"["+M+"(Ranges: "+s.join(", ")+")(anchor: "+h.inspect()+", focus: "+T.inspect()+"]"}W.getName=function(){return"WrappedSelection"},W.inspect=function(){return Qe(this)},W.detach=function(){ot(this.win,"delete"),at(this)},G.detachAll=function(){ot(null,"deleteAll")},G.inspect=Qe,G.isDirectionBackward=g,c.Selection=G,c.selectionPrototype=W,c.addShimListener(function(e){typeof e.getSelection>"u"&&(e.getSelection=function(){return Ye(e)}),e=null})});var vt=!1,rt=function(c){vt||(vt=!0,!L.initialized&&L.config.autoInitialize&&je())};return Re&&(document.readyState=="complete"?rt():(re(document,"addEventListener")&&document.addEventListener("DOMContentLoaded",rt,!1),Ue(window,"load",rt))),L})}(yt)),yt.exports}var _t=At();const It=Dt(_t);var bt={exports:{}};(function(Rt,Ot){(function(Se,he){Rt.exports=Se(At())})(function(Se){return Se.createModule("ClassApplier",["WrappedSelection"],function(he,Oe){var K=he.dom,ft=K.DomPosition,Xe=K.arrayContains,Ze=he.util,re=Ze.forEach,Je="span",lt=Ze.isHostMethod(document,"createElementNS");function Pe(n,r){for(var i in n)if(n.hasOwnProperty(i)&&r(i,n[i])===!1)return!1;return!0}function ze(n){return n.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function ut(n,r){return!!n&&new RegExp("(?:^|\\s)"+r+"(?:\\s|$)").test(n)}function Ie(n,r){if(typeof n.classList=="object")return n.classList.contains(r);var i=typeof n.className=="string",l=i?n.className:n.getAttribute("class");return ut(l,r)}function Te(n,r){if(typeof n.classList=="object")n.classList.add(r);else{var i=typeof n.className=="string",l=i?n.className:n.getAttribute("class");l?ut(l,r)||(l+=" "+r):l=r,i?n.className=l:n.setAttribute("class",l)}}var He=function(){function n(r,i,l){return i&&l?" ":""}return function(r,i){if(typeof r.classList=="object")r.classList.remove(i);else{var l=typeof r.className=="string",a=l?r.className:r.getAttribute("class");a=a.replace(new RegExp("(^|\\s)"+i+"(\\s|$)"),n),l?r.className=a:r.setAttribute("class",a)}}}();function dt(n){var r=typeof n.className=="string";return r?n.className:n.getAttribute("class")}function we(n){return n&&n.split(/\s+/).sort().join(" ")}function Re(n){return we(dt(n))}function Ne(n,r){return Re(n)==Re(r)}function L(n,r){for(var i=r.split(/\s+/),l=0,a=i.length;l<a;++l)if(!Ie(n,ze(i[l])))return!1;return!0}function Ve(n){var r=n.parentNode;return r&&r.nodeType==1&&!/^(textarea|style|script|select|iframe)$/i.test(r.nodeName)}function ht(n,r,i,l,a){var g=n.node,d=n.offset,v=g,b=d;g==l&&d>a&&++b,g==r&&(d==i||d==i+1)&&(v=l,b+=a-i),g==r&&d>i+1&&--b,n.node=v,n.offset=b}function xe(n,r,i){n.node==r&&n.offset>i&&--n.offset}function Ke(n,r,i,l){i==-1&&(i=r.childNodes.length);var a=n.parentNode,g=K.getNodeIndex(n);re(l,function(d){ht(d,a,g,r,i)}),r.childNodes.length==i?r.appendChild(n):r.insertBefore(n,r.childNodes[i])}function Me(n,r){var i=n.parentNode,l=K.getNodeIndex(n);re(r,function(a){xe(a,i,l)}),K.removeNode(n)}function Ue(n,r,i,l,a){for(var g,d=[];g=n.firstChild;)Ke(g,r,i++,a),d.push(g);return Me(n,a),d}function Be(n,r){return Ue(n,n.parentNode,K.getNodeIndex(n),!0,r)}function qe(n,r){var i=n.cloneRange();i.selectNodeContents(r);var l=i.intersection(n),a=l?l.toString():"";return a!=""}function je(n){for(var r=n.getNodes([3]),i=0,l;(l=r[i])&&!qe(n,l);)++i;for(var a=r.length-1;(l=r[a])&&!qe(n,l);)--a;return r.slice(i,a+1)}function et(n,r){if(n.attributes.length!=r.attributes.length)return!1;for(var i=0,l=n.attributes.length,a,g,d;i<l;++i)if(a=n.attributes[i],d=a.name,d!="class"&&(g=r.attributes.getNamedItem(d),a===null!=(g===null)||a.specified!=g.specified||a.specified&&a.nodeValue!==g.nodeValue))return!1;return!0}function tt(n,r){for(var i=0,l=n.attributes.length,a;i<l;++i)if(a=n.attributes[i].name,!(r&&Xe(r,a))&&n.attributes[i].specified&&a!="class")return!0;return!1}var De=K.getComputedStyleProperty,_e=function(){var n=document.createElement("div");return typeof n.isContentEditable=="boolean"?function(r){return r&&r.nodeType==1&&r.isContentEditable}:function(r){return!r||r.nodeType!=1||r.contentEditable=="false"?!1:r.contentEditable=="true"||_e(r.parentNode)}}();function We(n){var r;return n&&n.nodeType==1&&((r=n.parentNode)&&r.nodeType==9&&r.designMode=="on"||_e(n)&&!_e(n.parentNode))}function nt(n){return(_e(n)||n.nodeType!=1&&_e(n.parentNode))&&!We(n)}var gt=/^inline(-block|-table)?$/i;function pt(n){return n&&n.nodeType==1&&!gt.test(De(n,"display"))}var vt=/[^\r\n\t\f \u200B]/;function rt(n){if(n.data.length==0)return!0;if(vt.test(n.data))return!1;var r=De(n.parentNode,"whiteSpace");switch(r){case"pre":case"pre-wrap":case"-moz-pre-wrap":return!1;case"pre-line":if(/[\r\n]/.test(n.data))return!1}return pt(n.previousSibling)||pt(n.nextSibling)}function c(n){var r=[],i,l;for(i=0;l=n[i++];)r.push(new ft(l.startContainer,l.startOffset),new ft(l.endContainer,l.endOffset));return r}function m(n,r){for(var i=0,l,a,g,d=n.length;i<d;++i)l=n[i],a=r[i*2],g=r[i*2+1],l.setStartAndEnd(a.node,a.offset,g.node,g.offset)}function p(n,r){return K.isCharacterDataNode(n)?r==0?!!n.previousSibling:r==n.length?!!n.nextSibling:!0:r>0&&r<n.childNodes.length}function y(n,r,i,l){var a,g,d=i==0;if(K.isAncestorOf(r,n))return n;if(K.isCharacterDataNode(r)){var v=K.getNodeIndex(r);if(i==0)i=v;else if(i==r.length)i=v+1;else throw Oe.createError("splitNodeAt() should not be called with offset in the middle of a data node ("+i+" in "+r.data);r=r.parentNode}if(p(r,i)){a=r.cloneNode(!1),g=r.parentNode,a.id&&a.removeAttribute("id");for(var b,O=0;b=r.childNodes[i];)Ke(b,a,O++,l);return Ke(a,g,K.getNodeIndex(r)+1,l),r==n?a:y(n,g,K.getNodeIndex(a),l)}else if(n!=r){a=r.parentNode;var E=K.getNodeIndex(r);return d||E++,y(n,a,E,l)}return n}function A(n,r){return n.namespaceURI==r.namespaceURI&&n.tagName.toLowerCase()==r.tagName.toLowerCase()&&Ne(n,r)&&et(n,r)&&De(n,"display")=="inline"&&De(r,"display")=="inline"}function I(n){var r=n?"nextSibling":"previousSibling";return function(i,l){var a=i.parentNode,g=i[r];if(g){if(g&&g.nodeType==3)return g}else if(l&&(g=a[r],g&&g.nodeType==1&&A(a,g))){var d=g[n?"firstChild":"lastChild"];if(d&&d.nodeType==3)return d}return null}}var H=I(!1),X=I(!0);function J(n){this.isElementMerge=n.nodeType==1,this.textNodes=[];var r=this.isElementMerge?n.lastChild:n;r&&(this.textNodes[0]=r)}J.prototype={doMerge:function(n){var r=this.textNodes,i=r[0];if(r.length>1){var l=K.getNodeIndex(i),a=[],g=0,d;re(r,function(v,b){d=v.parentNode,b>0&&(d.removeChild(v),d.hasChildNodes()||K.removeNode(d),n&&re(n,function(O){O.node==v&&(O.node=i,O.offset+=g),O.node==d&&O.offset>l&&(--O.offset,O.offset==l+1&&b<r.length-1&&(O.node=i,O.offset=g))})),a[b]=v.data,g+=v.data.length}),i.data=a.join("")}return i.data},getLength:function(){for(var n=this.textNodes.length,r=0;n--;)r+=this.textNodes[n].length;return r},toString:function(){var n=[];return re(this.textNodes,function(r,i){n[i]="'"+r.data+"'"}),"[Merge("+n.join(",")+")]"}};var ee=["elementTagName","ignoreWhiteSpace","applyToEditableOnly","useExistingElements","removeEmptyElements","onElementCreate"],Y={};function ie(n,r,i){var l,a,g,d,v=this;v.cssClass=v.className=n;var b=null,O={};if(typeof r=="object"&&r!==null){for(typeof r.elementTagName<"u"&&(r.elementTagName=r.elementTagName.toLowerCase()),i=r.tagNames,b=r.elementProperties,O=r.elementAttributes,a=0;d=ee[a++];)r.hasOwnProperty(d)&&(v[d]=r[d]);l=r.normalize}else l=r;v.normalize=typeof l>"u"?!0:l,v.attrExceptions=[];var E=document.createElement(v.elementTagName);v.elementProperties=v.copyPropertiesToElement(b,E,!0),Pe(O,function(F,z){v.attrExceptions.push(F),O[F]=""+z}),v.elementAttributes=O,v.elementSortedClassName=v.elementProperties.hasOwnProperty("className")?we(v.elementProperties.className+" "+n):n,v.applyToAnyTagName=!1;var U=typeof i;if(U=="string")i=="*"?v.applyToAnyTagName=!0:v.tagNames=ze(i.toLowerCase()).split(/\s*,\s*/);else if(U=="object"&&typeof i.length=="number")for(v.tagNames=[],a=0,g=i.length;a<g;++a)i[a]=="*"?v.applyToAnyTagName=!0:v.tagNames.push(i[a].toLowerCase());else v.tagNames=[v.elementTagName]}ie.prototype={elementTagName:Je,elementProperties:{},elementAttributes:{},ignoreWhiteSpace:!0,applyToEditableOnly:!1,useExistingElements:!0,removeEmptyElements:!0,onElementCreate:null,copyPropertiesToElement:function(n,r,i){var l,a,g={},d,v,b,O;for(var E in n)if(n.hasOwnProperty(E))if(v=n[E],b=r[E],E=="className")Te(r,v),Te(r,this.className),r[E]=we(r[E]),i&&(g[E]=v);else if(E=="style"){a=b,i&&(g[E]=d={});for(l in n[E])n[E].hasOwnProperty(l)&&(a[l]=v[l],i&&(d[l]=a[l]));this.attrExceptions.push(E)}else r[E]=v,i&&(g[E]=r[E],O=Y.hasOwnProperty(E)?Y[E]:E,this.attrExceptions.push(O));return i?g:""},copyAttributesToElement:function(n,r){for(var i in n)n.hasOwnProperty(i)&&!/^class(?:Name)?$/i.test(i)&&r.setAttribute(i,n[i])},appliesToElement:function(n){return Xe(this.tagNames,n.tagName.toLowerCase())},getEmptyElements:function(n){var r=this;return n.getNodes([1],function(i){return r.appliesToElement(i)&&!i.hasChildNodes()})},hasClass:function(n){return n.nodeType==1&&(this.applyToAnyTagName||this.appliesToElement(n))&&Ie(n,this.className)},getSelfOrAncestorWithClass:function(n){for(;n;){if(this.hasClass(n))return n;n=n.parentNode}return null},isModifiable:function(n){return!this.applyToEditableOnly||nt(n)},isIgnorableWhiteSpaceNode:function(n){return this.ignoreWhiteSpace&&n&&n.nodeType==3&&rt(n)},postApply:function(n,r,i,l){var a=n[0],g=n[n.length-1],d=[],v,b=a,O=g,E=0,U=g.length,F;re(n,function(x){F=H(x,!l),F?(v||(v=new J(F),d.push(v)),v.textNodes.push(x),x===a&&(b=v.textNodes[0],E=b.length),x===g&&(O=v.textNodes[0],U=v.getLength())):v=null});var z=X(g,!l);if(z&&(v||(v=new J(g),d.push(v)),v.textNodes.push(z)),d.length){for(var oe=0,S=d.length;oe<S;++oe)d[oe].doMerge(i);r.setStartAndEnd(b,E,O,U)}},createContainer:function(n){var r=K.getDocument(n),i=lt&&!K.isHtmlNamespace(n)&&n.namespaceURI?r.createElementNS(n.namespaceURI,this.elementTagName):r.createElement(this.elementTagName);return this.copyPropertiesToElement(this.elementProperties,i,!1),this.copyAttributesToElement(this.elementAttributes,i),Te(i,this.className),this.onElementCreate&&this.onElementCreate(i,this),i},elementHasProperties:function(n,r){var i=this;return Pe(r,function(l,a){if(l=="className")return L(n,a);if(typeof a=="object"){if(!i.elementHasProperties(n[l],a))return!1}else if(n[l]!==a)return!1})},elementHasAttributes:function(n,r){return Pe(r,function(i,l){if(n.getAttribute(i)!==l)return!1})},applyToTextNode:function(n,r){if(Ve(n)){var i=n.parentNode;if(i.childNodes.length==1&&this.useExistingElements&&this.appliesToElement(i)&&this.elementHasProperties(i,this.elementProperties)&&this.elementHasAttributes(i,this.elementAttributes))Te(i,this.className);else{var l=n.parentNode,a=this.createContainer(l);l.insertBefore(a,n),a.appendChild(n)}}},isRemovable:function(n){return n.tagName.toLowerCase()==this.elementTagName&&Re(n)==this.elementSortedClassName&&this.elementHasProperties(n,this.elementProperties)&&!tt(n,this.attrExceptions)&&this.elementHasAttributes(n,this.elementAttributes)&&this.isModifiable(n)},isEmptyContainer:function(n){var r=n.childNodes.length;return n.nodeType==1&&this.isRemovable(n)&&(r==0||r==1&&this.isEmptyContainer(n.firstChild))},removeEmptyContainers:function(n){var r=this,i=n.getNodes([1],function(g){return r.isEmptyContainer(g)}),l=[n],a=c(l);re(i,function(g){Me(g,a)}),m(l,a)},undoToTextNode:function(n,r,i,l){if(!r.containsNode(i)){var a=r.cloneRange();a.selectNode(i),a.isPointInRange(r.endContainer,r.endOffset)&&(y(i,r.endContainer,r.endOffset,l),r.setEndAfter(i)),a.isPointInRange(r.startContainer,r.startOffset)&&(i=y(i,r.startContainer,r.startOffset,l))}this.isRemovable(i)?Be(i,l):He(i,this.className)},splitAncestorWithClass:function(n,r,i){var l=this.getSelfOrAncestorWithClass(n);l&&y(l,n,r,i)},undoToAncestor:function(n,r){this.isRemovable(n)?Be(n,r):He(n,this.className)},applyToRange:function(n,r){var i=this;r=r||[];var l=c(r||[]);n.splitBoundariesPreservingPositions(l),i.removeEmptyElements&&i.removeEmptyContainers(n);var a=je(n);if(a.length){re(a,function(v){!i.isIgnorableWhiteSpaceNode(v)&&!i.getSelfOrAncestorWithClass(v)&&i.isModifiable(v)&&i.applyToTextNode(v,l)});var g=a[a.length-1];n.setStartAndEnd(a[0],0,g,g.length),i.normalize&&i.postApply(a,n,l,!1),m(r,l)}var d=i.getEmptyElements(n);re(d,function(v){Te(v,i.className)})},applyToRanges:function(n){for(var r=n.length;r--;)this.applyToRange(n[r],n);return n},applyToSelection:function(n){var r=he.getSelection(n);r.setRanges(this.applyToRanges(r.getAllRanges()))},undoToRange:function(n,r){var i=this;r=r||[];var l=c(r);n.splitBoundariesPreservingPositions(l),i.removeEmptyElements&&i.removeEmptyContainers(n,l);var a=je(n),g,d,v=a[a.length-1];if(a.length){i.splitAncestorWithClass(n.endContainer,n.endOffset,l),i.splitAncestorWithClass(n.startContainer,n.startOffset,l);for(var b=0,O=a.length;b<O;++b)g=a[b],d=i.getSelfOrAncestorWithClass(g),d&&i.isModifiable(g)&&i.undoToAncestor(d,l);n.setStartAndEnd(a[0],0,v,v.length),i.normalize&&i.postApply(a,n,l,!0),m(r,l)}var E=i.getEmptyElements(n);re(E,function(U){He(U,i.className)})},undoToRanges:function(n){for(var r=n.length;r--;)this.undoToRange(n[r],n);return n},undoToSelection:function(n){var r=he.getSelection(n),i=he.getSelection(n).getAllRanges();this.undoToRanges(i),r.setRanges(i)},isAppliedToRange:function(n){if(n.collapsed||n.toString()=="")return!!this.getSelfOrAncestorWithClass(n.commonAncestorContainer);var r=n.getNodes([3]);if(r.length){for(var i=0,l;l=r[i++];)if(!this.isIgnorableWhiteSpaceNode(l)&&qe(n,l)&&this.isModifiable(l)&&!this.getSelfOrAncestorWithClass(l))return!1}return!0},isAppliedToRanges:function(n){var r=n.length;if(r==0)return!1;for(;r--;)if(!this.isAppliedToRange(n[r]))return!1;return!0},isAppliedToSelection:function(n){var r=he.getSelection(n);return this.isAppliedToRanges(r.getAllRanges())},toggleRange:function(n){this.isAppliedToRange(n)?this.undoToRange(n):this.applyToRange(n)},toggleSelection:function(n){this.isAppliedToSelection(n)?this.undoToSelection(n):this.applyToSelection(n)},getElementsWithClassIntersectingRange:function(n){var r=[],i=this;return n.getNodes([3],function(l){var a=i.getSelfOrAncestorWithClass(l);a&&!Xe(r,a)&&r.push(a)}),r},detach:function(){}};function ae(n,r,i){return new ie(n,r,i)}ie.util={hasClass:Ie,addClass:Te,removeClass:He,getClass:dt,hasSameClasses:Ne,hasAllClasses:L,replaceWithOwnChildren:Be,elementsHaveSameNonClassAttributes:et,elementHasNonClassAttributes:tt,splitNodeAt:y,isEditableElement:_e,isEditingHost:We,isEditable:nt},he.CssClassApplier=he.ClassApplier=ie,he.createClassApplier=ae,Ze.createAliasForDeprecatedMethod(he,"createCssClassApplier","createClassApplier",Oe)}),Se})})(bt);export{It as r};
