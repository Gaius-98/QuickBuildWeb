import{t as O,w as W,a as F,i as L,n as x,b as H,c as R}from"./nodemodule-@vueuse_shared@10.9.0_vue@3.4.21-IMP1eStj.js";import{n as K,r as P}from"./nodemodule-@vue_reactivity@3.4.21-DbkE7Gi6.js";import{n as $,m as q}from"./nodemodule-@vue_runtime-core@3.4.21-Cnn673wu.js";function B(e){var a;const r=O(e);return(a=r==null?void 0:r.$el)!=null?a:r}const N=L?window:void 0;function j(...e){let a,r,o,d;if(typeof e[0]=="string"||Array.isArray(e[0])?([r,o,d]=e,a=N):[a,r,o,d]=e,!a)return x;Array.isArray(r)||(r=[r]),Array.isArray(o)||(o=[o]);const y=[],g=()=>{y.forEach(s=>s()),y.length=0},A=(s,i,m,l)=>(s.addEventListener(i,m,l),()=>s.removeEventListener(i,m,l)),E=q(()=>[B(a),O(d)],([s,i])=>{if(g(),!s)return;const m=H(i)?{...i}:i;y.push(...r.flatMap(l=>o.map(S=>A(s,l,S,m))))},{immediate:!0,flush:"post"}),p=()=>{E(),g()};return R(p),p}const b=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},v="__vueuse_ssr_handlers__",G=I();function I(){return v in b||(b[v]=b[v]||{}),b[v]}function Q(e,a){return G[e]||a}function U(e){return e==null?"any":e instanceof Set?"set":e instanceof Map?"map":e instanceof Date?"date":typeof e=="boolean"?"boolean":typeof e=="string"?"string":typeof e=="object"?"object":Number.isNaN(e)?"any":"number"}const X={boolean:{read:e=>e==="true",write:e=>String(e)},object:{read:e=>JSON.parse(e),write:e=>JSON.stringify(e)},number:{read:e=>Number.parseFloat(e),write:e=>String(e)},any:{read:e=>e,write:e=>String(e)},string:{read:e=>e,write:e=>String(e)},map:{read:e=>new Map(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e.entries()))},set:{read:e=>new Set(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e))},date:{read:e=>new Date(e),write:e=>e.toISOString()}},z="vueuse-storage";function ee(e,a,r,o={}){var d;const{flush:y="pre",deep:g=!0,listenToStorageChanges:A=!0,writeDefaults:E=!0,mergeDefaults:p=!1,shallow:s,window:i=N,eventFilter:m,onError:l=t=>{console.error(t)},initOnMounted:S}=o,f=(s?K:P)(typeof a=="function"?a():a);if(!r)try{r=Q("getDefaultStorage",()=>{var t;return(t=N)==null?void 0:t.localStorage})()}catch(t){l(t)}if(!r)return f;const c=O(a),_=U(c),w=(d=o.serializer)!=null?d:X[_],{pause:C,resume:D}=W(f,()=>M(f.value),{flush:y,deep:g,eventFilter:m});i&&A&&F(()=>{j(i,"storage",h),j(i,z,V),S&&h()}),S||h();function J(t,n){i&&i.dispatchEvent(new CustomEvent(z,{detail:{key:e,oldValue:t,newValue:n,storageArea:r}}))}function M(t){try{const n=r.getItem(e);if(t==null)J(n,null),r.removeItem(e);else{const u=w.write(t);n!==u&&(r.setItem(e,u),J(n,u))}}catch(n){l(n)}}function T(t){const n=t?t.newValue:r.getItem(e);if(n==null)return E&&c!=null&&r.setItem(e,w.write(c)),c;if(!t&&p){const u=w.read(n);return typeof p=="function"?p(u,c):_==="object"&&!Array.isArray(u)?{...c,...u}:u}else return typeof n!="string"?n:w.read(n)}function h(t){if(!(t&&t.storageArea!==r)){if(t&&t.key==null){f.value=c;return}if(!(t&&t.key!==e)){C();try{(t==null?void 0:t.newValue)!==w.write(f.value)&&(f.value=T(t))}catch(n){l(n)}finally{t?$(D):D()}}}}function V(t){h(t.detail)}return f}export{ee as u};
