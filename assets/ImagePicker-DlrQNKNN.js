import{a as y}from"./resource-CnWs88XE.js";import{d as z,N as U,O as V,r as d,p as R,q as u,e as t,u as m,ak as F,al as D,ai as E,a2 as Q,w as C,v as g,am as T,V as Y,P as j,h as I,an as A,Q as G,Y as H,ao as J,a as K,o as p,B as W,ap as X,aq as Z}from"./.pnpm-DVFE1QU-.js";/* empty css                                                                    */import{_ as ee}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./iconfont-fCxWMeQn.js";const ae=i=>(X("data-v-678baa60"),i=i(),Z(),i),te={class:"image-picker"},se=ae(()=>g("div",{class:"select-image-text"},"选择图片",-1)),oe={key:1,class:"preview-image"},ne={class:"image-container"},le={class:"image-list"},ie=["src","onClick"],ce=z({__name:"ImagePicker",props:{value:{type:String,required:!0},valueModifiers:{}},emits:U(["change"],["update:value"]),setup(i,{emit:N}){const v=V(i,"value"),_=d([]),o=d({pageSize:3,pageNumber:1,keyword:""}),b=d(0),O="/prod",r=d(""),P=e=>{r.value=e},L=()=>{o.value.pageNumber++,h()},h=()=>{y.getList(o.value).then(e=>{const{code:a,data:n,msg:l}=e;a==200&&(_.value=n.data,b.value=n.total)})},M=()=>{o.value.pageNumber--,h()},S=e=>{const a=new FormData;a.append("file",e.file,encodeURIComponent(e.file.name)),y.add(a).then(n=>{const{code:l,data:k,msg:x}=n;l==200&&(f(`${O}/${k.path}`),K.success(x),c.value=!1)})},c=d(!1),B=()=>{c.value=!0},$=N,f=e=>{v.value=e,$("change",e)},q=()=>{f(r.value),w()},w=()=>{r.value="",c.value=!1};return R(()=>{h()}),(e,a)=>{const n=E,l=Y,k=T,x=Q;return p(),u("div",te,[v.value?(p(),u("div",oe,[t(m(D),{onClick:a[0]||(a[0]=s=>f("")),style:{position:"absolute",top:"5px",right:"5px",color:"#999","z-index":"99"}}),t(n,{src:v.value,width:"100px",height:"100px"},null,8,["src"])])):(p(),u("div",{key:0,class:"select-image",onClick:B},[t(m(F)),se])),t(x,{open:c.value,"onUpdate:open":a[1]||(a[1]=s=>c.value=s),title:"选择图片",onOk:q,onCancel:w},{default:C(()=>[t(k,{name:"file",accept:"image/*",customRequest:S,maxCount:"1",showUploadList:!1},{default:C(()=>[t(l,{type:"primary"},{default:C(()=>[j("自定义")]),_:1})]),_:1}),g("div",ne,[t(l,{type:"ghost",icon:I(m(A)),onClick:M,disabled:o.value.pageNumber==1},null,8,["icon","disabled"]),g("div",le,[(p(!0),u(G,null,H(_.value,s=>(p(),u("div",{key:s.id,class:W(["image-item",{selected:r.value==s.path}])},[g("img",{src:s.path,onClick:de=>P(s.path),height:"100px",width:"100px"},null,8,ie)],2))),128))]),t(l,{type:"ghost",icon:I(m(J)),onClick:L,disabled:o.value.pageSize*(o.value.pageNumber-1)+_.value.length==b.value},null,8,["icon","disabled"])])]),_:1},8,["open"])])}}}),ve=ee(ce,[["__scopeId","data-v-678baa60"]]);export{ve as default};
