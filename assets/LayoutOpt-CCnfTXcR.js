import{u as L,j as z,b as E}from"./main-D-EBJ27A.js";import{g as S,bD as J,s as K,u as M,Q as T,n as H,G as Q,o as c,h as w,D as W,i as e,aV as N,aD as X,aP as $,y as b,B as l,a4 as j,aN as Y,K as a,bE as Z,bF as ee,aA as te,a3 as oe,l as t,w as s,O as se,W as ne,bG as ae,bo as le,bH as ie,N as r,aJ as ce,bI as ue,bJ as re,U as _e,au as de,av as pe,bK as me}from"./.pnpm-Tz7u9Cxq.js";import{_ as O}from"./_plugin-vue_export-helper-DlAUqK2U.js";const ge=S({__name:"LayoutMenu",setup(B){const _=J(),h=L(),{menuTree:f,themeCfg:y}=K(h),d=M("quick-build-menu-selected",[],sessionStorage),p=M("quick-build-menu-open",[],sessionStorage),i=T(()=>k(f.value)),k=n=>n.map(o=>{let m={key:(o==null?void 0:o.id)||"",...o};return m.icon&&(m.icon=H("span",{class:`iconfont icon-${m.icon}`})),o.children&&(m.children=k(o.children)),m});Q(()=>_.query,()=>{const{menuId:n}=_.query;n&&(d.value=[n])},{immediate:!0});const C=({item:n})=>{const{originItemValue:o}=n;z(o)};return(n,o)=>{const m=X;return c(),w(m,W(n.$attrs,{items:i.value,theme:e(y).menuTheme,onSelect:C,openKeys:e(p),"onUpdate:openKeys":o[0]||(o[0]=v=>N(p)?p.value=v:null),selectedKeys:e(d),"onUpdate:selectedKeys":o[1]||(o[1]=v=>N(d)?d.value=v:null),style:{height:"100%","overflow-y":"auto"},class:"gaius-menu"}),null,16,["items","theme","openKeys","selectedKeys"])}}}),Te=O(ge,[["__scopeId","data-v-6f83061e"]]),fe={class:"logo"},he=["src"],ye=S({__name:"LayoutLogo",setup(B){$(p=>({"2c5c8f8c":e(h).headerFontColor,32770384:e(h).headerBgColor}));const _=L(),{themeCfg:h,collapsed:f,systemSetting:y}=K(_),{onToggleCollapsed:d}=_;return(p,i)=>(c(),b("div",fe,[l("img",{src:e(y).projectLogo,alt:""},null,8,he),j(l("span",{class:"title"},a(e(y).projectName),513),[[Y,!e(f)]]),e(f)?(c(),w(e(Z),{key:0,class:"trigger",onClick:e(d)},null,8,["onClick"])):(c(),w(e(ee),{key:1,class:"trigger",onClick:e(d)},null,8,["onClick"]))]))}}),$e=O(ye,[["__scopeId","data-v-b6204024"]]),be={class:"layout-opt"},ve={class:"layout-opt-notice",title:"通知"},ke={class:"content",style:{display:"flex","flex-direction":"column"}},xe={key:0,class:"notice-list",style:{padding:"0 5px"}},we={class:"title",style:{"font-size":"14px","font-weight":"bold"}},Ce=["title"],Ie={style:{flex:"1","white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis"}},Le={class:"layout-opt-userinfo",title:"用户信息"},Se=["src"],Ke={class:"layout-opt-userinfo-name"},Oe=S({__name:"LayoutOpt",setup(B){$(I=>({"6d698934":e(p).headerFontColor,"3c3a6a04":e(p).headerBgColor}));const _=te(),{removeToken:h}=E(),f=L(),y=T(()=>C.value.map(I=>I.roleName).join(",")),{local:d,themeCfg:p,userInfo:i,orgInfo:k,roleInfo:C,noticeInfo:n}=K(f),{onOpenConfigDrawer:o,onToggleLocal:m}=f,v=()=>{window.open("https://github.com/Gaius-98/quick-build","_blank")},G=()=>{h(),_.push({path:"/login"})},V=()=>{_.push({path:"/system/notice-message"})};return(I,x)=>{const q=ce,F=ue,D=re,R=_e,g=de,P=pe,U=me,A=oe("has-perm");return c(),b("div",be,[j((c(),b("div",ve,[t(D,{title:"通知",trigger:"click"},{content:s(()=>[l("div",ke,[e(n)&&e(n).list.length>0?(c(),b("div",xe,[(c(!0),b(se,null,ne(e(n).list,u=>(c(),b("div",{key:u.id,style:{display:"flex","flex-direction":"column","justify-items":"flex-start","border-bottom":"1px solid rgba(5, 5, 5, 0.06)",padding:"5px",width:"200px"}},[l("div",we,a(u.notice.title),1),l("div",{class:"content",title:u.notice.content,style:{display:"flex",width:"100%"}},[l("div",Ie,a(u.notice.content),1),l("a",{style:{width:"50px","text-decoration":"underline"},onClick:x[0]||(x[0]=Be=>V())},"查看 ")],8,Ce)]))),128))])):(c(),w(q,{key:1}))])]),default:s(()=>[t(F,{count:e(n).total,"overflow-count":3,class:"badge"},null,8,["count"]),t(e(ae))]),_:1})])),[[A,"private:notice:limit"]]),l("div",{class:"layout-opt-theme",onClick:x[1]||(x[1]=(...u)=>e(o)&&e(o)(...u)),title:"主题配置"},[t(e(le))]),l("div",{class:"layout-opt-github",onClick:v,title:"github"},[t(e(ie))]),l("div",Le,[t(D,{placement:"bottomRight"},{content:s(()=>[t(R,{onClick:G,block:""},{default:s(()=>[r(" 退出 ")]),_:1})]),title:s(()=>[t(P,{title:"用户信息",size:"small",column:2,style:{width:"400px"}},{default:s(()=>[t(g,{label:"姓名"},{default:s(()=>[r(a(e(i).name),1)]),_:1}),t(g,{label:"用户名"},{default:s(()=>[r(a(e(i).username),1)]),_:1}),t(g,{label:"邮箱"},{default:s(()=>[r(a(e(i).email),1)]),_:1}),t(g,{label:"手机"},{default:s(()=>[r(a(e(i).phone),1)]),_:1}),t(g,{label:"角色"},{default:s(()=>[r(a(y.value),1)]),_:1}),t(g,{label:"所属机构"},{default:s(()=>{var u;return[r(a((u=e(k))==null?void 0:u.name),1)]}),_:1}),t(g,{label:"上次登录IP",span:2},{default:s(()=>[r(a(e(i).lastLoginIp),1)]),_:1}),t(g,{label:"登录IP",span:2},{default:s(()=>[r(a(e(i).loginIp),1)]),_:1})]),_:1})]),default:s(()=>[t(U,null,{icon:s(()=>[l("img",{src:e(i).avatar||"",alt:""},null,8,Se)]),_:1}),l("span",Ke,a(e(i).name),1)]),_:1})])])}}}),je=O(Oe,[["__scopeId","data-v-4b30badd"]]);export{$e as L,je as a,Te as b};
