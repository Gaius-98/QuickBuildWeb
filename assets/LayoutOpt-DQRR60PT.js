import{u as L,j as U,b as A}from"./index-BiCObBSq.js";import{g as S,bl as E,s as M,u as N,D as $,n as H,aB as J,o as r,h as C,P as Q,i as e,aT as T,az as W,aM as D,y,J as l,M as j,N as X,O as a,bm as Y,bn as Z,aw as ee,$ as te,l as t,w as o,F as oe,Q as se,bo as ne,b9 as ae,bp as le,B as d,aH as ie,bq as ce,br as re,a3 as ue,aq as _e,ar as de,bs as pe}from"./.pnpm-BIJ-Bq4G.js";import{_ as B}from"./_plugin-vue_export-helper-DlAUqK2U.js";const me=S({__name:"LayoutMenu",setup(O){const p=E(),g=L(),{menuTree:f,themeCfg:b}=M(g),c=N("gaius-admin-menu-selected",[],sessionStorage),s=N("gaius-admin-menu-open",[],sessionStorage),x=$(()=>w(f.value)),w=i=>i.map(n=>{let u={key:(n==null?void 0:n.id)||"",...n};return u.icon&&(u.icon=H("span",{class:`iconfont icon-${u.icon}`})),n.children&&(u.children=w(n.children)),u});J(()=>p.query,()=>{const{menuId:i}=p.query;i&&(c.value=[i])},{immediate:!0});const h=({item:i})=>{const{originItemValue:n}=i;U(n)};return(i,n)=>{const u=W;return r(),C(u,Q(i.$attrs,{items:x.value,theme:e(b).menuTheme,onSelect:h,openKeys:e(s),"onUpdate:openKeys":n[0]||(n[0]=v=>T(s)?s.value=v:null),selectedKeys:e(c),"onUpdate:selectedKeys":n[1]||(n[1]=v=>T(c)?c.value=v:null),style:{height:"100%","overflow-y":"auto"},class:"gaius-menu"}),null,16,["items","theme","openKeys","selectedKeys"])}}}),Te=B(me,[["__scopeId","data-v-a8b0e51d"]]),ge={class:"logo"},fe=["src"],he=S({__name:"LayoutLogo",setup(O){D(s=>({"2c5c8f8c":e(g).headerFontColor,32770384:e(g).headerBgColor}));const p=L(),{themeCfg:g,collapsed:f,systemSetting:b}=M(p),{onToggleCollapsed:c}=p;return(s,x)=>(r(),y("div",ge,[l("img",{src:e(b).projectLogo,alt:""},null,8,fe),j(l("span",{class:"title"},a(e(b).projectName),513),[[X,!e(f)]]),e(f)?(r(),C(e(Y),{key:0,class:"trigger",onClick:e(c)},null,8,["onClick"])):(r(),C(e(Z),{key:1,class:"trigger",onClick:e(c)},null,8,["onClick"]))]))}}),$e=B(he,[["__scopeId","data-v-b6204024"]]),ye={class:"layout-opt"},be={class:"layout-opt-notice",title:"通知"},ve={class:"content",style:{display:"flex","flex-direction":"column"}},xe={key:0,class:"notice-list",style:{padding:"0 5px"}},we={class:"title",style:{"font-size":"14px","font-weight":"bold"}},ke=["title"],Ce={style:{flex:"1","white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis"}},Ie={class:"layout-opt-userinfo",title:"用户信息"},Le=["src"],Se={class:"layout-opt-userinfo-name"},Me=S({__name:"LayoutOpt",setup(O){D(I=>({"2eb059ea":e(c).headerFontColor,"28f25134":e(c).headerBgColor}));const p=ee(),g=L(),f=$(()=>w.value.map(I=>I.roleName).join(",")),{local:b,themeCfg:c,userInfo:s,orgInfo:x,roleInfo:w,noticeInfo:h}=M(g),{onOpenConfigDrawer:i,onToggleLocal:n}=g,u=()=>{window.open("https://github.com/Gaius-98/gaius-admin","_blank")},v=()=>{A.remove(),p.push({path:"/login"})},F=()=>{p.push({path:"/system/notice-message"})};return(I,k)=>{const R=ie,V=ce,K=re,q=ue,m=_e,G=de,P=pe,z=te("has-perm");return r(),y("div",ye,[j((r(),y("div",be,[t(K,{title:"通知",trigger:"click"},{content:o(()=>[l("div",ve,[e(h)&&e(h).list.length>0?(r(),y("div",xe,[(r(!0),y(oe,null,se(e(h).list,_=>(r(),y("div",{key:_.id,style:{display:"flex","flex-direction":"column","justify-items":"flex-start","border-bottom":"1px solid rgba(5, 5, 5, 0.06)",padding:"5px",width:"200px"}},[l("div",we,a(_.notice.title),1),l("div",{class:"content",title:_.notice.content,style:{display:"flex",width:"100%"}},[l("div",Ce,a(_.notice.content),1),l("a",{style:{width:"50px","text-decoration":"underline"},onClick:k[0]||(k[0]=Be=>F())},"查看 ")],8,ke)]))),128))])):(r(),C(R,{key:1}))])]),default:o(()=>[t(V,{count:e(h).total,"overflow-count":3,class:"badge"},null,8,["count"]),t(e(ne))]),_:1})])),[[z,"private:notice:limit"]]),l("div",{class:"layout-opt-theme",onClick:k[1]||(k[1]=(..._)=>e(i)&&e(i)(..._)),title:"主题配置"},[t(e(ae))]),l("div",{class:"layout-opt-github",onClick:u,title:"github"},[t(e(le))]),l("div",Ie,[t(K,{placement:"bottomRight"},{content:o(()=>[t(q,{onClick:v,block:""},{default:o(()=>[d(" 退出 ")]),_:1})]),title:o(()=>[t(G,{title:"用户信息",size:"small",column:2,style:{width:"400px"}},{default:o(()=>[t(m,{label:"姓名"},{default:o(()=>[d(a(e(s).name),1)]),_:1}),t(m,{label:"用户名"},{default:o(()=>[d(a(e(s).username),1)]),_:1}),t(m,{label:"邮箱"},{default:o(()=>[d(a(e(s).email),1)]),_:1}),t(m,{label:"手机"},{default:o(()=>[d(a(e(s).phone),1)]),_:1}),t(m,{label:"角色"},{default:o(()=>[d(a(f.value),1)]),_:1}),t(m,{label:"所属机构"},{default:o(()=>{var _;return[d(a((_=e(x))==null?void 0:_.name),1)]}),_:1}),t(m,{label:"上次登录IP",span:2},{default:o(()=>[d(a(e(s).lastLoginIp),1)]),_:1}),t(m,{label:"登录IP",span:2},{default:o(()=>[d(a(e(s).loginIp),1)]),_:1})]),_:1})]),default:o(()=>[t(P,null,{icon:o(()=>[l("img",{src:e(s).avatar||"",alt:""},null,8,Le)]),_:1}),l("span",Se,a(e(s).name),1)]),_:1})])])}}}),De=B(Me,[["__scopeId","data-v-bd1b921e"]]);export{$e as L,De as a,Te as b};
