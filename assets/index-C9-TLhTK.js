import{a as S}from"./api-C_N5wYVs.js";import{d as M}from"./api-BRXewGfY.js";import{d as P,bf as H,r as m,p as J,q as f,f as s,w as a,$ as d,v as O,H as k,e as u,I as v,M as U,J as D,a as G,cj as K,bj as Q,o as r}from"./iconfont-DlnTACa0.js";import{C as W}from"./index-DWh7MMD2.js";import{F as X,_ as Y}from"./index-3zxQoAaC.js";import{I as Z}from"./index-DstlK8U5.js";import{B as ee}from"./EyeOutlined-MSEk9XoR.js";import{T as te}from"./index-CcL4KyIF.js";import{_ as ae}from"./index-C5YNH3Jl.js";import{_ as oe}from"./index-b8kqwElj.js";import{_ as ne}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-DFAyz8EE.js";import"./useFlexGapSupport-CiVQ43IU.js";import"./_getPrototype-CreJcRG-.js";import"./initDefaultProps-CCuNUPvT.js";import"./CheckOutlined-DhghRCOv.js";import"./index-CkgH7Yyy.js";import"./shallowequal-CYaRVoeZ.js";import"./index-Cj_T3PZy.js";import"./PlusOutlined-boFLuxir.js";import"./cloneDeep-eMWwQ7HD.js";import"./Col-7N7sU2gK.js";import"./index-C6qv0Jk3.js";import"./RadioButton-CjVxn_Oc.js";import"./pickAttrs-C_Pg0-pd.js";import"./css-CjeDAR7Q.js";import"./index-DVHdQjvX.js";import"./LeftOutlined-DjA3wwZo.js";import"./RightOutlined-DiQ8sQL1.js";import"./useBreakpoint-BBubvWxm.js";import"./zh_CN-CAyhejr6.js";import"./index-BZJkr9T5.js";import"./dropdown-CS9IU7I3.js";import"./index-BJM6GpkM.js";import"./ActionButton-GOh5bmF9.js";const se={class:"dataset"},re={class:"tools"},ie={key:0},de=P({__name:"index",setup(ce){const h=K(),n=H({keyword:"",pageNumber:1,pageSize:20}),C=m([]),F=m([{title:"数据集名称",key:"datasetName",dataIndex:"datasetName"},{title:"关联数据源",key:"datasourceId",dataIndex:"datasourceId"},{title:"状态",key:"status",dataIndex:"status"},{title:"备注",key:"remark",dataIndex:"remark"},{title:"创建时间",key:"createTime",dataIndex:"createTime"},{title:"操作",key:"action",dataIndex:"action",width:"250px"}]),g=m(!1),w=m(),z=()=>{var e;(e=w.value)==null||e.resetFields(),p()},x=m(0),B=()=>{n.pageNumber=1,n.pageSize=20,p()},T=e=>{const{current:t,pageSize:o}=e;n.pageNumber=t,n.pageSize=o,p()},p=()=>{g.value=!0,S.getList(n).then(e=>{const{code:t,data:o}=e;t==200&&(C.value=o.data,x.value=o.total),g.value=!1})},b=m([]),$=e=>{var t;return(t=b.value.find(o=>o.id===e))==null?void 0:t.datasourceName},L=async e=>{const{code:t,msg:o,data:i}=await S.remove(e.id);t==200&&(G.success(i),p())},V=async e=>{const{id:t}=e,i=h.resolve({path:"/design/dataset",query:{type:"edit",id:t}});window.open(i.href,"_blank")};J(()=>{p(),M.getList("").then(e=>{const{code:t,data:o,msg:i}=e;t==200&&(b.value=o)})});const q=()=>{const e=h.resolve({path:"/design/dataset",query:{type:"add"}});window.open(e.href,"_blank")};return(e,t)=>{const o=Z,i=Y,l=ee,R=X,I=W,N=te,j=oe,A=ae,y=Q("has-perm");return r(),f("div",se,[s(I,{class:"search-area"},{default:a(()=>[s(R,{ref_key:"searchFormRef",ref:w,model:n,layout:"inline",onFinish:B},{default:a(()=>[s(i,{label:"数据集名称",name:"keyword"},{default:a(()=>[s(o,{value:n.keyword,"onUpdate:value":t[0]||(t[0]=c=>n.keyword=c)},null,8,["value"])]),_:1}),s(i,null,{default:a(()=>[s(l,{type:"primary","html-type":"submit"},{default:a(()=>[d("搜索")]),_:1}),s(l,{style:{margin:"0 8px"},onClick:z},{default:a(()=>[d(" 重置 ")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),s(I,null,{default:a(()=>[O("div",re,[k((r(),u(l,{type:"primary",onClick:t[1]||(t[1]=c=>q())},{default:a(()=>[d("新增")]),_:1})),[[y,"lowcode:dataset:add"]])]),s(A,{loading:g.value,columns:F.value,"data-source":C.value,scroll:{y:600},onChange:T,pagination:{current:n.pageNumber,total:x.value,showSizeChanger:!0,pageSize:n.pageSize}},{bodyCell:a(({column:c,record:_})=>[c.key=="datasourceId"?(r(),f("div",ie,U($(_.datasourceId)),1)):v("",!0),c.key=="status"?(r(),f(D,{key:1},[_.status=="1"?(r(),u(N,{key:0,color:"#87d068"},{default:a(()=>[d("启用")]),_:1})):(r(),u(N,{key:1,color:"#f50"},{default:a(()=>[d("停用")]),_:1}))],64)):v("",!0),c.key=="action"?(r(),f(D,{key:2},[k((r(),u(l,{type:"link",onClick:E=>V(_)},{default:a(()=>[d("编辑")]),_:2},1032,["onClick"])),[[y,"lowcode:dataset:update"]]),s(j,{title:"确定要删除吗?","ok-text":"确定","cancel-text":"取消",onConfirm:E=>L(_)},{default:a(()=>[k((r(),u(l,{type:"link",danger:""},{default:a(()=>[d("删除")]),_:1})),[[y,"lowcode:dataset:remove"]])]),_:2},1032,["onConfirm"])],64)):v("",!0)]),_:1},8,["loading","columns","data-source","pagination"])]),_:1})])}}}),Oe=ne(de,[["__scopeId","data-v-ce51cd70"]]);export{Oe as default};
