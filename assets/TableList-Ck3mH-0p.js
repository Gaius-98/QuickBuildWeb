import{r as f}from"./index-D1mYOa1m.js";import{g as Z,ar as ee,r,O as te,P as ne,o as l,y as c,l as e,w as t,Q as ae,R as oe,T as le,B as u,J as se,i as k,aw as ie,h as m,F as x,K as re,ax as ue,ay as _e,az as ce,U as de,L as pe,aj as me,V as h,e as ye,W as fe,X as ke,ap as ve,Y as ge,aq as he,$ as Ce,aA as be,a1 as we,aB as xe,a0 as $e,C as Fe,a9 as Ie,a2 as Oe,aC as Te}from"./.pnpm-Cl1qeBT1.js";import{_ as Be}from"./_plugin-vue_export-helper-DlAUqK2U.js";const R={getList:s=>f({method:"get",url:"table/list",params:s}),getDetail:s=>f({method:"get",url:"table/detail",params:{id:s}}),remove:s=>f({method:"get",url:"table/remove",params:{id:s}}),add:s=>f({method:"post",url:"table/add",data:s}),update:s=>f({method:"post",url:"table/update",data:s})},De={class:"lowcode-table"},Le={class:"tools"},Ne={key:1},Ve={key:0,class:"contain"},Ee={key:0},Re=Z({__name:"TableList",setup(s){const $=ee(),S=r([{title:"列表id",key:"id",dataIndex:"id",ellipsis:!0},{title:"列表名称",key:"name",dataIndex:"name"},{title:"状态",key:"status",dataIndex:"status",width:100},{title:"备注",key:"remark",dataIndex:"remark",ellipsis:!0},{title:"创建时间",key:"createTime",dataIndex:"createTime"},{title:"操作",key:"action",dataIndex:"action",width:"250px"}]),d=te({keyword:"",pageNumber:1,pageSize:10}),v=r([]),F=r(0),I=r(!1),O=r(),U=()=>{var o;(o=O.value)==null||o.resetFields(),y()},q=()=>{ye.success("复制成功！")},g=r("table"),M=()=>{g.value=="table"?g.value="visual":g.value="table"},y=()=>{I.value=!0,R.getList(d).then(o=>{const{code:a,data:p}=o;a==200&&(v.value=p.data,F.value=p.total),I.value=!1})},j=()=>{const o=$.resolve({path:"/design/table"});window.open(o.href,"_blank")},T=o=>{const a=$.resolve({path:"/design/table",query:{id:o}});window.open(a.href,"_blank")},B=o=>{R.remove(o).then(a=>{const{code:p}=a;p==200&&y()})},C=r(!1);r({});const z=r(""),D=o=>{C.value=!0,z.value=o};return ne(()=>{y()}),(o,a)=>{const p=fe,A=ke,L=ve,_=ge,J=he,P=Ce,b=ae,K=be,N=we,Q=xe,V=$e,E=Fe,W=Ie,X=Oe,Y=Te,G=oe,H=le("copy");return l(),c("div",De,[e(b,{class:"search-area"},{default:t(()=>[e(P,{ref_key:"searchFormRef",ref:O,model:d,onFinish:y},{default:t(()=>[e(J,{gutter:24},{default:t(()=>[e(L,{span:4},{default:t(()=>[e(A,{label:"列表名称",name:"keyword"},{default:t(()=>[e(p,{value:d.keyword,"onUpdate:value":a[0]||(a[0]=n=>d.keyword=n)},null,8,["value"])]),_:1})]),_:1}),e(L,{span:4,style:{"text-align":"right"}},{default:t(()=>[e(_,{type:"primary","html-type":"submit"},{default:t(()=>[u("搜索")]),_:1}),e(_,{style:{margin:"0 8px"},onClick:U},{default:t(()=>[u(" 重置 ")]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(b,null,{default:t(()=>[se("div",Le,[e(_,{type:"primary",onClick:j},{default:t(()=>[u("新增")]),_:1}),e(_,{onClick:M,type:"link",style:{float:"right"}},{default:t(()=>[e(k(ie))]),_:1})]),v.value.length===0?(l(),m(K,{key:0})):(l(),c("div",Ne,[g.value=="visual"?(l(),c("div",Ve,[(l(!0),c(x,null,re(v.value,n=>(l(),m(b,{hoverable:!0,key:n.id},{actions:t(()=>[e(k(ue),{key:"view",title:"预览",onClick:i=>D(n.id)},null,8,["onClick"]),e(k(_e),{key:"edit",title:"编辑",onClick:i=>T(n.id)},null,8,["onClick"]),e(N,{title:"确定要删除吗?","ok-text":"确定","cancel-text":"取消",onConfirm:i=>B(n.id)},{default:t(()=>[e(k(ce),{key:"delete",title:"删除"})]),_:2},1032,["onConfirm"])]),default:t(()=>[e(Q,{title:n.name,description:n.description},null,8,["title","description"])]),_:2},1024))),128))])):(l(),m(X,{key:1,columns:S.value,"data-source":v.value,pagination:!1,scroll:{y:470}},{bodyCell:t(({column:n,record:i})=>[n.key=="id"?de((l(),c("span",Ee,[u(pe(i.id)+" ",1),e(k(me),{style:{cursor:"pointer"},onClick:a[1]||(a[1]=w=>q())})])),[[H,i.id]]):h("",!0),n.key=="status"?(l(),c(x,{key:1},[i.status?(l(),m(V,{key:0,color:"#87d068"},{default:t(()=>[u("启用")]),_:1})):(l(),m(V,{key:1,color:"#f50"},{default:t(()=>[u("停用")]),_:1}))],64)):h("",!0),n.key=="action"?(l(),c(x,{key:2},[e(_,{type:"link",onClick:w=>D(i.id)},{default:t(()=>[u("预览")]),_:2},1032,["onClick"]),e(E,{type:"vertical"}),e(_,{type:"link",onClick:w=>T(i.id)},{default:t(()=>[u("编辑")]),_:2},1032,["onClick"]),e(E,{type:"vertical"}),e(N,{title:"确定要删除吗?","ok-text":"确定","cancel-text":"取消",onConfirm:w=>B(i.id)},{default:t(()=>[e(_,{type:"link",danger:""},{default:t(()=>[u("删除")]),_:1})]),_:2},1032,["onConfirm"])],64)):h("",!0),n.key=="img"?(l(),m(W,{key:3,src:i.img,height:"100px",width:"100%"},null,8,["src"])):h("",!0)]),_:1},8,["columns","data-source"]))])),e(Y,{style:{display:"flex","justify-content":"flex-end"},current:d.pageNumber,"onUpdate:current":a[2]||(a[2]=n=>d.pageNumber=n),total:F.value,"show-less-items":"",onChange:a[3]||(a[3]=n=>y())},null,8,["current","total"])]),_:1}),e(G,{open:C.value,"onUpdate:open":a[4]||(a[4]=n=>C.value=n),title:"预览",width:"1000px",height:"800px",footer:null},null,8,["open"])])}}}),Me=Be(Re,[["__scopeId","data-v-9d121eb5"]]);export{Me as default};
