import{a as S}from"./notice-wAlKWs77.js";import{d as j,bf as q,r,p as E,c as J,q as T,f as o,w as e,$ as l,I as h,H as A,J as G,e as g,M as _,bj as K,o as m}from"./iconfont-DlnTACa0.js";import{C as Q}from"./index-DWh7MMD2.js";import{M as W}from"./index-rRoPRs5X.js";import{F as X,_ as Z}from"./index-3zxQoAaC.js";import{I as ee}from"./index-DstlK8U5.js";import{B as te}from"./EyeOutlined-MSEk9XoR.js";import{T as oe}from"./index-CcL4KyIF.js";import{D as ae,a as ne}from"./index-BFOsZcev.js";import{R as ie}from"./dayjs-78fL9Suk.js";import{_ as le}from"./index-C5YNH3Jl.js";import{_ as se}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-DFAyz8EE.js";import"./useFlexGapSupport-CiVQ43IU.js";import"./_getPrototype-CreJcRG-.js";import"./initDefaultProps-CCuNUPvT.js";import"./CheckOutlined-DhghRCOv.js";import"./index-CkgH7Yyy.js";import"./shallowequal-CYaRVoeZ.js";import"./index-Cj_T3PZy.js";import"./PlusOutlined-boFLuxir.js";import"./index-Df99mV5f.js";import"./pickAttrs-C_Pg0-pd.js";import"./ActionButton-GOh5bmF9.js";import"./cloneDeep-eMWwQ7HD.js";import"./Col-7N7sU2gK.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./RadioButton-CjVxn_Oc.js";import"./index-C6qv0Jk3.js";import"./css-CjeDAR7Q.js";import"./index-DVHdQjvX.js";import"./LeftOutlined-DjA3wwZo.js";import"./RightOutlined-DiQ8sQL1.js";import"./useBreakpoint-BBubvWxm.js";import"./zh_CN-CAyhejr6.js";import"./index-BZJkr9T5.js";import"./dropdown-CS9IU7I3.js";const re={class:"notice"},me=["title"],ce={key:2},pe=j({__name:"NotifyMessage",setup(ue){const a=q({keyword:"",pageNumber:1,pageSize:10,startTime:"",endTime:""}),p=r(""),F=()=>{p.value?(a.startTime=p.value[0],a.endTime=p.value[1]):(a.startTime="",a.endTime="")},C=r([]),z=r([{title:"标题",key:"title",dataIndex:"title",width:"150px"},{title:"内容",key:"content",dataIndex:"content",width:"500px",ellipsis:!0},{title:"状态",key:"status",dataIndex:"status",width:"100px"},{title:"消息发送时间",key:"createTime",dataIndex:"createTime"},{title:"操作",key:"action",dataIndex:"action",width:"250px"}]),w=r(!1),I=r(),B=()=>{var i;(i=I.value)==null||i.resetFields(),a.startTime="",a.endTime="",p.value="",f()},D=r(0),R=()=>{a.pageNumber=1,a.pageSize=10,f()},V=i=>{const{current:t,pageSize:s}=i;a.pageNumber=t,a.pageSize=s,f()},f=()=>{w.value=!0,S.getNoticeList(a).then(i=>{const{code:t,data:s}=i;t==200&&(C.value=s.data,D.value=s.total),w.value=!1})},N=r([]),Y=r({});E(()=>{f(),J.getDict(["configType"]).then(i=>{const{code:t,data:s,msg:y}=i;t==200&&(N.value=s.configType,Y.value=N.value.reduce((k,d)=>(k[d.value]=d.label,k),{}))})});const x=r(!1),u=r({id:0,noticeId:0,recevieId:"",status:"",notice:{title:"",content:""}}),$=async i=>{const{code:t,data:s}=await S.getNoticeDetail(i.id);t==200&&(u.value=s,x.value=!0)};return(i,t)=>{const s=ee,y=Z,k=ie,d=te,H=X,M=Q,b=oe,L=le,v=ne,P=ae,U=W,O=K("has-perm");return m(),T("div",re,[o(M,{class:"search-area"},{default:e(()=>[o(H,{ref_key:"searchFormRef",ref:I,model:a,layout:"inline",onFinish:R},{default:e(()=>[o(y,{label:"关键字",prop:"keyword"},{default:e(()=>[o(s,{value:a.keyword,"onUpdate:value":t[0]||(t[0]=n=>a.keyword=n)},null,8,["value"])]),_:1}),o(y,{label:"日期范围"},{default:e(()=>[o(k,{value:p.value,"onUpdate:value":t[1]||(t[1]=n=>p.value=n),showTime:!0,valueFormat:"YYYY-MM-DD HH:mm:ss",onChange:t[2]||(t[2]=n=>F())},null,8,["value"])]),_:1}),o(y,null,{default:e(()=>[o(d,{type:"primary","html-type":"submit"},{default:e(()=>[l("搜索")]),_:1}),o(d,{style:{margin:"0 8px"},onClick:B},{default:e(()=>[l(" 重置 ")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),o(M,null,{default:e(()=>[o(L,{loading:w.value,columns:z.value,"data-source":C.value,scroll:{y:560},onChange:V,pagination:{current:a.pageNumber,total:D.value,showSizeChanger:!0,pageSize:a.pageSize}},{bodyCell:e(({column:n,record:c})=>[n.key=="status"?(m(),T(G,{key:0},[c.status=="1"?(m(),g(b,{key:0,color:"#87d068"},{default:e(()=>[l("已读")]),_:1})):(m(),g(b,{key:1,color:"#f50"},{default:e(()=>[l("未读")]),_:1}))],64)):h("",!0),n.key=="title"?(m(),T("div",{key:1,title:c.notice.title},_(c.notice.title),9,me)):h("",!0),n.key=="content"?(m(),T("div",ce,_(c.notice.content),1)):h("",!0),n.key=="action"?A((m(),g(d,{key:3,type:"link",onClick:de=>$(c)},{default:e(()=>[l("查看")]),_:2},1032,["onClick"])),[[O,"private:notice:detail"]]):h("",!0)]),_:1},8,["loading","columns","data-source","pagination"])]),_:1}),o(U,{open:x.value,"onUpdate:open":t[3]||(t[3]=n=>x.value=n),title:"查看通知",footer:null,width:700,onCancel:t[4]||(t[4]=n=>f())},{default:e(()=>[o(P,{column:2},{default:e(()=>[o(v,{label:"标题",style:{"font-weight":"bold"}},{default:e(()=>[l(_(u.value.notice.title),1)]),_:1}),o(v,{label:"状态"},{default:e(()=>[u.value.status=="1"?(m(),g(b,{key:0,color:"#87d068"},{default:e(()=>[l("已读")]),_:1})):(m(),g(b,{key:1,color:"#f50"},{default:e(()=>[l("未读")]),_:1}))]),_:1}),o(v,{label:"发送人"},{default:e(()=>{var n,c;return[l(_((c=(n=u.value)==null?void 0:n.userInfo)==null?void 0:c.username),1)]}),_:1}),o(v,{label:"查看时间"},{default:e(()=>[l(_(u.value.readTime),1)]),_:1}),o(v,{label:"内容",span:2},{default:e(()=>[l(_(u.value.notice.content),1)]),_:1})]),_:1})]),_:1},8,["open"])])}}}),We=se(pe,[["__scopeId","data-v-88296c07"]]);export{We as default};
