import{u as L,j as U,_ as S,d as E}from"./main-BCN8moWb.js";import{s as O}from"./nodemodule-pinia@2.1.7_typescript@5.4.2_vue@3.4.21-DRg4DShQ.js";import{u as D}from"./nodemodule-@vueuse_core@10.9.0_vue@3.4.21-CS6n5tIH.js";import{b as H,u as J}from"./nodemodule-vue-router@4.3.0_vue@3.4.21-BC_007Jj.js";import{A as Q,a5 as W,G as X,a6 as Y,a7 as Z,D as ee,v as te,B as oe}from"./nodemodule-ant-design-vue@4.1.2_vue@3.4.21-D4V-KPiA.js";import{d as M,q as N,h as se,m as ne,a2 as C,L as c,ak as ae,K as v,M as l,y as $,z as le,c as t,aI as s,F as ie,O as ce,G as u}from"./nodemodule-@vue_runtime-core@3.4.21-Cnn673wu.js";import{u as e,i as T}from"./nodemodule-@vue_reactivity@3.4.21-DbkE7Gi6.js";import{u as j,v as re}from"./nodemodule-@vue_runtime-dom@3.4.21-CDjXREoQ.js";import{a9 as ue,aa as de,ab as pe,a8 as _e,ac as me}from"./nodemodule-@ant-design_icons-vue@7.0.1_vue@3.4.21-CO80cFpd.js";import{O as a}from"./nodemodule-@vue_shared@3.4.21-Ctf17_ps.js";const fe=M({__name:"LayoutMenu",setup(B){const d=H(),h=L(),{menuTree:g,themeCfg:y}=O(h),p=D("quick-build-menu-selected",[],sessionStorage),_=D("quick-build-menu-open",[],sessionStorage),i=N(()=>k(g.value)),k=n=>n.map(o=>{let m={key:(o==null?void 0:o.id)||"",...o};return m.icon&&(m.icon=se("span",{class:`iconfont icon-${m.icon}`})),o.children&&(m.children=k(o.children)),m});ne(()=>d.query,()=>{const{menuId:n}=d.query;n&&(p.value=[n])},{immediate:!0});const w=({item:n})=>{const{originItemValue:o}=n;U(o)};return(n,o)=>{const m=Q;return c(),C(m,ae(n.$attrs,{items:i.value,theme:e(y).menuTheme,onSelect:w,openKeys:e(_),"onUpdate:openKeys":o[0]||(o[0]=b=>T(_)?_.value=b:null),selectedKeys:e(p),"onUpdate:selectedKeys":o[1]||(o[1]=b=>T(p)?p.value=b:null),style:{height:"100%","overflow-y":"auto"},class:"gaius-menu"}),null,16,["items","theme","openKeys","selectedKeys"])}}}),Ve=S(fe,[["__scopeId","data-v-6f83061e"]]),ge={class:"logo"},he=["src"],ye=M({__name:"LayoutLogo",setup(B){j(_=>({"2c5c8f8c":e(h).headerFontColor,32770384:e(h).headerBgColor}));const d=L(),{themeCfg:h,collapsed:g,systemSetting:y}=O(d),{onToggleCollapsed:p}=d;return(_,i)=>(c(),v("div",ge,[l("img",{src:e(y).projectLogo,alt:""},null,8,he),$(l("span",{class:"title"},a(e(y).projectName),513),[[re,!e(g)]]),e(g)?(c(),C(e(ue),{key:0,class:"trigger",onClick:e(p)},null,8,["onClick"])):(c(),C(e(de),{key:1,class:"trigger",onClick:e(p)},null,8,["onClick"]))]))}}),ze=S(ye,[["__scopeId","data-v-b6204024"]]),ve={class:"layout-opt"},be={class:"layout-opt-notice",title:"通知"},ke={class:"content",style:{display:"flex","flex-direction":"column"}},xe={key:0,class:"notice-list",style:{padding:"0 5px"}},Ce={class:"title",style:{"font-size":"14px","font-weight":"bold"}},we=["title"],Ie={style:{flex:"1","white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis"}},Le={class:"layout-opt-userinfo",title:"用户信息"},Se=["src"],Oe={class:"layout-opt-userinfo-name"},Me=M({__name:"LayoutOpt",setup(B){j(I=>({"6d698934":e(_).headerFontColor,"3c3a6a04":e(_).headerBgColor}));const d=J(),{removeToken:h}=E(),g=L(),y=N(()=>w.value.map(I=>I.roleName).join(",")),{local:p,themeCfg:_,userInfo:i,orgInfo:k,roleInfo:w,noticeInfo:n}=O(g),{onOpenConfigDrawer:o,onToggleLocal:m}=g,b=()=>{window.open("https://github.com/Gaius-98/quick-build","_blank")},q=()=>{h(),d.push({path:"/login"})},G=()=>{d.push({path:"/system/notice-message"})};return(I,x)=>{const F=X,R=W,K=Y,V=oe,f=te,z=ee,A=Z,P=le("has-perm");return c(),v("div",ve,[$((c(),v("div",be,[t(K,{title:"通知",trigger:"click"},{content:s(()=>[l("div",ke,[e(n)&&e(n).list.length>0?(c(),v("div",xe,[(c(!0),v(ie,null,ce(e(n).list,r=>(c(),v("div",{key:r.id,style:{display:"flex","flex-direction":"column","justify-items":"flex-start","border-bottom":"1px solid rgba(5, 5, 5, 0.06)",padding:"5px",width:"200px"}},[l("div",Ce,a(r.notice.title),1),l("div",{class:"content",title:r.notice.content,style:{display:"flex",width:"100%"}},[l("div",Ie,a(r.notice.content),1),l("a",{style:{width:"50px","text-decoration":"underline"},onClick:x[0]||(x[0]=Be=>G())},"查看 ")],8,we)]))),128))])):(c(),C(F,{key:1}))])]),default:s(()=>[t(R,{count:e(n).total,"overflow-count":3,class:"badge"},null,8,["count"]),t(e(pe))]),_:1})])),[[P,"private:notice:limit"]]),l("div",{class:"layout-opt-theme",onClick:x[1]||(x[1]=(...r)=>e(o)&&e(o)(...r)),title:"主题配置"},[t(e(_e))]),l("div",{class:"layout-opt-github",onClick:b,title:"github"},[t(e(me))]),l("div",Le,[t(K,{placement:"bottomRight"},{content:s(()=>[t(V,{onClick:q,block:""},{default:s(()=>[u(" 退出 ")]),_:1})]),title:s(()=>[t(z,{title:"用户信息",size:"small",column:2,style:{width:"400px"}},{default:s(()=>[t(f,{label:"姓名"},{default:s(()=>[u(a(e(i).name),1)]),_:1}),t(f,{label:"用户名"},{default:s(()=>[u(a(e(i).username),1)]),_:1}),t(f,{label:"邮箱"},{default:s(()=>[u(a(e(i).email),1)]),_:1}),t(f,{label:"手机"},{default:s(()=>[u(a(e(i).phone),1)]),_:1}),t(f,{label:"角色"},{default:s(()=>[u(a(y.value),1)]),_:1}),t(f,{label:"所属机构"},{default:s(()=>{var r;return[u(a((r=e(k))==null?void 0:r.name),1)]}),_:1}),t(f,{label:"上次登录IP",span:2},{default:s(()=>[u(a(e(i).lastLoginIp),1)]),_:1}),t(f,{label:"登录IP",span:2},{default:s(()=>[u(a(e(i).loginIp),1)]),_:1})]),_:1})]),default:s(()=>[t(A,null,{icon:s(()=>[l("img",{src:e(i).avatar||"",alt:""},null,8,Se)]),_:1}),l("span",Oe,a(e(i).name),1)]),_:1})])])}}}),Ae=S(Me,[["__scopeId","data-v-4b30badd"]]);export{ze as L,Ae as a,Ve as b};
