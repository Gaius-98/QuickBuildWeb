import{I as C,o as K}from"./index-DstlK8U5.js";import{B as E}from"./EyeOutlined-MSEk9XoR.js";import{d as x,G as $,r as N,q as b,o as s,f as h,w as y,J as g,K as M,e as v,u as d,Q as q,R as w,F as S,A as I,v as U,B as A,$ as O,M as D,bd as B,ba as T,aV as G,I as j,y as J}from"./iconfont-DlnTACa0.js";import{b as L,_ as P,S as Q}from"./RadioButton-CjVxn_Oc.js";import{_ as V}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{_ as H}from"./index-ib-wLQfr.js";import{v as W}from"./v4-CtRu48qb.js";import{_ as X,C as Y}from"./index-DB-FIVCb.js";import{F as Z,_ as ee}from"./index-3zxQoAaC.js";import{_ as te,T as ae}from"./index-DFAyz8EE.js";const oe={class:"config-array"},ne=x({__name:"ConfigArray",props:{title:{default:"标题"},closable:{type:Boolean,default:!0},schema:{default:()=>({})},data:{}},setup(o){const e=o,{title:i,closable:c,data:a}=$(e),t=N(0),f=()=>{t.value=a.value.length||0,a.value.push({})},n=l=>{let p=0;a.value.forEach((_,m)=>{_.key===l&&(p=m-1)}),a.value=a.value.filter(_=>_.key!==l),a.value.length&&t.value===l&&(p>=0?t.value=a.value[p].key:t.value=a.value[0].key)},u=(l,p)=>{p==="add"?f():n(l)};return(l,p)=>{const _=te,m=ae;return s(),b("div",oe,[h(m,{activeKey:t.value,"onUpdate:activeKey":p[0]||(p[0]=r=>t.value=r),type:"editable-card",onEdit:u,class:"config-array-tab",size:"small"},{default:y(()=>[(s(!0),b(g,null,M(d(a),(r,k)=>(s(),v(_,{key:k+1,tab:`${d(i)}${k+1}`,closable:d(c)},{default:y(()=>[h(F,{schema:l.schema,data:d(a)[k],"onUpdate:data":R=>d(a)[k]=R},null,8,["schema","data","onUpdate:data"])]),_:2},1032,["tab","closable"]))),128))]),_:1},8,["activeKey"])])}}}),le=U("div",{class:"iconfont icon-brackets-curly"},null,-1),z=x({__name:"ConfigInput",props:q({compact:{type:Boolean,default:!0},size:{default:"default"}},{data:{required:!0,default:{_value:"",_mode:"static",_dynExp:""}},dataModifiers:{}}),emits:["update:data"],setup(o){const e=w(o,"data"),i=o,{size:c,compact:a}=$(i),t=S(()=>e.value._mode==="dynamic"),f=()=>{e.value._mode=e.value._mode==="dynamic"?"static":"dynamic"},n=u=>{e.value._mode==="dynamic"?e.value._dynExp=u.target.value:e.value._value=u.target.value};return(u,l)=>{const p=C,_=E,m=K;return s(),v(m,{size:d(c),compact:d(a)},{default:y(()=>[h(p,I({value:t.value?e.value._dynExp:e.value._value,onChange:n,style:{width:"calc(100% - 35px)"},prefix:t.value?"{":"",suffix:t.value?"}":""},u.$attrs),null,16,["value","prefix","suffix"]),h(_,{title:t.value?`绑定中:${e.value._dynExp}`:"变量绑定",type:t.value?"primary":"",onClick:l[0]||(l[0]=r=>f())},{icon:y(()=>[le]),_:1},8,["title","type"])]),_:1},8,["size","compact"])}}}),se=o=>(B("data-v-8fc419f7"),o=o(),T(),o),ue={class:"config-radio"},ce=se(()=>U("div",{class:"iconfont icon-brackets-curly"},null,-1)),de=x({__name:"ConfigRadio",props:q({options:{default:()=>[]},fields:{default:()=>({label:"label",value:"value",title:"title"})},icon:{type:Boolean,default:!1}},{data:{required:!0,default:{_value:"",_mode:"static",_dynExp:""}},dataModifiers:{}}),emits:["update:data"],setup(o){const e=w(o,"data"),i=o,{options:c,fields:a}=$(i),t=S(()=>e.value._mode==="dynamic"),f=()=>{e.value._mode=e.value._mode==="dynamic"?"static":"dynamic"};return(n,u)=>{const l=L,p=P,_=C,m=E;return s(),b("div",ue,[t.value?(s(),v(_,{key:1,value:e.value._dynExp,"onUpdate:value":u[1]||(u[1]=r=>e.value._dynExp=r),style:{width:"calc(100% - 35px)"},prefix:"{",suffix:"}"},null,8,["value"])):(s(),v(p,I({key:0},n.$attrs,{style:{width:"calc(100% - 35px)"},value:e.value._value,"onUpdate:value":u[0]||(u[0]=r=>e.value._value=r),"button-style":"solid"}),{default:y(()=>[(s(!0),b(g,null,M(d(c),r=>(s(),v(l,{key:r[d(a).value],title:r[d(a).title]||r[d(a).label],value:r[d(a).value]},{default:y(()=>[n.icon?(s(),b("div",{key:0,class:A(["iconfont",r.label])},null,2)):(s(),b(g,{key:1},[O(D(r[d(a).label]),1)],64))]),_:2},1032,["title","value"]))),128))]),_:1},16,["value"])),h(m,{title:t.value?`绑定中:${e.value._dynExp}`:"变量绑定",type:t.value?"primary":"",onClick:u[2]||(u[2]=r=>f())},{icon:y(()=>[ce]),_:1},8,["title","type"])])}}}),ie=V(de,[["__scopeId","data-v-8fc419f7"]]),_e=o=>(B("data-v-dcd1c0f1"),o=o(),T(),o),re={class:"config-select"},pe=_e(()=>U("div",{class:"iconfont icon-brackets-curly"},null,-1)),ve=x({__name:"ConfigSelect",props:{data:{required:!0,default:{_value:"",_mode:"static",_dynExp:""}},dataModifiers:{}},emits:["update:data"],setup(o){const e=w(o,"data"),i=S(()=>e.value._mode==="dynamic"),c=()=>{e.value._mode=e.value._mode==="dynamic"?"static":"dynamic"};return(a,t)=>{const f=Q,n=C,u=E;return s(),b("div",re,[i.value?(s(),v(n,{key:1,value:e.value._dynExp,"onUpdate:value":t[1]||(t[1]=l=>e.value._dynExp=l),style:{width:"calc(100% - 35px)"},prefix:"{",suffix:"}"},null,8,["value"])):(s(),v(f,I({key:0,style:{width:"calc(100% - 35px)"}},a.$attrs,{value:e.value._value,"onUpdate:value":t[0]||(t[0]=l=>e.value._value=l)}),null,16,["value"])),h(u,{title:i.value?`绑定中:${e.value._dynExp}`:"变量绑定",type:i.value?"primary":"",onClick:t[2]||(t[2]=l=>c())},{icon:y(()=>[pe]),_:1},8,["title","type"])])}}}),me=V(ve,[["__scopeId","data-v-dcd1c0f1"]]),fe=o=>(B("data-v-4206e5c3"),o=o(),T(),o),ye={class:"config-switch"},be=fe(()=>U("div",{class:"iconfont icon-brackets-curly"},null,-1)),he=x({__name:"ConfigSwitch",props:{data:{required:!0,default:{__value:!1,_mode:"static",_dynExp:""}},dataModifiers:{}},emits:["update:data"],setup(o){const e=w(o,"data"),i=S(()=>e.value._mode==="dynamic"),c=()=>{e.value._mode=e.value._mode==="dynamic"?"static":"dynamic"};return(a,t)=>{const f=H,n=C,u=E;return s(),b("div",ye,[i.value?(s(),v(n,{key:1,value:e.value._dynExp,"onUpdate:value":t[1]||(t[1]=l=>e.value._dynExp=l),style:{width:"calc(100% - 35px)"},prefix:"{",suffix:"}"},null,8,["value"])):(s(),v(f,I({key:0},a.$attrs,{checked:e.value._value,"onUpdate:checked":t[0]||(t[0]=l=>e.value._value=l)}),null,16,["checked"])),h(u,{title:i.value?`绑定中:${e.value._dynExp}`:"变量绑定",type:i.value?"primary":"",onClick:t[2]||(t[2]=l=>c())},{icon:y(()=>[be]),_:1},8,["title","type"])])}}}),xe=V(he,[["__scopeId","data-v-4206e5c3"]]),ge={class:"config-array"},$e=x({__name:"ConfigObject",props:{title:{default:"标题"},field:{default:""},schema:{default:()=>({})},data:{}},setup(o){const e=o,{title:i,field:c,data:a}=$(e),t=W()+c.value;return(f,n)=>{const u=X,l=Y;return s(),b("div",ge,[h(l,null,{default:y(()=>[(s(),v(u,{key:t,header:d(i)},{default:y(()=>[h(F,{schema:f.schema,data:d(a),"onUpdate:data":n[0]||(n[0]=p=>G(a)?a.value=p:null)},null,8,["schema","data"])]),_:1},8,["header"]))]),_:1})])}}}),F=x({__name:"ConfigForm",props:{schema:{default:()=>({})},data:{default:()=>({})}},setup(o){const e=o,{schema:i,data:c}=$(e),a=()=>{Object.keys(i.value).forEach(n=>{c.value[n]?typeof c.value[n]!="object"&&(c.value[n]=t(i.value[n].type,c.value[n])):c.value[n]=t(i.value[n].type)})},t=(n,u)=>{switch(n){case"array":return[];case"object":return{};case"input":case"select":case"radio":return{_value:u||"",_mode:"static",_dynExp:""};case"switch":return{_value:typeof u=="boolean"?u:!1,_mode:"static",_dynExp:""};default:return{_value:u||"",_mode:"static",_dynExp:""}}};a();const f=n=>{switch(n){case"input":return z;case"radio":return ie;case"select":return me;case"switch":return xe;default:return z}};return(n,u)=>{const l=ee,p=Z;return s(),v(p,{model:d(c)},{default:y(()=>[(s(!0),b(g,null,M(d(i),(_,m)=>(s(),b(g,{key:m},[_.type!=="object"?(s(),v(l,{key:0,label:_.label,name:m},{default:y(()=>[_.type==="array"?(s(),v(ne,{key:0,schema:_.items,data:d(c)[m]},null,8,["schema","data"])):(s(),v(J(f(_.type)),{key:1,data:d(c)[m],"onUpdate:data":r=>d(c)[m]=r},null,40,["data","onUpdate:data"]))]),_:2},1032,["label","name"])):j("",!0),_.type==="object"?(s(),v($e,{key:1,schema:_.properties,data:d(c)[m],title:_.label},null,8,["schema","data","title"])):j("",!0)],64))),128))]),_:1},8,["model"])}}});export{F as _};
