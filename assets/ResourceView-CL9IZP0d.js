import{a as y,_ as H}from"./resource-B1v-jguF.js";import{C as O}from"./index-DWh7MMD2.js";import{F as T,_ as A}from"./index-3zxQoAaC.js";import{I as G}from"./index-DstlK8U5.js";import{B as J}from"./EyeOutlined-MSEk9XoR.js";import{I as K}from"./DeleteOutlined-WDiOh2q4.js";import{C as Q}from"./CopyOutlined-3xtYkmn1.js";import{d as W,bf as X,r as p,p as Y,H as b,bj as I,q as z,f as t,w as a,$ as c,v as Z,e as S,I as v,M as ee,u as te,a as h,o as _}from"./iconfont-DlnTACa0.js";import{_ as oe}from"./index-C5YNH3Jl.js";import{_ as ae}from"./index-b8kqwElj.js";import{_ as ne}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./initDefaultProps-CCuNUPvT.js";import"./pickAttrs-C_Pg0-pd.js";import"./partition-DwP1LF9t.js";import"./_getPrototype-CreJcRG-.js";import"./useFlexGapSupport-CiVQ43IU.js";import"./index-HwKt48ol.js";import"./CheckOutlined-DhghRCOv.js";import"./PlusOutlined-boFLuxir.js";import"./index-DFAyz8EE.js";import"./index-CkgH7Yyy.js";import"./shallowequal-CYaRVoeZ.js";import"./index-Cj_T3PZy.js";import"./cloneDeep-eMWwQ7HD.js";import"./Col-7N7sU2gK.js";import"./css-CjeDAR7Q.js";import"./index-Df99mV5f.js";import"./LeftOutlined-DjA3wwZo.js";import"./RightOutlined-DiQ8sQL1.js";import"./index-C6qv0Jk3.js";import"./RadioButton-CjVxn_Oc.js";import"./index-DVHdQjvX.js";import"./useBreakpoint-BBubvWxm.js";import"./zh_CN-CAyhejr6.js";import"./index-BZJkr9T5.js";import"./dropdown-CS9IU7I3.js";import"./index-BJM6GpkM.js";import"./ActionButton-GOh5bmF9.js";const ie={class:"resource"},se={class:"tools"},re={key:1},pe=W({__name:"ResourceView",setup(me){const n=X({keyword:"",pageNumber:1,pageSize:10}),d=p(!1),k=p([]),F=p([{title:"文件名称",key:"originalname",dataIndex:"originalname",width:"300px"},{title:"缩略图",key:"img",dataIndex:"img",width:"300px"},{title:"文件大小",key:"size",dataIndex:"size",width:"120px"},{title:"地址",key:"path",dataIndex:"path"},{title:"操作",key:"action",dataIndex:"action",width:"250px"}]),f=p(!1),x=p(),N=()=>{var o;(o=x.value)==null||o.resetFields(),s()},C=p(0),B=()=>{n.pageNumber=1,n.pageSize=10,s()},D=o=>{const{current:e,pageSize:i}=o;n.pageNumber=e,n.pageSize=i,s()},R=o=>{d.value=!0;const e=new FormData;e.append("file",o.file,encodeURIComponent(o.file.name)),y.add(e).then(i=>{const{code:r,data:m,msg:g}=i;r==200&&h.success(g),d.value=!1,s()})},s=()=>{f.value=!0,y.getList(n).then(o=>{const{code:e,data:i}=o;e==200&&(k.value=i.data,C.value=i.total),f.value=!1})};Y(()=>{s()});const V=async o=>{const{code:e,msg:i,data:r}=await y.remove(o.id);e==200&&(h.success(r),s())},L=()=>{h.success("复制成功")};return(o,e)=>{const i=G,r=A,m=J,g=T,w=O,U=H,$=K,q=ae,M=oe,P=I("copy"),j=I("loading");return b((_(),z("div",ie,[t(w,{class:"search-area"},{default:a(()=>[t(g,{ref_key:"searchFormRef",ref:x,layout:"inline",model:n,onFinish:B},{default:a(()=>[t(r,{label:"资源名称",prop:"keyword"},{default:a(()=>[t(i,{value:n.keyword,"onUpdate:value":e[0]||(e[0]=l=>n.keyword=l)},null,8,["value"])]),_:1}),t(r,null,{default:a(()=>[t(m,{type:"primary","html-type":"submit"},{default:a(()=>[c("搜索")]),_:1}),t(m,{style:{margin:"0 8px"},onClick:N},{default:a(()=>[c(" 重置 ")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),t(w,null,{default:a(()=>[Z("div",se,[t(U,{name:"file",accept:"image/*",customRequest:R,maxCount:"1",showUploadList:!1},{default:a(()=>[t(m,{type:"primary"},{default:a(()=>[c(" 上传")]),_:1})]),_:1})]),t(M,{loading:f.value,columns:F.value,"data-source":k.value,scroll:{y:560},onChange:D,pagination:{current:n.pageNumber,total:C.value,showSizeChanger:!0,pageSize:n.pageSize}},{bodyCell:a(({column:l,record:u})=>[l.key=="img"?(_(),S($,{key:0,src:u.path,height:"130px"},null,8,["src"])):v("",!0),l.key=="path"?b((_(),z("span",re,[c(ee(u.path)+" ",1),t(te(Q),{style:{cursor:"pointer"},onClick:e[1]||(e[1]=E=>L())})])),[[P,u.path]]):v("",!0),l.key=="action"?(_(),S(q,{key:2,title:"确定要删除吗?","ok-text":"确定","cancel-text":"取消",onConfirm:E=>V(u)},{default:a(()=>[t(m,{type:"link",danger:""},{default:a(()=>[c("删除")]),_:1})]),_:2},1032,["onConfirm"])):v("",!0)]),_:1},8,["loading","columns","data-source","pagination"])]),_:1})])),[[j,d.value,void 0,{fullscreen:!0}]])}}}),Ke=ne(pe,[["__scopeId","data-v-84d6fa49"]]);export{Ke as default};
