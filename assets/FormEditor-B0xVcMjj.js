import{g as k,r as w,o as r,y as x,J as $,F as V,Q as B,h as m,w as b,a3 as le,al as Me,am as Ve,B as E,O as K,aO as Y,t as Le,v as L,x as Z,D as j,aP as re,i as e,au as ne,av as se,l as y,P as I,X as ce,C as pe,aQ as H,aR as ie,aS as ue,aT as de,a1 as ee,U as me,a9 as fe,aU as _e,ab as be,aV as ve,aW as ye,an as he,W as Te,a0 as S,a2 as ge,a4 as Pe,f as ze,aX as Fe,e as Ae,m as qe,aJ as Ue,s as N,aY as Q,A as Be,G as te,aZ as Ee,a_ as Ke,a$ as Ne,b0 as Ye,aE as Re,b1 as Ge,M as Oe,b2 as Je,Y as Qe,b3 as We,$ as Xe,b4 as Ze}from"./.pnpm-BOQ5c3CP.js";import{_ as R}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{g as z,s as F,c as je,u as He}from"./index-CFcf1xz-.js";import{a as X}from"./form-5zVj6ftD.js";import{S as ae}from"./SchemaForm-DkKuh3nS.js";import{d as W}from"./dict-BkAS2p2C.js";const we=s=>(Me("data-v-537542b9"),s=s(),Ve(),s),eo={class:"material-area"},oo={class:"material-layout-area"},to=we(()=>$("div",{class:"title"},"布局组件",-1)),ao={class:"content"},lo={class:"material-data-area"},ro=we(()=>$("div",{class:"title"},"基础组件",-1)),no={class:"content"},so=k({__name:"MaterialArea",setup(s){const c=w({layoutMaterials:[{label:"栅格",value:"grid"},{label:"卡片",value:"card"},{label:"分割线",value:"divider"},{label:"折叠框",value:"collapse"}],dataMaterials:[{label:"输入框",value:"input"},{label:"选择器",value:"select"},{label:"日期选择器",value:"date"},{label:"数字输入框",value:"number"},{label:"开关",value:"switch"},{label:"单选框",value:"radio"},{label:"多选框",value:"checkbox"},{label:"文本域",value:"textarea"}]}),a=o=>{var d;const l=o.target;(d=o.dataTransfer)==null||d.setData("material",l.dataset.material)};return(o,l)=>{const d=le;return r(),x("div",eo,[$("div",oo,[to,$("div",ao,[(r(!0),x(V,null,B(c.value.layoutMaterials,f=>(r(),m(d,{type:"dashed",key:f.value,draggable:"true",onDragstart:a,"data-material":f.value},{default:b(()=>[E(K(f.label),1)]),_:2},1032,["data-material"]))),128))])]),$("div",lo,[ro,$("div",no,[(r(!0),x(V,null,B(c.value.dataMaterials,f=>(r(),m(d,{type:"dashed",key:f.value,draggable:"true",onDragstart:a,"data-material":f.value},{default:b(()=>[E(K(f.label),1)]),_:2},1032,["data-material"]))),128))])])])}}}),co=R(so,[["__scopeId","data-v-537542b9"]]),A={formItemProp:{label:"",name:"",required:!1},show:void 0},po={...A,controlProp:{allowClear:!0,bordered:!0,disabled:!1,maxlength:null,size:"middle"},type:"input",id:""},io={...A,controlProp:{allowClear:!0,autosize:!1,disabled:!1,maxlength:null,size:"middle"},type:"textarea",id:""},uo={...A,controlProp:{allowClear:!0,bordered:!0,disabled:!1,mode:null,size:"middle",virtual:!0},type:"select",id:""},mo={...A,controlProp:{disabled:!1,size:"middle"},type:"switch",id:""},fo={...A,controlProp:{disabled:!1,size:"middle",buttonStyle:"solid",optionType:"button"},type:"radio",id:""},_o={...A,controlProp:{disabled:!1},type:"checkbox",id:""},bo={...A,controlProp:{allowClear:!1,bordered:!0,disabled:!1,format:"YYYY-MM-DD",mode:"",valueFormat:"YYYY-MM-DD",size:"middle",picker:""},type:"date",id:""},vo={...A,controlProp:{disabled:!1,size:"middle",bordered:!0,controls:!0,max:null,min:null,precision:null,step:1},type:"number",id:""},yo={type:"grid",controlProp:{gutter:0,colNumber:2,children:[]},id:"",show:void 0},ho={type:"card",controlProp:{title:"",bordered:!0,hoverable:!1,children:[]},id:"",show:void 0},go={type:"divider",controlProp:{type:"horizontal",plain:!1,orientation:"left",dashed:!1,title:""},id:"",show:void 0},Po={type:"collapse",controlProp:{bordered:!0,ghost:!1,header:"折叠面板",showArrow:!0,defaultExpanded:!0,children:[]},id:"",show:void 0},wo=[po,mo,uo,fo,_o,yo,ho,bo,vo,go,Po,io],Co=()=>"field"+new Date().getTime().toString().slice(-4),Do=(s,c)=>{const a=wo.find(o=>o.type===s);if(a){const o=Y(a);if(o.formItemProp){const l=Co();o.formItemProp.label=l,o.formItemProp.name=l}return o.id=new Date().getTime().toString(),{...o,...c}}else throw new Error(`ControlDefault中${s}不存在,加载配置失败。`)},Io=k({__name:"MaterialGrid",props:Le({gutter:{},colNumber:{}},{children:{required:!0},childrenModifiers:{}}),emits:["update:children"],setup(s){const c=s,{gutter:a,colNumber:o}=L(c),l=Z(s,"children"),d=j(()=>24/o.value);return re(()=>o.value,()=>{l.value?l.value.length>o.value?l.value=l.value.slice(0,o.value):l.value=l.value.concat(Array.from({length:o.value-l.value.length}).map(()=>[])):l.value=Array.from({length:o.value}).map(()=>[])},{immediate:!0}),(f,v)=>{const i=ne,_=se;return r(),m(_,{gutter:e(a)},{default:b(()=>[(r(!0),x(V,null,B(l.value,(h,P)=>(r(),m(i,{class:"gutter-col",span:d.value,key:P},{default:b(()=>[(r(),m(O,{modelValue:l.value[P],"onUpdate:modelValue":g=>l.value[P]=g,key:P},null,8,["modelValue","onUpdate:modelValue"]))]),_:2},1032,["span"]))),128))]),_:1},8,["gutter"])}}}),xo=R(Io,[["__scopeId","data-v-bd13b1ec"]]),ko=k({__name:"MaterialCard",props:{children:{required:!0},childrenModifiers:{}},emits:["update:children"],setup(s){const c=Z(s,"children");return(a,o)=>{const l=ce;return r(),m(l,I(a.$attrs,{bodyStyle:{padding:0,"min-height":"40px"}}),{default:b(()=>[y(O,{modelValue:c.value,"onUpdate:modelValue":o[0]||(o[0]=d=>c.value=d)},null,8,["modelValue"])]),_:1},16)}}}),So=k({__name:"MaterialDivider",props:{type:{},plain:{type:Boolean},orientation:{},dashed:{type:Boolean},title:{}},setup(s){const c=s,{title:a,dashed:o,orientation:l,plain:d,type:f}=L(c);return(v,i)=>{const _=pe;return r(),m(_,{dashed:e(o),orientation:e(l),plain:e(d),type:e(f)},{default:b(()=>[E(K(e(a)),1)]),_:1},8,["dashed","orientation","plain","type"])}}}),$o=k({__name:"MaterialCollapse",props:{bordered:{type:Boolean},ghost:{type:Boolean},title:{},showArrow:{type:Boolean},defaultExpanded:{type:Boolean},children:{}},setup(s){const c=s,{title:a,showArrow:o,bordered:l,ghost:d,defaultExpanded:f,children:v}=L(c),i=w(""),_=w(H());return f.value&&(i.value=_.value),(h,P)=>{const g=ue,n=de;return r(),m(n,{activeKey:i.value,"onUpdate:activeKey":P[1]||(P[1]=u=>i.value=u),bordered:e(l),ghost:e(d)},{default:b(()=>[(r(),m(g,{key:_.value,header:e(a),showArrow:e(o)},{default:b(()=>[y(O,{modelValue:e(v),"onUpdate:modelValue":P[0]||(P[0]=u=>ie(v)?v.value=u:null)},null,8,["modelValue"])]),_:1},8,["header","showArrow"]))]),_:1},8,["activeKey","bordered","ghost"])}}}),Mo={input:ee,select:me,radio:fe,switch:_e,number:be,checkbox:ve,grid:xo,card:ko,date:ye,divider:So,collapse:$o,textarea:he},Vo=k({__name:"LowCodeCard",props:{schema:{},formData:{}},setup(s){const c=s,{schema:a,formData:o}=L(c);return(l,d)=>{const f=ce;return r(),m(f,{bodyStyle:{padding:0,"min-height":"40px"},title:e(a).controlProp.title,bordered:e(a).controlProp.bordered,hoverable:e(a).controlProp.hoverable},{default:b(()=>[y(G,{schema:e(a).controlProp.children,formData:e(o)},null,8,["schema","formData"])]),_:1},8,["title","bordered","hoverable"])}}}),Lo=k({__name:"LowCodeGrid",props:{schema:{},formData:{}},setup(s){const c=s,{schema:a,formData:o}=L(c),l=j(()=>24/a.value.controlProp.colNumber);return(d,f)=>{const v=ne,i=se;return r(),m(i,{gutter:e(a).controlProp.gutter},{default:b(()=>[(r(!0),x(V,null,B(e(a).controlProp.children,(_,h)=>(r(),m(v,{class:"gutter-col",span:l.value,key:h},{default:b(()=>[y(G,{schema:_,formData:e(o)},null,8,["schema","formData"])]),_:2},1032,["span"]))),128))]),_:1},8,["gutter"])}}}),To=k({__name:"LowCodeCollapse",props:{schema:{},formData:{}},setup(s){const c=s,{schema:a,formData:o}=L(c),l=w(""),d=w(H());return a.value.controlProp.defaultExpanded.value&&(l.value=d.value),(f,v)=>{const i=ue,_=de;return r(),m(_,{activeKey:l.value,"onUpdate:activeKey":v[0]||(v[0]=h=>l.value=h),bordered:e(a).controlProp.bordered,ghost:e(a).controlProp.ghost},{default:b(()=>[(r(),m(i,{key:d.value,header:e(a).controlProp.title,showArrow:e(a).controlProp.showArrow},{default:b(()=>[y(G,{schema:e(a).controlProp.children,formData:e(o)},null,8,["schema","formData"])]),_:1},8,["header","showArrow"]))]),_:1},8,["activeKey","bordered","ghost"])}}}),G=k({__name:"LowCodeFormItem",props:{schema:{},formData:{}},setup(s){const c=s,{schema:a,formData:o}=L(c),l=w([]),d=w({});(()=>{a.value.map(i=>{"dict"in i.controlProp&&l.value.push(i.controlProp.dict)})})();const v=()=>{l.value.length>0&&je.getDict(l.value).then(i=>{const{code:_,data:h,msg:P}=i;_==200&&l.value.map(g=>{d.value[g]=h[g]})})};return Te(()=>{v()}),(i,_)=>{const h=pe,P=ee,g=he,n=me,u=fe,p=ye,C=be,q=ve,T=_e,U=ge;return r(!0),x(V,null,B(e(a),t=>(r(),x(V,null,[["grid","card","collapse","divider"].includes(t.type)?(r(),x(V,{key:0},[t.type=="card"?(r(),m(Vo,{key:t.name,schema:t,formData:e(o)},null,8,["schema","formData"])):S("",!0),t.type=="grid"?(r(),m(Lo,{key:t.name,schema:t,formData:e(o)},null,8,["schema","formData"])):S("",!0),t.type=="collapse"?(r(),m(To,{key:t.name,schema:t,formData:e(o)},null,8,["schema","formData"])):S("",!0),t.type=="divider"?(r(),m(h,I({key:3},t.controlProp,{key:t.name}),{default:b(()=>[E(K(t.controlProp.title),1)]),_:2},1040)):S("",!0)],64)):(r(),m(U,{label:t.formItemProp.label,name:t.formItemProp.name,key:t.name,required:t.formItemProp.required},{default:b(()=>[t.type=="input"?(r(),m(P,I({key:0,value:e(z)(e(o),t.formItemProp.name),onChange:D=>e(F)(e(o),t.formItemProp.name,D.target.value)},t.controlProp),null,16,["value","onChange"])):S("",!0),t.type=="textarea"?(r(),m(g,I({key:1,value:e(z)(e(o),t.formItemProp.name),onChange:D=>e(F)(e(o),t.formItemProp.name,D.target.value)},t.controlProp),null,16,["value","onChange"])):S("",!0),t.type=="select"?(r(),m(n,I({key:2,value:e(z)(e(o),t.formItemProp.name)},t.controlProp,{options:d.value[t.controlProp.dict],onChange:D=>e(F)(e(o),t.formItemProp.name,D)}),null,16,["value","options","onChange"])):S("",!0),t.type=="radio"?(r(),m(u,I({key:3,value:e(z)(e(o),t.formItemProp.name)},t.controlProp,{options:d.value[t.controlProp.dict],onChange:D=>e(F)(e(o),t.formItemProp.name,D.target.value)}),null,16,["value","options","onChange"])):S("",!0),t.type=="date"?(r(),m(p,I({key:4,value:e(z)(e(o),t.formItemProp.name)},t.controlProp,{onChange:D=>e(F)(e(o),t.formItemProp.name,D)}),null,16,["value","onChange"])):S("",!0),t.type=="number"?(r(),m(C,I({key:5,value:e(z)(e(o),t.formItemProp.name)},t.controlProp,{onChange:D=>e(F)(e(o),t.formItemProp.name,D)}),null,16,["value","onChange"])):S("",!0),t.type=="checkbox"?(r(),m(q,I({key:6,value:e(z)(e(o),t.formItemProp.name)},t.controlProp,{options:d.value[t.controlProp.dict],onChange:D=>e(F)(e(o),t.formItemProp.name,D)}),null,16,["value","options","onChange"])):S("",!0),t.type=="switch"?(r(),m(T,I({key:7,checked:e(z)(e(o),t.formItemProp.name)},t.controlProp,{onChange:D=>e(F)(e(o),t.formItemProp.name,D)}),null,16,["checked","onChange"])):S("",!0)]),_:2},1032,["label","name","required"]))],64))),256)}}}),Ce=k({__name:"LowCodeForm",props:{schema:{},formData:{}},setup(s){const c=s,{schema:a,formData:o}=L(c);return(l,d)=>{const f=Pe;return r(),m(f,I({model:e(o)},e(a).formConfig),{default:b(()=>[y(G,{formData:e(o),schema:e(a).formCfgItemList},null,8,["formData","schema"])]),_:1},16,["model"])}}}),oe=ze("formDesign",()=>{const s=w([]),c=w({}),a=w({}),o=w(""),l=n=>{const{id:u,schema:p,name:C,description:q,status:T,belong:U}=n;o.value=u,f.value={name:C,description:q,status:T,belong:U},s.value=p.formCfgItemList,c.value=p.formConfig},d=(n,u)=>{const p=u.findIndex(C=>C.id===n);p!=-1&&(a.value=u[p])},f=w({name:"",description:"",status:1}),v=(n,u)=>{const p=u.findIndex(C=>C.id===n);p!=-1&&u.splice(p,1)},i=()=>{const n=Y(a.value);_(n);const u=n;s.value.push(u)},_=n=>{n.id=H(),n.type=="grid"?n.controlProp.children.forEach(u=>{u.forEach(p=>{_(p)})}):n.type=="card"?n.controlProp.children.forEach(u=>{_(u)}):n.type=="collapse"&&n.controlProp.children.forEach(u=>{_(u)})},h=w(!1),P=()=>{const n=document.createElement("div");n.className="preview-form",n.style.width="720px",n.style.height="500px",n.style.overflowY="auto",n.style.padding="10px",qe(Ce,{schema:{formCfgItemList:s.value,formConfig:c.value},formData:{}}).mount(n).$el,document.body.appendChild(n)};return{curControlCfg:a,formCfgItemList:s,onSelectControlItem:d,copyControlItem:i,removeControlItem:v,extraFormConfig:f,onSave:async()=>{h.value=!0;let n="";if(P(),document.querySelector(".preview-form")){const T=await Fe(document.querySelector(".preview-form"));T&&(n=T.toDataURL("image/png"),document.body.removeChild(document.querySelector(".preview-form")))}let u=X.add;const p={schema:{formCfgItemList:s.value,formConfig:c.value},...f.value,img:n};o.value&&(u=X.update,p.id=o.value);const{code:C,msg:q}=await u(p);C==200&&Ae.success(q),h.value=!1},id:o,saveLoading:h,setFormDetail:l,formConfig:c}}),zo=["onClick"],Fo={class:"material-util"},Ao=["onClick"],qo=k({__name:"MaterialView",props:{modelValue:{required:!0},modelModifiers:{}},emits:["update:modelValue"],setup(s){Ue(g=>({"377eb23e":e(a).colorPrimary}));const c=He(),{themeCfg:a}=N(c),o=oe(),{curControlCfg:l}=N(o),{onSelectControlItem:d,copyControlItem:f,removeControlItem:v}=o,i=Z(s,"modelValue"),_=g=>Mo[g],h=(g,n)=>{const u=Y(g);switch(n){case"radio":u.options=[{label:"1",value:"1"},{label:"2",value:"2"}];break;case"checkbox":u.options=[{label:"1",value:"1"},{label:"2",value:"2"}];break;case"select":u.options=[{label:"1",value:"1"},{label:"2",value:"2"}];break}return u},P=g=>{if(g.dataTransfer.getData("material")){const n=Do(g.dataTransfer.getData("material"));i.value.push(n)}};return(g,n)=>{const u=ge;return r(),m(e(Ne),{list:i.value,"onUpdate:list":n[1]||(n[1]=p=>i.value=p),class:"material-view",onDragover:n[2]||(n[2]=Q(()=>{},["prevent","stop"])),onDrop:Q(P,["stop"]),animation:"300",group:{name:"form",pull:!0,put:!0},"ghost-class":"ghost"},{default:b(()=>[(r(!0),x(V,null,B(i.value,p=>(r(),x("div",{key:p,onClick:Q(C=>e(d)(p.id,i.value),["stop"]),class:Be(["material-item",{active:p.id===e(l).id}])},[p.formItemProp?(r(),m(u,{key:0,label:p.formItemProp.label,name:p.formItemProp.name},{default:b(()=>[(r(),m(te(_(p.type)),I(h(p.controlProp,p.type),{key:p.id}),null,16))]),_:2},1032,["label","name"])):(r(),m(te(_(p.type)),I({key:1},h(p.controlProp,p.type),{children:p.controlProp.children,"onUpdate:children":C=>p.controlProp.children=C,key:p.id}),null,16,["children","onUpdate:children"])),$("div",Fo,[$("div",{class:"icon-btn",onClick:n[0]||(n[0]=(...C)=>e(f)&&e(f)(...C)),title:"复制"},[y(e(Ee))]),$("div",{class:"icon-btn",onClick:C=>e(v)(p.id,i.value),title:"删除"},[y(e(Ke))],8,Ao)])],10,zo))),128))]),_:1},8,["list"])}}}),O=R(qo,[["__scopeId","data-v-11ca5068"]]),Uo=[{type:"input",properties:{"formItemProp.label":{type:"string",label:"标签文本"},"formItemProp.name":{type:"string",label:"字段名"},"controlProp.allowClear":{type:"switch",label:"可清除"},"controlProp.bordered":{type:"switch",label:"边框"},"controlProp.disabled":{type:"switch",label:"禁用"},"controlProp.size":{type:"radio",label:"大小",component:{dataSource:[{label:"大",value:"large"},{label:"中",value:"middle"},{label:"小",value:"small"}]}},"controlProp.maxlength":{type:"number",label:"最大长度"}}},{type:"textarea",properties:{"formItemProp.label":{type:"string",label:"标签文本"},"formItemProp.name":{type:"string",label:"字段名"},"controlProp.allowClear":{type:"switch",label:"可清除"},"controlProp.autosize":{type:"switch",label:"自适应内容高度"},"controlProp.disabled":{type:"switch",label:"禁用"},"controlProp.size":{type:"radio",label:"大小",component:{dataSource:[{label:"大",value:"large"},{label:"中",value:"middle"},{label:"小",value:"small"}]}},"controlProp.maxlength":{type:"number",label:"最大长度"}}},{type:"select",properties:{"formItemProp.label":{type:"string",label:"标签文本"},"formItemProp.name":{type:"string",label:"字段名"},"controlProp.allowClear":{type:"switch",label:"可清除"},"controlProp.bordered":{type:"switch",label:"边框"},"controlProp.disabled":{type:"switch",label:"禁用"},"controlProp.size":{type:"radio",label:"大小",component:{dataSource:[{label:"大",value:"large"},{label:"中",value:"middle"},{label:"小",value:"small"}]}},"controlProp.virtual":{type:"switch",label:"虚拟滚动"},"controlProp.mode":{type:"select",label:"模式",component:{dataSource:[{label:"多选",value:"multiple"},{label:"标签",value:"tag"}],allowClear:!0}},"controlProp.dict":{type:"select",label:"字典",component:{asyncData:async()=>{const{code:s,data:c,msg:a}=await W.getDictTypeList();return s==200?c.map(o=>({label:o.dictTypeDesc,value:o.dictType})):[]}}}}},{type:"switch",properties:{"formItemProp.label":{type:"string",label:"标签文本"},"formItemProp.name":{type:"string",label:"字段名"},"controlProp.disabled":{type:"switch",label:"禁用"},"controlProp.size":{type:"radio",label:"大小",component:{dataSource:[{label:"大",value:"large"},{label:"中",value:"middle"},{label:"小",value:"small"}]}}}},{type:"radio",properties:{"formItemProp.label":{type:"string",label:"标签文本"},"formItemProp.name":{type:"string",label:"字段名"},"controlProp.disabled":{type:"switch",label:"禁用"},"controlProp.size":{type:"radio",label:"大小",component:{dataSource:[{label:"大",value:"large"},{label:"中",value:"middle"},{label:"小",value:"small"}]}},"controlProp.buttonStyle":{type:"radio",label:"样式",component:{dataSource:[{label:"描边",value:"outline"},{label:"填色",value:"solid"}]}},"controlProp.optionType":{type:"radio",label:"类型",component:{dataSource:[{label:"默认",value:"default"},{label:"按钮",value:"button"}]}},"controlProp.dict":{type:"select",label:"字典",component:{asyncData:async()=>{const{code:s,data:c,msg:a}=await W.getDictTypeList();return s==200?c.map(o=>({label:o.dictTypeDesc,value:o.dictType})):[]}}}}},{type:"checkbox",properties:{"formItemProp.label":{type:"string",label:"标签文本"},"formItemProp.name":{type:"string",label:"字段名"},"controlProp.disabled":{type:"switch",label:"禁用"},"controlProp.dict":{type:"select",label:"字典",component:{asyncData:async()=>{const{code:s,data:c,msg:a}=await W.getDictTypeList();return s==200?c.map(o=>({label:o.dictTypeDesc,value:o.dictType})):[]}}}}},{type:"number",properties:{"formItemProp.label":{type:"string",label:"标签文本"},"formItemProp.name":{type:"string",label:"字段名"},"controlProp.bordered":{type:"switch",label:"边框"},"controlProp.disabled":{type:"switch",label:"禁用"},"controlProp.controls":{type:"switch",label:"控件"},"controlProp.size":{type:"radio",label:"大小",component:{dataSource:[{label:"大",value:"large"},{label:"中",value:"middle"},{label:"小",value:"small"}]}},"controlProp.max":{type:"number",label:"最大值"},"controlProp.min":{type:"number",label:"最小值"},"controlProp.precision":{type:"number",label:"精度"},"controlProp.step":{type:"number",label:"步长"}}},{type:"date",properties:{"formItemProp.label":{type:"string",label:"标签文本"},"formItemProp.name":{type:"string",label:"字段名"},"controlProp.bordered":{type:"switch",label:"边框"},"controlProp.disabled":{type:"switch",label:"禁用"},"controlProp.format":{type:"string",label:"显示格式化"},"controlProp.valueFormat":{type:"string",label:"值格式化"},"controlProp.size":{type:"radio",label:"大小",component:{dataSource:[{label:"大",value:"large"},{label:"中",value:"middle"},{label:"小",value:"small"}]}},"controlProp.mode":{type:"radio",label:"面板",component:{dataSource:[{label:"时间",value:"time"},{label:"日期",value:"date"},{label:"月",value:"month"},{label:"年",value:"year"}]}},"controlProp.picker":{type:"radio",label:"类型",component:{dataSource:[{label:"日期",value:"date"},{label:"周",value:"week"},{label:"月",value:"month"},{label:"年",value:"year"}]}}}},{type:"grid",properties:{"controlProp.gutter":{type:"number",label:"栅格间距"},"controlProp.colNumber":{type:"radio",label:"列配置",component:{dataSource:[{label:"一",value:1},{label:"二",value:2},{label:"三",value:3},{label:"四",value:4}]}}}},{type:"card",properties:{"controlProp.title":{type:"string",label:"标题"},"controlProp.bordered":{type:"switch",label:"边框"},"controlProp.hoverable":{type:"switch",label:"悬浮效果"}}},{type:"divider",properties:{"controlProp.title":{type:"string",label:"标题"},"controlProp.orientation":{type:"radio",label:"标题位置",component:{dataSource:[{label:"左",value:"left"},{label:"中",value:"center"},{label:"右",value:"right"}]}},"controlProp.dashed":{type:"switch",label:"虚线"},"controlProp.plain":{type:"switch",label:"普通正文"}}},{type:"collapse",properties:{"controlProp.title":{type:"string",label:"标题"},"controlProp.bordered":{type:"switch",label:"边框"},"controlProp.ghost":{type:"switch",label:"透明效果"},"controlProp.defaultExpanded":{type:"switch",label:"默认展开"},"controlProp.showArrow":{type:"switch",label:"显示箭头"}}}],Bo={key:1},Eo=k({__name:"MaterialCfg",setup(s){const c=oe(),{curControlCfg:a,formConfig:o}=N(c),l=w({layout:{layout:"horizontal",labelAlign:"right",labelCol:{span:8},wrapperCol:{span:16}},properties:{}}),d=w({layout:{layout:"horizontal",labelAlign:"right",labelCol:{span:8},wrapperCol:{span:16}},properties:{labelAlign:{label:"对齐方式",type:"radio",component:{dataSource:[{label:"左对齐",value:"left"},{label:"右对齐",value:"right"}]}},layout:{label:"布局方式",type:"radio",component:{dataSource:[{label:"响应式",value:"resLayout"},{label:"固定",value:"fixedLayout"}],onChange({field:v,formData:i,value:_}){_=="fixedLayout"?(Reflect.deleteProperty(i.labelCol,"span"),Reflect.deleteProperty(i.labelCol,"offset")):Reflect.deleteProperty(i.labelCol,"style")}}},"labelCol.span":{label:"标签宽度",type:"number",show:"'${formData.layout}' == 'resLayout'"},"labelCol.offset":{label:"偏移量",type:"number",show:"'${formData.layout}' == 'resLayout'"},"labelCol.style.width":{label:"宽度",type:"string",show:"'${formData.layout}' == 'fixedLayout'",tooltip:"单位为百分比或px,如: 100% 或 100px"}}}),f=w("item");return re(()=>a.value.type,()=>{if(a.value.type){let v=Uo.find(i=>i.type===a.value.type);v&&(l.value.properties=Y(v.properties))}},{immediate:!0}),(v,i)=>{const _=Re,h=Ge,P=Ye;return r(),m(P,{activeKey:f.value,"onUpdate:activeKey":i[0]||(i[0]=g=>f.value=g),size:"small"},{default:b(()=>[y(h,{key:"item",tab:"控件配置"},{default:b(()=>[e(a).id?(r(),m(e(ae),{schema:l.value,formData:e(a),size:"small",key:e(a).id},null,8,["schema","formData"])):(r(),x("div",Bo,[y(_)]))]),_:1}),y(h,{key:"form",tab:"表单配置"},{default:b(()=>[y(e(ae),{schema:d.value,formData:e(o),size:"small"},null,8,["schema","formData"])]),_:1})]),_:1},8,["activeKey"])}}}),Ko={class:"form-design"},No={class:"form-design-container"},Yo={class:"middle-part"},Ro=k({__name:"FormEditor",props:{id:{}},setup(s){window.name="form-design";const c=s,{id:a}=L(c),o=oe(),{formCfgItemList:l,extraFormConfig:d,saveLoading:f,formConfig:v}=N(o),{onSave:i,setFormDetail:_}=o,h=w(!1),P=w(0),g=[{title:"物料区",description:"选择您需要的表单控件",target:()=>document.querySelector(".left-part")},{title:"设计区",description:"将物料区的表单控件拖拽到此区域,可以按照你需要的方式进行布局。",target:()=>document.querySelector(".middle-part")},{title:"配置区",description:"对设计区选中的控件进行配置",target:()=>document.querySelector(".right-part")},{title:"查看实际效果",description:"对已经配置完成的表单进行预览",target:()=>document.querySelector(".preview-btn")},{title:"最后",description:"保存您刚刚的配置",target:()=>document.querySelector(".save-btn")}];a.value?X.getDetail(a.value).then(U=>{const{code:t,data:D,msg:J}=U;t==200&&_(D)}):(_({id:"",name:"",description:"",schema:{formCfgItemList:[],formConfig:{labelCol:{span:void 0,offset:void 0},labelAlign:"left"}},img:"",status:1,belong:"private"}),h.value=!0);const n=j(()=>a.value?d.value.description:""),u=()=>{window.open("/lowcode/form","quick-build")},p=()=>{i().then(()=>{u()})},C=w(!1),q=w({}),T=()=>{C.value=!0};return(U,t)=>{const D=ee,J=le,De=Ze,Ie=Je,xe=Pe,ke=Qe,Se=We,$e=Xe("loading");return r(),x(V,null,[$("div",Ko,[y(Ie,{subTitle:n.value,onBack:u,ghost:!1,style:{border:"1px solid rgb(235, 237, 240)",padding:"10px 24px"}},{title:b(()=>[y(D,{value:e(d).name,"onUpdate:value":t[0]||(t[0]=M=>e(d).name=M),bordered:!1,class:"form-name"},null,8,["value"])]),extra:b(()=>[y(De,null,{default:b(()=>[y(J,{onClick:T,class:"preview-btn"},{default:b(()=>[E(" 预览 ")]),_:1}),y(J,{onClick:t[1]||(t[1]=M=>p()),type:"primary",class:"save-btn"},{default:b(()=>[E(" 保存 ")]),_:1})]),_:1})]),_:1},8,["subTitle"]),Oe((r(),x("div",No,[y(co,{class:"left-part"}),$("div",Yo,[y(xe,I(e(v),{class:"middle-part-content"}),{default:b(()=>[y(O,{modelValue:e(l),"onUpdate:modelValue":t[2]||(t[2]=M=>ie(l)?l.value=M:null)},null,8,["modelValue"])]),_:1},16)]),y(Eo,{class:"right-part"})])),[[$e,e(f),void 0,{fullscreen:!0}]])]),y(ke,{open:C.value,"onUpdate:open":t[3]||(t[3]=M=>C.value=M),title:"预览",width:"1000px",height:"800px",footer:null},{default:b(()=>[y(Ce,{formData:q.value,schema:{formCfgItemList:e(l),formConfig:e(v)}},null,8,["formData","schema"])]),_:1},8,["open"]),y(Se,{current:P.value,"onUpdate:current":t[4]||(t[4]=M=>P.value=M),open:h.value,steps:g,onClose:t[5]||(t[5]=M=>h.value=!1)},null,8,["current","open"])],64)}}}),Zo=R(Ro,[["__scopeId","data-v-6332e150"]]);export{Zo as default};
